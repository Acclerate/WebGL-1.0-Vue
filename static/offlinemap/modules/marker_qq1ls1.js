/**/ï»¿_jsload&&_jsload('marker', 'e9.extend(eM.prototype,{initialize:function(e){this.map=e;this._addDom();this._bind();if(this._menu){this._menu.initialize(this.map,this)}if(this.domElement){this.domElement.hashCode=this.hashCode}e9.BaseClass.call(this,this.hashCode);if(!this._visible){e9.hide(this.domElement)}this.dispatchEvent(new fW("ondomready"));return this.domElement},_bind:function(){if(!this.domElement){return}var e=this;var T=this.map;function i(kF,kE){var kD=kF.srcElement||kF.target;var kC=kF.clientX||kF.pageX;var kH=kF.clientY||kF.pageY;if(kF&&kE&&kC&&kH&&kD){var kG=e9.Dom.getOffset(T.container);kE.pixel=new fv(kC-kG.left,kH-kG.top);kE.point=T.pixelToPointIn(kE.pixel);kE.latLng=js(T.pixelToPoint(kE.pixel),BMapGL.coordType);return kE}else{return kE}}e9.on(this.domElement,"mouseover",function(kC){if(!e._dragstarted){e.dispatchEvent(i(kC,new fW("onmouseover").inherit(kC)))}});e9.on(this.domElement,"mouseout",function(kC){if(!e._dragstarted){e.dispatchEvent(i(kC,new fW("onmouseout").inherit(kC)))}});if(b5()){e9.on(this.domElement,"touchstart",function(kC){e._bind._touchStartPos=new fv(kC.changedTouches[0].clientX,kC.changedTouches[0].clientY)});e9.on(this.domElement,"touchend",function(kE){var kD=new Date().getTime();var kC=new fv(kE.changedTouches[0].clientX,kE.changedTouches[0].clientY);if(Math.abs(kC.x-e._bind._touchStartPos.x)>10||Math.abs(kC.y-e._bind._touchStartPos.y)>10){e._bind._touchStartPos=null;return}e.dispatchEvent(i(kE,new fW("onclick").inherit(kE)));if(e._config&&typeof e._config.click==="function"){e._config.click()}if(e.map&&kD-e._dblclickTime<e.map.config.clickInterval){e.dispatchEvent(i(kE,new fW("ondblclick").inherit(kE)))}e._dblclickTime=kD})}e9.on(this.domElement,"click",function(kD){if(window.TouchEvent&&b5()){return}var kC=kD.srcElement||kD.target;while(kC){if(kC===e.domElement){if(e.toString()!=="Marker"||e.toString()==="Marker"&&(!e._lastPt||e._lastPt&&e.getPoint().equals(e._lastPt))){if(e.addStat&&typeof e.addStat==="function"){e.addStat()}e.dispatchEvent(i(kD,new fW("onclick").inherit(kD)))}break}else{if(e.map&&e.map.infoWindowDoms&&kC===e.map.infoWindowDoms.popDom){break}}kC=kC.parentNode}});e9.on(this.domElement,"mousedown",function(kC){if(e.toString()==="Marker"){e._lastPt=e.getPoint()}e.dispatchEvent(i(kC,new fW("onmousedown").inherit(kC)))});e9.on(this.domElement,"mouseup",function(kC){e.dispatchEvent(i(kC,new fW("onmouseup").inherit(kC)))});e9.on(this.domElement,"dblclick",function(kD){e.dispatchEvent(i(kD,new fW("ondblclick").inherit(kD)));var kC=kD.target||kD.srcElement||{};if(kC.tagName!=="circle"&&kC.tagName!=="oval"){hI(kD)}});e9.on(this.domElement,"contextmenu",function(kC){if(T.config.popRightClick){T._rightClickDeep=true}e.dispatchEvent(i(kC,new fW("onrightclick").inherit(kC)))})},hide:function(){if(this._visible===false){return false}this._visible=false;e9.hide(this.domElement);if(this.infoWindow&&this.infoWindow.overlay&&this.infoWindow.overlay===this){this.closeInfoWindow();this.closeSimpleInfoWindow()}return true},show:function(){if(this._visible===true){return false}this._visible=true;if(this._visibleInternal){e9.show(this.domElement);return true}else{return false}},setStyle:function(e){if(!this.domElement){return}if(this.siblingElement){this.siblingElement.style.cssText=this.siblingElement.style.cssText+";"+e}else{this.domElement.style.cssText=this.domElement.style.cssText+";"+e}},getPoint:function(T,kC){if(!T){return this.point}else{var e=kC?kC.width:0;var kD=kC?kC.height:0;if(this.map){var i=this.map.pointToPixelIn(this.point);if(this._config&&this._config.offset){i.x=i.x+this._config.offset.width+e;i.y=i.y+this._config.offset.height+kD}else{i.x=i.x+e;i.y=i.y+kD}return this.map.pixelToPointIn(i)}}},setZIndex:function(e){var T=this;T.zIndex=e;T._updateDomZIndex();if(T.map){var i=new fW("onupdate");i.target="setZIndex";T.map.fire(i)}},_updateDomZIndex:function(){var i=this;var e;if(typeof i.zIndex!=="undefined"){e=i.zIndex}else{e=0;if(i.map&&i.getPoint()){var T=i.getPoint()?i.getPoint().lat:0;e=aU.getZIndex(T,i.map.config.coordType)+(i._config.baseZIndex||0)}}if(i.domElement){i.domElement.style.zIndex=e}},isVisible:function(){if(!this.map){return false}if(this.map._renderType!=="webgl"&&!this.domElement){return false}return !!this._visible},showInternal:function(){if(this._visibleInternal===true){return false}if(this.collisionDetectionFailed===true){return false}this._visibleInternal=true;if(this._visible===true){e9.show(this.domElement)}return true},hideInternal:function(e){if(this._visibleInternal===false){return false}this._hideInternalReason=e;this._visibleInternal=false;e9.hide(this.domElement);if(this.infoWindow&&this.infoWindow.overlay&&this.infoWindow.overlay===this){this.closeInfoWindow();this.closeSimpleInfoWindow()}return true},addContextMenu:function(e){this._menu=e;if(this.map){e.initialize(this.map,this)}},removeContextMenu:function(){this._menu.remove();this._menu=null}});ke.TOP_ZINDEX=aU.getZIndex(-90)+1000000;ke.DRAG_ZINDEX=ke.TOP_ZINDEX+1000000;window.BMAP_ANIMATION_RAISEUP=3;window.BMAP_ANIMATION_DROPDOWN=4;ke._addDragCrossImg=function(T,e){if(!ke._dragCrossImg){ke._dragCrossImg=b6("img",{src:E.imgPath+"drag_cross.png",width:13,height:9});ke._dragCrossImg.style.position="absolute";if(e9.Browser.ie===6){delete ke._dragCrossImg;var kC=ke._dragCrossImg=b6("div");var i=kC.style;i.position="absolute";i.width="13px";i.height="9px";i.filter=\'progid:DXImageTransform.Microsoft.AlphaImageLoader(sizingMethod=image,src="\'+E.imgPath+\'drag_cross.png")\'}}var i=ke._dragCrossImg.style;i.left=T.width-6+"px";i.top=T.height-5+"px";e.appendChild(ke._dragCrossImg)};ke._removeDragCrossImg=function(){if(ke._dragCrossImg&&ke._dragCrossImg.parentNode){ke._dragCrossImg.parentNode.removeChild(ke._dragCrossImg)}};e9.extend(ke.prototype,{initialize:function(i){eM.prototype.initialize.call(this,i);if(!this._visible){if(this.siblingElement){e9.hide(this.siblingElement)}}this.setPoint(this.point);this.setIcon(this._config.icon,this._config.startAnimation);this.setLabel(this._config.label);this.setTitle(this._config.title);if(this._rotation!==0){this.setRotation(this._rotation)}this._initDrag();if(this._config.autoFollowHeadingChanged){var e=this;i.addEventListener("heading_changed",function(){e.updateRotation()});this.updateRotation()}return this.domElement},setOptions:function(e){if(this.map){if(!e.icon){e.icon=new jS(E.imgPath+"marker_red.png",new jo(23,25),{offset:new jo(10,25),infoWindowOffset:new jo(10,0)})}this.setIcon(e.icon,e.startAnimation);this.setConfig(e);this.setLabel(this._config.label);this.setTitle(this._config.title)}else{this.setConfig(e);if(!e.icon){this._config.icon=new jS(E.imgPath+"marker_red.png",new jo(23,25),{offset:new jo(10,25),infoWindowOffset:new jo(10,0)})}}},_addDom:function(){var e=this.map;if(this.domElement&&this.domElement.parentNode){this.domElement.parentNode.removeChild(this.domElement);this.domElement=null}this.domElement=bS(e.getPanes().markerMouseTarget,this._msTargetRender());if(e.getMapType()==="B_EARTH_MAP"||e._renderType==="webgl"){return}this.siblingElement=bS(e.getPanes().markerPane,this._markerRender());this.siblingElement.hashCode=this.getHashCode()},_msTargetRender:function(){var i=b(this._config.title);var e=[\'<div class="BMap_Marker BMap_noprint" unselectable="on" \'];i&&e.push(\'title="\'+i+\'"\');e.push(\' style="position:absolute;padding:0;margin:0;border:0;width:0;height:0;-moz-user-select:none;\');e.push(this._config.clickable?"cursor:pointer;":"");e.push("width:"+this._config.icon.size.width+"px;");e.push("height:"+this._config.icon.size.height+"px;");e.push(\'"></div>\');return e.join("")},_markerRender:function(){var e=[\'<div class="BMap_Marker" unselectable="on" \'];e.push(\'style="position:absolute;padding:0;margin:0;border:0;\');e.push(\'width:0;height:0;-moz-user-select:none"></div>\');return e.join("")},draw:function(T){if(!this.domElement){return}T=T||{};var i=this._getPixPos(T.zoom,T.center);if(i.onBack||i.outOfFrustum){this.hideInternal("out-of-view");return}this.showInternal();this.domElement.style.left=i.x+"px";this.domElement.style.top=i.y+"px";if(this.siblingElement){this.siblingElement.style.left=i.x+"px";this.siblingElement.style.top=i.y+"px"}else{if(this.map.getMapType()!=="B_EARTH_MAP"&&this.map._renderType!=="webgl"){this.initialize(this.map)}}if(this.infoWindow!==null&&this.infoWindow.isOpen()){this.infoWindow.setPosition(T.center,T.zoom)}},_getPixPos:function(T,e){var kD=this._config.offset||new jo(0,0);var kC=this._config.icon.offset||new jo(0,0);var i=this.map.pointToOverlayPixelIn(this.getPoint(),{zoom:T,center:e,fixPosition:true});i.x+=kD.width-kC.width;i.y+=kD.height-kC.height;return i},_getInPnBox:function(i){var kF=this._config.offset||new jo(0,0);var kE=this._config.icon.offset||new jo(0,0);var kD=parseInt(this.domElement.style.left);var T=parseInt(this.domElement.style.top);kD-=kF.width;T-=kF.height;var kC=parseInt(this.domElement.style.width);var e=parseInt(this.domElement.style.height);if(i.x>=kD&&i.x<=kD+kC&&i.y>=T&&i.y<=T+e){return true}else{return false}},_draw:function(){if(this.map){this.domElement=this.initialize(this.map)}},remove:function(){if(this.siblingElement&&this.siblingElement.parentNode){this.siblingElement.parentNode.removeChild(this.siblingElement)}if(this.infoWindow&&this.infoWindow.overlay&&this.infoWindow.overlay===this){this.closeInfoWindow();this.closeSimpleInfoWindow();this.infoWindow=null}this.siblingElement=null;this.iconDom=null;if(this._config.label){var i=this._config.label;i.setMarker(null);this.map.removeOverlay(i);this._config.label=null}eM.prototype.remove.call(this);var e=new fW("onstatus_change");e.action="remove";e.overlay=this;this.fire(e)},hide:function(){if(eM.prototype.hide.call(this)===false){return false}if(this.siblingElement){e9.hide(this.siblingElement)}if(this._config.label){e9.hide(this._config.label.domElement)}var e=new fW("onstatus_change");e.overlay=this;e.action="hide";this.fire(e);return true},show:function(){if(eM.prototype.show.call(this)===false){if(this._hideInternalReason==="out-of-view"){var e=new fW("onstatus_change");e.overlay=this;e.action="show";this.fire(e)}return false}this.draw();if(this.siblingElement){e9.show(this.siblingElement)}if(this._config.label){e9.show(this._config.label.domElement)}var e=new fW("onstatus_change");e.overlay=this;e.action="show";this.fire(e);return true},showInternal:function(){if(eM.prototype.showInternal.call(this)===false){return false}if(!this._visible){return false}if(this.siblingElement){e9.show(this.siblingElement)}if(this._config.label){this._config.label.showInternal()}return true},hideInternal:function(e){if(eM.prototype.hideInternal.call(this,e)===false){return false}if(this.siblingElement){e9.hide(this.siblingElement)}if(this._config.label){this._config.label.hideInternal(e)}return true},setIcon:function(kF,kD){if(!kF){return}var kG=this._config.icon.getCurrentImageUrl();var kC=kF.getCurrentImageUrl()!==kG;this._config.icon=kF;if(!this.map||!this.domElement){return}var i=this.map;if(this.iconDom&&this.siblingElement){this.siblingElement.removeChild(this.iconDom);this.iconDom=null}if(this.domElement){var kE=this.domElement.style;kE.width=kF.size.width+"px";kE.height=kF.size.height+"px";kE.transformOrigin=kF.anchor.width+"px "+kF.anchor.height+"px"}if(this.siblingElement){var T=this.iconDom=b6("div",{"class":kD||""});var kH=T.style;kH.position="absolute";kH.padding=kH.margin="0";kH.width=kF.size.width+"px";kH.height=kF.size.height+"px";kH.overflow="hidden";if(kF.imageUrl){T.innerHTML=kF.getHTML()}else{if(kF.imageDom){T.appendChild(kF.imageDom);if(kF.imageSize){kF.imageDom.style.width=kF.imageSize.width+"px";kF.imageDom.style.height=kF.imageSize.height+"px"}}}T.galleryImg=false;this.siblingElement.style.transformOrigin=kF.anchor.width+"px "+kF.anchor.height+"px";this.siblingElement.appendChild(this.iconDom)}this.textureCoord=this.textureCoordGLMap=null;this.draw();var e=new fW("onstatus_change");e.overlay=this;e.action="setIcon";e.imageUrlChanged=kC;this.fire(e)},setRotation:function(i){while(i<0){i+=360}this._rotation=i%360;var e=new fW("onstatus_change");e.overlay=this;e.action="setRotation";this.fire(e);if(!this.map||!this.domElement){return}this.domElement.style.transform="rotate("+i+"deg)";if(this.siblingElement){this.siblingElement.style.transform="rotate("+i+"deg)"}},setRotationOrigin:function(e){while(e<0){e+=360}this._rotationOrigin=e%360;this.updateRotation()},updateRotation:function(){if(!this.map||!this._config.autoFollowHeadingChanged){return}var e=(this._rotationOrigin+this.map.getHeading());this.setRotation(e)},setLabel:function(e){if(!(e instanceof bm)){return}e._config.enableMassClear=this._config.enableMassClear;this._config.label=e;var i=this;if(!this._config.label._binded){this._config.label._binded=true;this._config.label.addEventListener("remove",function(){i._config.label=null})}if(!this.map){return}e.setPoint(this.point);this.map.addOverlay(e);e.setMarker(this)},_initDrag:function(){if(!this.domElement||this.domElement._binded){return}this.domElement._binded=true;var T=this.map;var kG=this;var kE=0;var kD=0;var kC=0;var kH={x:0,y:0};function kF(kJ,kI){kI.pixel=kJ.pixel;kI.point=kJ.point;kI.latLng=js(kJ.latLng,BMapGL.coordType);return kI}function i(kK){var kJ=kK.clientX;var kI=kK.clientY;if(kK.changedTouches){kJ=kK.changedTouches[0].clientX;kI=kK.changedTouches[0].clientY}return new fv(kJ,kI)}var e=new fv(0,0);this.dragStart=function(kK){e=i(kK);if(!kG._config.enableDragging){return}if(b5()){T.disableDragging()}kG._isDragging=true;var kJ=T.pointToPixelIn(kG.point);var kI=i(kK);kE=kI.x-kJ.x;kD=kI.y-kJ.y;kC=new Date().getTime();if(kG.map){kG.map.temp._draggingMarker=kG}e9.on(document,"mousemove",kG.dragIng);e9.on(document,"mouseup",kG.dragEnd);e9.on(document,"touchmove",kG.dragIng);e9.on(document,"touchend",kG.dragEnd);if(kG.domElement&&kG.domElement.setCapture){kG.domElement.setCapture()}};this.dragIng=function(kO){var kJ=i(kO);if(kJ.equals(e)){return}e=kJ;if(!kG._isDragging){return}var kK=i(kO);var kL=new fv((kK.x-kE),(kK.y-kD));kH=kL;kG._draggingMovePixel=kL;if((kG._config.restrictDraggingArea&&(kL.x>15&&kL.x<kG.map.width-15)&&(kL.y>30&&kL.y<kG.map.height-15))||!kG._config.restrictDraggingArea){var kI=kG.map.pixelToPointIn(kL);var kM=kG.map.pixelToPoint(kL);var kN={pixel:kL,point:kI,latLng:kM};kG._panByX=kG._panByY=0;if(kL.x<=20||kL.x>=kG.map.width-20||kL.y<=50||kL.y>=kG.map.height-10){if(kL.x<=20){kG._panByX=8}else{if(kL.x>=kG.map.width-20){kG._panByX=-8}}if(kL.y<=50){kG._panByY=8}else{if(kL.y>=kG.map.height-10){kG._panByY=-8}}if(!kG._draggingMoveTimer){kG._draggingMoveTimer=setInterval(function(){T.panBy(kG._panByX,kG._panByY,{newAnimation:true});var kP=T.pixelToPointIn(kG._draggingMovePixel);kG.setPoint(kP)},30)}}else{if(kG._draggingMoveTimer){clearInterval(kG._draggingMoveTimer);kG._draggingMoveTimer=null}kG.setPoint(kI)}if(!kG._dragstarted){kG.dispatchEvent(kF(kN,new fW("ondragstart").inherit(kO)));kG._dragstarted=true;if(kG._config.raiseOnDrag){kG.setAnimation(BMAP_ANIMATION_RAISEUP);ke._addDragCrossImg(kG._config.icon.offset,kG.siblingElement)}}kG.dispatchEvent(kF(kN,new fW("ondragging").inherit(kO)))}};this.dragEnd=function(kI){if(kG.domElement&&kG.domElement.releaseCapture){kG.domElement.releaseCapture()}if(b5()){T.enableDragging()}kG._isDragging=false;if(kG.map){kG.map.temp._draggingMarker=null}e9.un(document,"mousemove",kG.dragIng);e9.un(document,"mouseup",kG.dragEnd);e9.un(document,"touchmove",kG.dragIng);e9.un(document,"touchend",kG.dragEnd);kE=kD=0;if(kG._draggingMoveTimer){clearInterval(kG._draggingMoveTimer);kG._draggingMoveTimer=null}if(kH.x>2||kH.y>2){kG._dragstarted=false;kG.dispatchEvent(kF({pixel:kG.map.pointToPixelIn(kG.getPoint()),point:kG.getPoint(),latLng:jy.convertMC2LL(kG.getPoint())},new fW("ondragend").inherit(kI)));if(kG._config.raiseOnDrag){kG.setAnimation(BMAP_ANIMATION_DROPDOWN);ke._removeDragCrossImg()}kH.x=kH.y=0}kG._updateDomZIndex()};this.delVertexMarker=function(kI){hI(kI);kG.dispatchEvent(kF({pixel:kG.map.pointToPixelIn(kG.getPoint()),point:kG.getPoint(),latLng:jy.convertMC2LL(kG.getPoint())},new fW("onmarkerdelvertex").inherit(kI)))};e9.on(this.domElement,"mousedown",this.dragStart);e9.on(this.domElement,"touchstart",this.dragStart);if(this.delFlag){e9.on(this.domElement,"contextmenu",this.delVertexMarker)}},setPoint:function(e){if(!e){return}this.point=this._config.point=new cG(e.lng,e.lat);this.latLng=js(jy.convertMC2LL(e),BMapGL.coordType);if(this._config.label){this._config.label.setPoint(this.point)}this.draw();this._updateDomZIndex();var i=new fW("onstatus_change");i.overlay=this;i.action="setPoint";this.fire(i)},_updateDomZIndex:function(){var T=this;var i;if(T._isDragging===true){i=ke.DRAG_ZINDEX}else{if(T._config.isTop===true){i=ke.TOP_ZINDEX+(T._addi||0)}else{if(typeof T.zIndex!=="undefined"){i=T.zIndex}else{i=0;if(T.map&&T.getPoint()){i=aU.getZIndex(T.getPoint().lat,T.map.config.coordType)+T._config.baseZIndex}}}}if(T.domElement){T.domElement.style.zIndex=i}if(T.siblingElement){T.siblingElement.style.zIndex=i}this._zIndex=i;var e=new fW("onstatus_change");e.overlay=this;e.action="zIndex";this.fire(e)},setTop:function(i,e){i=(typeof i!=="boolean")?true:i;this._config.isTop=!!i;if(i){this._addi=e||0}this._updateDomZIndex()},setTitle:function(i){this._config.title=i||"";var e=b(this._config.title);if(this.domElement&&e){this.domElement.title=e}},setOffset:function(i){if(!i){return}this._config.offset=i;this.setPoint(this.getPoint());var e=new fW("onstatus_change");e.overlay=this;e.action="setOffset";this.fire(e)},setAnimation:function(i){var e=this;hm.load("markeranimation",function(){e._setAnimation(i)},true)},_setAnimation:function(i){if(!this.iconDom){return}this._clearAnimation(i!==null);var e=ay[i];if(!e){return}this._execJSAnimation(i)},_clearAnimation:function(i){if(i){if(this._aniObj){this._aniObj.stop();this._aniObj=null}this.iconDom.style.top=this.iconDom.style.left="0px";if(this.shadowDom){this.shadowDom.style.top=this.shadowDom.style.left="0px"}}else{if(this._aniObj){var e=this;this._aniObj.setFinishCallback(function(){e._aniObj=null})}}},_execJSAnimation:function(kE){var kG=this.iconDom.style;var e=false;var kD;if(this.shadowDom){e=true;kD=this.shadowDom.style}var T=ay[kE];var kI=this;var kH=T.iconAnis.length,kL=T.options.duration,kK=kI._aniObj=new fL({duration:0,delay:fL.INFINITE});var kJ=T.iconAnis;var kC=T.shadowAnis;kG.top=kJ[0].translate[1]+"px";if(e){kD.left=kC[0].translate[0]+"px";kD.top=kC[0].translate[1]+"px"}for(var kF=1;kF<kH;kF++){(function(){var kQ=[kJ[kF].translate[0]-kJ[kF-1].translate[0],kJ[kF].translate[1]-kJ[kF-1].translate[1]];var kP=[kJ[kF-1].translate[0],kJ[kF-1].translate[1]];if(e){var kN=[kC[kF].translate[0]-kC[kF-1].translate[0],kC[kF].translate[1]-kC[kF-1].translate[1]];var kM=[kC[kF-1].translate[0],kC[kF-1].translate[1]]}var kO=gS[kJ[kF-1].timingFunc];var i=function(){};if(kF===kH-1){if(T.options.loop!==fL.INFINITE){i=function(){kI._aniObj=null}}else{i=function(){kI._aniObj.start()}}}kK.add(new fL({duration:(T.iconAnis[kF].percent-kJ[kF-1].percent)*kL,fps:40,delay:fL.INFINITE,transition:kO,render:function(kR){if(kI.iconDom){kI.iconDom.style.top=kP[1]+Math.round(kR*kQ[1])+"px"}if(e&&kI.shadowDom){kI.shadowDom.style.left=kM[0]+Math.round(kR*kN[0])+"px";kI.shadowDom.style.top=kM[1]+Math.round(kR*kN[1])+"px"}},finish:i}))})()}kK.start()},getVertexInfoForGL:function(){var T=this._config.icon.getRenderData();var e=this.point;var kD=i5(e.lng);var i=i5(e.lat);var kC=[];this._buildVertexForEachRender(kD,i,kC);return{vertex:kC,textureCoordGLMap:T.textureCoordGLMap}},_buildVertexForEachRender:function(kJ,kI,kG){var kH=this._config.icon;var kC=this._config.offset;var e=0;var kF=[];kF[0]=[-kH.offset.width+kC.width,-(kH.size.height-kH.offset.height)-kC.height];kF[1]=[kH.size.width-kH.offset.width+kC.width,-(kH.size.height-kH.offset.height)-kC.height];kF[2]=[kH.size.width-kH.offset.width+kC.width,kH.offset.height-kC.height];kF[3]=[-kH.offset.width+kC.width,kH.offset.height-kC.height];if(this._rotation!==0){for(var kD=0;kD<kF.length;kD++){var T=vec2.fromValues(kF[kD][0],kF[kD][1]);vec2.rotate(T,T,[0,0],iX(-this._rotation));kF[kD][0]=T[0];kF[kD][1]=T[1]}}while(e<6){var kE=e<3?e:(e===3?e-3:e-2);kG.push([kJ[0],kI[0],kJ[1],kI[1],kF[kE][0],kF[kE][1]]);e++}}});var ho=jS.prototype;ho.getHTML=function(){if(!this.imageUrl){return""}var e=[];e.push(\'<img src="\'+this.imageUrl+\'" \');if(this.srcSet){e.push(\'srcset="\'+this.srcSet+\'" \')}e.push(\'style="left:\'+(-this.imageOffset.width)+"px;");e.push("top:"+(-this.imageOffset.height)+"px;");if(this.imageSize){this.imageSize.width&&e.push("width:"+this.imageSize.width+"px;");this.imageSize.height&&e.push("height:"+this.imageSize.height+"px;")}e.push(\'position:absolute;"/>\');return e.join("")};e9.extend(bm.prototype,{_addDom:function(){var i=this._config;var kC=this.content;var e=b6("label",{"class":"BMapLabel",unselectable:"on"});if(i.title){e.title=i.title}var T=e.style;T.position="absolute";T.MozUserSelect="none";if(i.width===0||i.width==="auto"){T.display="inline"}else{T.width=i.width+"px";T.display="block";T.overflow="hidden"}if(!e9.Browser.ie){T.cursor="inherit"}e.innerHTML=kC;this.coordType=this.map?this.map.config.coordType:BMapGL.coordType;this.map.getPanes().labelPane.appendChild(e);this.domElement=e;this.setStyle(this._config.styles);return e},setPoint:function(e){if(e){this.point=this._config.point=gb(e,this.coordType);this.draw()}},draw:function(T){if(this.domElement&&this.getPoint()){var kC=this._config.offset||new jo(0,0);T=T||{};var i=this.map.pointToOverlayPixelIn(this.getPoint(),{zoom:T.zoom,center:T.center,fixPosition:true});if(i.onBack||i.outOfFrustum){this.hideInternal("out-of-view")}else{this.showInternal();this.domElement.style.left=(i.x+kC.width)+"px";this.domElement.style.top=(i.y+kC.height)+"px";this._updateDomZIndex()}}},_draw:function(){if(this.map){if(!this.domElement){this.domElement=this.initialize(this.map)}this.draw()}},setContent:function(e){this.content=e;if(this.domElement){this.domElement.innerHTML=e}},setOpacity:function(e){if(e>=0&&e<=1){this._config.opacity=e}if(this.domElement){this.domElement.style.opacity=e}},setOffset:function(e){if(!e){return}this._config.offset=new jo(e.width,e.height);this.draw()},setStyle:function(i){i=i||{};this._config.styles=e9.extend(this._config.styles,i);if(this.domElement){for(var kC in i){try{this.domElement.style[kC]=i[kC]}catch(T){}}}},setTitle:function(e){this._config.title=e||"";if(this.domElement){this.domElement.title=this._config.title}}});e9.extend(er.prototype,{initialize:function(e){eM.prototype.initialize.call(this,e);return this.domElement},_getPixPos:function(kD,i){var kC=this.map.getZoomUnits();var e=this._config.height/kC/2;var T=this.map.pointToPixelIn(this.getPoint(),{zoom:kD,center:i,height:e});return T},_draw:function(){if(this.map){this.domElement=this.initialize(this.map)}},_addDom:function(){var e=this.map;if(this.domElement&&this.domElement.parentNode){this.domElement.parentNode.removeChild(this.domElement);this.domElement=null}this.domElement=bS(e.getPanes().markerMouseTarget,this._msTargetRender());if(e.getMapType()==="B_EARTH_MAP"||e._renderType==="webgl"){return}},remove:function(){eM.prototype.remove.call(this);var e=new fW("onstatus_change");e.action="remove";e.overlay=this;this.fire(e)},_msTargetRender:function(){var e=[\'<div class="BMap_Marker BMap_noprint" unselectable="on" \'];e.push(\' style="position:absolute;padding:0;margin:0;border:0;width:0;height:0;-moz-user-select:none;\');e.push(this._config.clickable?"cursor:pointer;":"");e.push("width:"+this._config.size+"px;");e.push("height:"+this._config.size+"px;");e.push(\'"></div>\');return e.join("")},draw:function(kD){if(!this.domElement){return}kD=kD||{};if(kD.currentTarget){var kC=kD.currentTarget.zoomLevel;var i=kD.currentTarget.centerPoint}var T=this._getPixPos(kC,i);this.showInternal();this.domElement.style.left=T.x-this._config.size/2+"px";this.domElement.style.top=T.y-this._config.size/2+"px";if(this.map.getMapType()!=="B_EARTH_MAP"&&this.map._renderType!=="webgl"){this.initialize(this.map)}if(this.infoWindow!==null&&this.infoWindow.isOpen()){this.infoWindow.setPosition(kD.center,kD.zoom)}},showInternal:function(){if(eM.prototype.showInternal.call(this)===false){return false}if(!this._visible){return false}return true},hideInternal:function(e){if(eM.prototype.hideInternal.call(this,e)===false){return false}return true},getVertexInfoForGL:function(){var e=this.point;var kC=i5(e.lng);var i=i5(e.lat);var T=[];this._buildVertexForEachRender(kC,i,T);return{vertex:T}},_buildVertexForEachRender:function(kC,e,T){var i=hW.formatColorCssToRgbaArray(this._config.fillColor,this._config.fillOpacity,true);T.push([kC[0],e[0],kC[1],e[1],this._config.height,i[0]/255,i[1]/255,i[2]/255,i[3],this._config.size*gu(),this._config.shape])}});');
