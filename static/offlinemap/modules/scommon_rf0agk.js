/**/﻿_jsload&&_jsload('scommon', 'var g1=1,eV=2,aT=3,dj=new jo(21,33),cy=new jo(10,33),hJ=new jo(22,36),dz=new jo(11,36),ds=new jo(25,40),c3=new jo(12,20),eb=new jo(9,0),jf=new jo(300,300);fQ.addSearchPoi=function(i,kH,kF,kG){var kI=bf(kH);if(!kI){return}if(kF<0||kF>9){return}var kD=null;var kE=new u(kI);var e=E.staticHost+"/wolfman/static/common/images/";e+="markers_new2x_2960fb4.png";if(gu()>1){function kC(){return new jS(e,dj,{imageSize:jf,anchor:cy,imageOffset:new jo(21*kF,0),infoWindowOffset:eb})}kD=kC();var T=kC();T.setImageOffset(new jo(21*kF,66));kE.icoDefault=kD;kE.icoActive=T}else{kD=new jS(e,dj,{imageSize:jf,anchor:cy,imageOffset:new jo(21*kF,0),infoWindowOffset:eb})}kE.setIcon(kD);i.addOverlay(kE);if(kG){kE.setTitle(kG)}return kE};fQ.addCenterPoi=function(kD,e,kE){var kC=bf(e);if(!kC){return}var i=new u(kC);var kF=null;if(b5()){function T(){return new jS(E.imgPath+"markers_hd.png",new jo(21,31),{anchor:cy,imageOffset:new jo(-29,-320),imageSize:new jo(85,477),infoWindowAnchor:eb})}kF=T();i.icoDefault=kF}else{kF=new jS(E.imgPath+"markers.png",dj,{anchor:cy,imageOffset:new jo(0,-250),infoWindowAnchor:eb})}i.setIcon(kF);kD.addOverlay(i);if(kE){i.setTitle(kE)}return i};fQ.addSearchInBoundsPoi=function(i,kG,kF){var kH=bf(kG);if(!kH){return}var kE=new u(kH);var kD=null;var e=E.staticHost+"/wolfman/static/common/images/";e+="markers_new2x_2960fb4.png";if(gu()>1){function kC(){return new jS(e,hJ,{imageSize:jf,anchor:dz,imageOffset:new jo(200,188),infoWindowOffset:eb})}kD=kC();var T=kC();T.setImageOffset(new jo(200,224));kE.icoDefault=kD;kE.icoActive=T}else{kD=new jS(e,hJ,{imageSize:jf,anchor:dz,imageOffset:new jo(200,188),infoWindowOffset:eb})}kE.setIcon(kD);i.addOverlay(kE);if(kF){kE.setTitle(kF)}return kE};function bf(e){var T=[];var i=null;if(!e){return i}if(e instanceof cG||e instanceof cA){i=e}else{if(typeof e=="string"){T=e9.trim(e).split(",");if(T.length<2){return}T[0]=parseFloat(e9.trim(T[0]));T[1]=parseFloat(e9.trim(T[1]))}else{T=e.slice(0);if(T.length<2){return}}i=new cG(T[0],T[1])}return i}fQ.createSearchInfoWnd=function(T,e){var kL=T.title;var kJ=T.addr;var kE=T.tel;var kH=T.uid||"";var i=T.url;var kK=T.detailUrl;var kI=T.poiType||BMAP_POI_TYPE_NORMAL;e=e||{};if(!kL){return null}var kG=kL;if(kI==BMAP_POI_TYPE_BUSSTOP){kG=kG+"-公交车站"}else{if(kI==BMAP_POI_TYPE_SUBSTOP){kG=kG+"-地铁站"}}var kF=13;if(kK){kF=10}if(kG.replace(/[\\u0100-\\uffff]/g,"##").length>kF*2+1){kG=kG.substring(0,kF)+"&#8230"}var kD=\'<p style="margin-left:5px;display:inline;height:30px;line-height:30px;width:210px;font:bold 14px/16px \'+E.fontFamily+\';white-space:nowrap;overflow:hidden" title="\'+kL+\'">\'+kG;if(kK){kD+=\'<a target="_blank" href="\'+kK+\'" style="margin-left:5px;font-size:12px;color:#3d6dcc;font-weight:normal;text-decoration:none;">详情»</a>\'}kD+="</p>";var kN=[];kN.push(\'<div style="font: 12px \'+E.fontFamily+\'; margin: 5px">\');if(kJ){var kM="地址：";if(kI==BMAP_POI_TYPE_BUSSTOP||kI==BMAP_POI_TYPE_SUBSTOP){kM="车次："}kN.push(\'<table cellspacing="0" style="overflow: hidden; table-layout: fixed; width: 100 %; font: 12px \'+E.fontFamily+\'" >\');kN.push(\'<tr><td style="vertical-align: top; width: 38px; white-space: nowrap; word-break: keep-all">\'+kM+"&nbsp;</td><td>");kN.push(kJ+"&nbsp;</td></tr>");if(kE){kN.push(\'<tr><td style="vertical-align: top; ">电话：</td><td>\'+kE+"</td></tr>")}kN.push("</table>")}else{if(kE){kN.push(\'<table cellspacing="0" style="table-layout: fixed; width: 100 %; font: 12px \'+E.fontFamily+\'">\');kN.push(\'<tr><td style="vertical-align: top; width: 36px; white-space: nowrap; word-break: keep-all">电话：</td><td>\'+kE+"</td></tr></table>")}}kN.push("</div>");var kC=new ef(kN.join(""),{title:kD,height:0,width:250,margin:[10,10,20,10]});return kC};fQ.addDestPoi=function(kF,e,kG,T){var kC=E.staticHost+"/wolfman/static/common/images/";kC+="markers_new2x_2960fb4.png";var kE=bf(e);if(!kE){return}var kD=new jS(kC,ds,{imageSize:jf,anchor:c3,imageOffset:new jo(200+T*25,139),infoWindowOffset:eb});var i=new u(kE,{icon:kD,baseZIndex:3500000,draggingCursor:"pointer"});kF.addOverlay(i);if(kG){i.setTitle(kG)}return i};fQ.addLine=function(i,e){return fQ.addRoute(i,e,hZ)};fQ.ROUTE_TRAFFIC_STYLE_CONFIG=[{stroke:6,color:"#0030ff",opacity:0.45,style:"solid"},{stroke:5,color:"#00bd00",opacity:0.95,style:"solid"},{stroke:5,color:"#ffac00",opacity:0.95,style:"solid"},{stroke:5,color:"#f41c0d",opacity:0.95,style:"solid"},{stroke:5,color:"#B40000",opacity:1,style:"solid"}];fQ.ROUTE_STYLE_CONFIG=[{stroke:6,color:"#5298fe",opacity:1,style:"solid"},{stroke:6,color:"#5298fe",opacity:1,style:"solid"},{stroke:6,color:"#4ddc26",opacity:1,style:"solid"},{stroke:6,color:"#00bd01",opacity:1,style:"solid"},{stroke:6,color:"#ff0103",opacity:0.65,style:"dashed"},{stroke:6,color:"#ff0103",opacity:0.65,style:"solid"},{stroke:6,color:"#5298ff",opacity:1,style:"solid"},{stroke:6,color:"#5298ff",opacity:1,style:"solid"},{stroke:6,color:"#ff0103",opacity:0.65,style:"dashed"}];fQ.addRouteWithTraffic=function(kE,kC,kF){var T=fQ.ROUTE_TRAFFIC_STYLE_CONFIG;if(typeof kF=="undefined"){kF=0}if(!T[kF]){return}var e=kC;var i=T[kF];var kD=new bu(e,{strokeWeight:i.stroke,strokeColor:i.color,strokeOpacity:i.opacity,strokeStyle:i.style,clickable:false,});kE.addOverlay(kD);kD._trafficStatus=kF;return kD};fQ.addRoute=function(kG,kD,kC){var T=fQ.ROUTE_STYLE_CONFIG;if(typeof kC=="undefined"){kC=0}if(!T[kC]){return}var e=kD;var i=T[kC];var kF=new bu(e,{strokeWeight:i.stroke,strokeColor:i.color,strokeOpacity:i.opacity,strokeStyle:i.style,clickable:false,});kG.addOverlay(kF);kF._routeType=kC;if(kC==hZ){var kE=new bu(e,{strokeWeight:i.stroke-2,strokeColor:"#fff",strokeOpacity:0.3,clickable:false,});kF._p=kE;kG.addOverlay(kE)}return kF};fQ.createTransInfoWnd=function(i){var kE=i.content;var e=i.curIndex;var kF=i.total;var kC=i.nextTransCbk;var kD=i.obj;var kG=i.hideStep;var kH=[\'<div style="font: 12px \'+E.fontFamily+\'">\'];if(kE){kH.push(\'<div style="margin: 10px 1em 24px 0">\'+kE+"</div>")}if(!kG){kH.push(fQ.genStepNavHtml(kF,e))}kH.push("</div>");var T=new ef(kH.join(""),{title:"",height:0,width:220,margin:[10,10,20,10]});if(kG){return T}T.addEventListener("open",function(){var kI=b5()?"touchend":"click";if(e9.G("trans_prev")){e9.on(e9.G("trans_prev"),kI,function(){if(kC&&typeof kC=="function"){kC(e-1,kD)}})}if(e9.G("trans_next")){e9.on(e9.G("trans_next"),kI,function(){if(kC&&typeof kC=="function"){kC(e+1,kD)}})}});return T};fQ.genStepNavHtml=function(T,e){var i=[];i.push(\'<table id="trans_nav" width="99% " cols="2" style="background: #eaf2ff; font: 12px \'+E.fontFamily+\'"><tbody><tr>\');i.push(\'<td nowrap="nowrap" width="50% " align="left">\');if(e==0){i.push(\'<span unselectable="on" style="color: #9c9d99; -moz-user-select: none: >上一步</span>\')}else{i.push(\'<a id="trans_prev" style="color: #7777cc; -moz-user-select: none" href="javascript: void (0)">上一步</a>\')}i.push("</td>");i.push(\'<td nowrap="nowrap" width="50% " align="right">\');if(e==T+1){i.push(\'<span unselectable="on" style="color: #9c9d99; -moz-user-select: none" >下一步</span>\')}else{i.push(\'<a style="color: #7777cc" id="trans_next" href="javascript: void (0)">下一步</a>\')}i.push("</td></tr></tbody></table>");return i.join("")};fQ.addTransPoi=function(i,kG,kE,kF){var kH=bf(kG);if(!kH){return}kE=kE||BMAP_LINE_TYPE_BUS;var e=E.staticHost+"/wolfman/static/common/images/new/";e+="transit-exchange-2x_46d5be3.png";var T=54;switch(kE){case BMAP_LINE_TYPE_SUBWAY:T=75;break;case BMAP_LINE_TYPE_TRAIN:T=117;break;case BMAP_LINE_TYPE_AIRPLANE:T=138;break;case BMAP_LINE_TYPE_COACH:case BMAP_LINE_TYPE_BUS:default:T=54;break}var kD=new jS(e,new jo(22,22),{imageSize:new jo(22,181),infoWindowAnchor:new jo(10,0),imageOffset:new jo(0,T)});var kC=new u(kH,{icon:kD});i.addOverlay(kC);if(kF){kC.setTitle(kF)}return kC};fQ.getInfoWindowDom=function(e){if(e&&e.infoWindowDoms&&e.infoWindowDoms.contentDiv){return e.infoWindowDoms.contentDiv.childNodes[0]}return null};fQ.addStationPoi=function(T,e,kC){var i=new u(e,{icon:new jS(eJ._stopUrl,new jo(11,11))});if(kC){i.setTitle(kC)}T.addOverlay(i);return i};var dJ=E.stylePath+"map_icons2x/MapRes/shenghui_1.png";var cU=new BMapGL.Icon(dJ,new BMapGL.Size(10,10));fQ.addDragMkr=function(kC,e,T){if(!(T instanceof BMapGL.Icon)){T=cU}var i=new u(e,{icon:T,draggingCursor:"pointer",offset:new BMapGL.Size(5,5)});kC.addOverlay(i);i.setZIndex(10);return i};var eU=E.staticHost+"/wolfman/static/common/images/";eU+="markers_new2x_2960fb4.png";var jn=new BMapGL.Icon(eU,ds,{imageSize:jf,anchor:c3,imageOffset:new jo(538/2,418/2),infoWindowOffset:eb});fQ.addWayPointMkr=function(kD,e,T){var kC=bf(e);if(!kC){return}if(!(T instanceof BMapGL.Icon)){T=jn}var i=new u(e,{icon:T,draggingCursor:"pointer",offset:new jo(5,-20)});kD.addOverlay(i);i.setZIndex(10);return i};fQ.createTipLbl=function(i){var e=new bm(i,{offset:new jo(30,-10)});e.setStyle({border:"solid 1px gray",padding:"2px",whiteSpace:"nowrap",background:"#fff"});return e};fQ.getDistanceByPixel=function(i,e){if(!i||!e){return}return Math.round(Math.sqrt(Math.pow(i.x-e.x,2)+Math.pow(i.y-e.y,2)))};fQ.addSearchPoi_R=function(kI,kG,kJ,e,i){var kL=bf(kI),e=e||{};e.type=e.type||"normal";if(!kL||typeof(kG)=="undefined"||kG<0||(kG>9&&e.type!=="child")||(kG>39&&e.type==="child")){return}var kK;var kH=E.staticHost+"/wolfman/static/common/images/";kH+="markers_new2x_2960fb4.png";var kC=0;if(e.type=="RouteAddrMarker"){kC=273}var T=new jo(18*kG,kC);var kF=new jS(kH,new jo(18,27),{offset:new jo(9,27),imageOffset:T,infoWindowOffset:eb,imageSize:jf,});kK=kG+1;var kD=100;var kE=new u(kL,{icon:kF,zIndexFixed:true,baseZIndex:2500000-kD*kG});kE.customProperty={type:e.type};i.addOverlay(kE);kE._stCode=kK;if(kJ){kE.setTitle(kJ)}return kE};aK.CBK_SEARCH_COMPLETE=1;aK.CBK_MARKERS_SET=2;aK.CBK_INFO_HTML_SET=3;aK.CBK_POLYLINES_SET=4;aK.CBK_RESULTS_HTML_SET=5;aK.CBK_BUSLIST_COMPLETE=6;aK.CBK_BUSLINE_COMPLETE=7;aK.CBK_BUSLISTHTML_SET=8;aK.CBK_BUSLINEHTML_SET=9;aK._getPoiUrl=function(e,i){if(e){return E.mapHost+"?s="+encodeURIComponent("inf&uid="+e+"&c="+i)+"&i=0&sr=1"}return""};aK._getLocType=function(e){if(!e){return gB}if(typeof e=="string"){return jv}if(e instanceof cG||e instanceof cA){return bF}if(e instanceof h5){return bh}if(typeof e=="number"){return dW}return gB};e9.extend(aK.prototype,{_getIdByLoc:function(kD,e){var i=aK._getLocType(kD.src);if(i==gB){return}var T=this;if(i==dW){e&&e(kD.src);return}if(i==jv){if(kD.curLocType==i&&kD.curSrc==kD.src&&kD.curId){e&&e(kD.curId);return}kD.curLocType=i;kD.curSrc=kD.src;kl.request(function(kF){if(kF&&kF.result&&kF.result["type"]==fB){T._loc.curId=kF.content["code"];e&&e(T._loc.curId)}},{qt:dn,wd:kD.src})}else{var kC;var kE=18;if(i==bh){if(kD.src.isLoaded()){kC=kD.src.getCenter();kE=kD.src.getZoom()}else{kD.src.addEventListener("load",function(){T._getIdByLoc(kD,e)})}}else{kC=kD.src}if(i==kD.curLocType&&kD.curSrc.equals(kC)&&kD.curId){e&&e(kD.curId);return}if(i==bh){kC=jy.convertLL2MC(kC)}if(i==bF){kC=jy.convertLL2MC(kC)}kD.curLocType=i;kD.curSrc=new cG(kC.lng,kC.lat);kl.request(function(kF){if(kF&&kF.result&&kF.result["type"]==bn){T._loc.curId=kF.content?kF.content["uid"]:1;e&&e(T._loc.curId)}},{qt:ac,b:kC.lng+","+kC.lat+";"+kC.lng+","+kC.lat,l:kE})}},_setStatus:function(e){if(typeof e=="number"){this._status=e}else{delete this._status}},_triggerCbk:function(i,e,kC){var T;if(typeof e==="undefined"){T=4}else{if(e._plans&&e._plans.length){T=1}else{if(Object.prototype.toString.call(e._start)==="[object Object]"&&Object.prototype.toString.call(e._end)==="[object Object]"){T=3}else{T=2}}}var kD;switch(i){case aK.CBK_SEARCH_COMPLETE:kD=this._opts.onSearchComplete;kD&&kD(e,T);break;case aK.CBK_MARKERS_SET:kD=this._opts.onMarkersSet;kD&&kD(e,kC);break;case aK.CBK_POLYLINES_SET:kD=this._opts.onPolylinesSet;kD&&kD(e,kC);break;case aK.CBK_INFO_HTML_SET:kD=this._opts.onInfoHtmlSet;kD&&kD(e,kC);break;case aK.CBK_RESULTS_HTML_SET:kD=this._opts.onResultsHtmlSet;kD&&kD(e,kC);break;case aK.CBK_BUSLIST_COMPLETE:kD=this._opts.onGetBusListComplete;kD&&kD(e,kC);break;case aK.CBK_BUSLINE_COMPLETE:kD=this._opts.onGetBusLineComplete;kD&&kD(e,kC);break;case aK.CBK_BUSLISTHTML_SET:kD=this._opts.onBusListHtmlSet;kD&&kD(e,kC);break;case aK.CBK_BUSLINEHTML_SET:kD=this._opts.onBusLineHtmlSet;kD&&kD(e,kC);break;default:break}}});var dO=0;var dm=1;var W=2;bP.unique=function(T){var kE=false;var kD=[];var kF={};for(var kC=0,e=T.length;kC<e;kC++){if(!kF[T[kC]]){kF[T[kC]]=true;kD.push(T[kC])}}return kD};bP.getBestLevel=function(T,i){if(i){var e=Math.min(i.width/1100,i.height/660);T=Math.round(T+(Math.log(e)/Math.log(2)))}if(T<1){T=1}if(T>21){T=21}return T};bP.parseGeo=function(kF,kI){if(typeof kF!="string"||!kF){return}var kK=kF.split("|");var e;var kD;var T;if(kK.length==1){e=cb(kF)}else{e=cb(kK[2]);kD=cb(kK[0]);T=cb(kK[1]);if(!kI){return e}}var kG={type:e.geoType};if(kI){switch(kG.type){case W:var kH=new cG(e.geo[0][0],e.geo[0][1]);var kJ=jy.convertMC2LL(kH);kG.point=kJ;kG.points=[kJ];break;case dm:kG.points=[];var kL=e.geo[0];for(var kE=0,kC=kL.length-1;kE<kC;kE+=2){var kM=new cG(kL[kE],kL[kE+1]);kM=jy.convertMC2LL(kM);kG.points.push(kM)}kD=new cG(kD.geo[0][0],kD.geo[0][1]);T=new cG(T.geo[0][0],T.geo[0][1]);kD=jy.convertMC2LL(kD);T=jy.convertMC2LL(T);kG.bounds=new ik(kD,T);break;default:break}}return kG};bP.parseGeoExt=function(kV,kM){if(!kM){kM=0}else{if(kM<0.25){kM=0}else{if(kM>0.25&&kM<1){kM=1}else{if(kM>32){kM=32}}}}var kH=kV.split("|");if(kH.length==1){var kC=cb(kH[0]);return{type:kC.type,bound:"",points:kC.geo.join(",")}}else{if(kH.length>1){var kN=kV.split(";.=");var kJ=[];var kD=[];var kO=0;var kS=kN.length;for(var kP=0;kP<kS;kP++){var kU=kN[kP];if(kS>1){if(kP==0){kU=kU+";"}if(kP>0&&kP<kS-1){kU=".="+kU+";"}if(kP==kS-1){kU=".="+kU}}var kE=kU.split("|");var kR=cb(kE[0]);var kQ=cb(kE[1]);kJ.push(kR.geo.join(","));kJ.push(kQ.geo.join(","));var kC=cb(kE[2]);kO=kC.type;var kT=kC.geo.join(",");kT=bP.parseGeoExtReg1(kT);if(kM>0){kT=bP.parseGeoExtReg2(kT,kM)}kD.push(kT)}if(kS<=1){kD=kD.join(";")}if(kS==2){var T=kD[0]+";"+kD[1];var kF=T.split(";");var e=[];for(var kP=0;kP<kF.length;kP++){var kI=kF[kP].split(",")[0];var kG=kF[kP].split(",")[1];var kK=new cG(kI,kG);var kL=jy.convertMC2LL(kK);e.push(kL)}kD=e}return{type:kO,bound:kJ.join(";"),points:kD}}}};bP.getPoiPoint=function(e){var T=[];var i=null;if(e.toString()=="Point"){i=e}else{if(typeof e=="string"){T=e9.trim(e).split(",");if(T.length<2){return}T[0]=parseFloat(e9.trim(T[0]));T[1]=parseFloat(e9.trim(T[1]))}else{T=e.slice(0);if(T.length<2){return}}i=new BMap.Point(T[0],T[1])}return i};bP.parseGeoStr=function(T){var i=T.split(",");var e=new cG(i[0],i[1]);return jy.convertMC2LL(e)};bP.level={country:4,province:11,city:12,area:13};var hw=["=",".","-","*"];var di=1<<23;function cb(kI){var kH=ig(kI.charAt(0));var T=kI.substr(1);var kK=0;var e=T.length;var kL=[];var kF=[];var kG=[];while(kK<e){if(T.charAt(kK)==hw[0]){if((e-kK)<13){return 0}kG=em(T.substr(kK,13),kL);if(kG<0){return 0}kK+=13}else{if(T.charAt(kK)==";"){kF.push(kL.slice(0));kL.length=0;++kK}else{if((e-kK)<8){return 0}kG=cn(T.substr(kK,8),kL);if(kG<0){return 0}kK+=8}}}for(var kE=0,kC=kF.length;kE<kC;kE++){for(var kD=0,kJ=kF[kE].length;kD<kJ;kD++){kF[kE][kD]/=100}}return{geoType:kH,geo:kF}}function ig(i){var e=-1;if(i==hw[1]){e=W}else{if(i==hw[2]){e=dm}else{if(i==hw[3]){e=dO}}}return e}function em(kD,T){var e=0;var kF=0;var kE=0;for(var kC=0;kC<6;kC++){kE=dF(kD.substr(1+kC,1));if(kE<0){return -1-kC}e+=kE<<(6*kC);kE=dF(kD.substr(7+kC,1));if(kE<0){return -7-kC}kF+=kE<<(6*kC)}T.push(e);T.push(kF);return 0}function cn(kE,kC){var T=kC.length;if(T<2){return -1}var e=0;var kG=0;var kF=0;for(var kD=0;kD<4;kD++){kF=dF(kE.substr(kD,1));if(kF<0){return -1-kD}e+=kF<<(6*kD);kF=dF(kE.substr(4+kD,1));if(kF<0){return -5-kD}kG+=kF<<(6*kD)}if(e>di){e=di-e}if(kG>di){kG=di-kG}kC.push(kC[T-2]+e);kC.push(kC[T-1]+kG);return 0}function dF(i){var e=i.charCodeAt(0);if(i>="A"&&i<="Z"){return e-"A".charCodeAt(0)}else{if(i>="a"&&i<="z"){return(26+e-"a".charCodeAt(0))}else{if(i>="0"&&i<="9"){return(52+e-"0".charCodeAt(0))}else{if(i=="+"){return 62}else{if(i=="/"){return 63}}}}}return -1}bP.pathToPoints=function(kE){var kC=[];if(typeof kE!=="string"){return kC}else{var kD=kE.split(";");for(var T=0;T<kD.length;T++){var e=kD[T].split(",");kC.push(new cG(e[0],e[1]))}}return kC};bP.pointsToString=function(kD){var kC="";if(typeof kD!=="object"){return kD}else{for(var T=0;T<kD.length;T++){var e=kD[T].lat+","+kD[T].lng;if(T!==kD.length-1){kC=kC+e+"|"}else{kC=kC+e}}}return kC};bP.stringToPoints=function(kE){var kC=[];if(typeof kE!=="string"||!kE){return kC}else{var kD=kE.split("|");for(var T=0;T<kD.length;T++){var e=kD[T].split(",");kC.push(new cG(e[1],e[0]))}}return kC};');
