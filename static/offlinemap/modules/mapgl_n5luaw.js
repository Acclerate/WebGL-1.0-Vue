/**/ï»¿_jsload&&_jsload('mapgl', 'bG.register(function(i){if(i._renderType!=="webgl"||i._destroyed){return}i._webglMapCamera=new gK(i);var e=new cw(i,i._webglMapCamera);i._webglPainter=e;i._webglMapScene=new e6(i,e);new bv(i);if(i.config.showControls===true){this._navigationCtrl=new fb(i)}i.fire(new fW("onglmoduleloaded"))});function gK(i){this._map=i;this._fovy=35;this._fovyRadian=this._fovy*Math.PI/180;this._projectionMatrix=mat4.create();this._fixedViewMatrix=mat4.create();this._modelViewMatrix=mat4.create();this._projectionMatrix3D=mat4.create();this._projectionMatrix3DInverse=mat4.create();this._projectionMatrix3D64=mat4.create(Float64Array);this._projectionMatrix3DInverse64=mat4.create(Float64Array);this._projectionMatrixLabel3D64=mat4.create(Float64Array);this._modelViewMatrix3D=mat4.create();this._modelViewMatrixLineLabel=mat4.create();this._modelViewMatrixMCPlane64=mat4.create(Float64Array);this._modelViewMatrixMCPlaneInverse64=mat4.create(Float64Array);this._modelViewMatrixMCPlane=mat4.create();this._modelViewMatrixMC3D=mat4.create();this._modelViewMatrixPoly=mat4.create();this._modelViewMatrixLayer=mat4.create();this._ray=new d5.Ray();this._tempV4=vec4.create(Float64Array);this._tempRes=vec4.create();this._tempNdc=vec4.create();this._near=10;this._far=4000;this._farLabel=2800;if(!this._map.config.restrictCenter){this._far=3000;var e=this._map.getSize();if(e.height>1500){this._far=e.height*2}this._farLabel=2000}this._frustumSideLen=this._far/Math.cos(this._fovyRadian);this._init()}e9.extend(gK.prototype,{_init:function(){var e=this;e._renderTilt=e._getRenderTilt();e._updateSize();e._updateProjectionMatrix();e._updatePolyMatrix();e._updatePlaneMatrix();e._updatePolyLayerMatrix();this._map.on("updateoverlaymatrix",function(i){e._updatePolyMatrix()})},update:function(T){var i=this;i._renderTilt=i._getRenderTilt();if("onsize_changed" in T.changedStatus){i._updateSize();i._updateProjectionMatrix()}i._updatePolyMatrix();i._updatePlaneMatrix();i._updatePolyLayerMatrix()},_getRenderTilt:function(){var T=this._map;var e=T.getTilt();var i=T.getZoom();if(e!==0&&i<T._enableTiltZoom){if(i>=T._enableTiltZoom-2){e=(1-(T._enableTiltZoom-i)/2)*e}else{e=0}}return e},_updateSize:function(){var e=this._map.getSize();var i=this._map._projectionMatrix3D;this._width=e.width;this._height=e.height;this._widthHeightRatio=this._width/this._height;if(i==="ortho"){this._translateZ=-(this._far+this._near)/2}else{this._translateZ=Math.round(-this._height/(2*Math.tan(this._fovyRadian/2)))}this._farLabel=Math.abs(this._translateZ)+1400},_updateProjectionMatrix:function(){var kD=this._map;var T=kD.getSize();var kC=kD._projectionMatrix3D;mat4.ortho(this._projectionMatrix,0,T.width,0,T.height,this._near,this._far);var e=T.width/2;var i=T.height/2;if(kC==="ortho"){mat4.ortho(this._projectionMatrix3D64,-e,e,-i,i,this._near,this._far);mat4.ortho(this._projectionMatrixLabel3D64,-e,e,-i,i,this._near,this._farLabel)}else{mat4.perspective(this._projectionMatrix3D64,this._fovyRadian,this._widthHeightRatio,this._near,this._far);mat4.perspective(this._projectionMatrixLabel3D64,this._fovyRadian,this._widthHeightRatio,this._near,this._farLabel)}mat4.invert(this._projectionMatrix3DInverse64,this._projectionMatrix3D64);this._projectionMatrix3D=mat4.clone(this._projectionMatrix3D64);this._projectionMatrix3DInverse=mat4.clone(this._projectionMatrix3DInverse64)},getProjectionMatrix:function(){return this._projectionMatrix},getProjectionMatrix3D:function(){return this._projectionMatrix3D},getMCPlaneMVMatrix:function(){return this._modelViewMatrixMCPlane},getMC3DMVMatrix:function(){return this._modelViewMatrixMC3D},getXYZCustomModelViewMatrix3D:function(kM,kJ){var kE=kM.col;var kD=kM.row;var kR=kM.zoom;var kC=kM.loopOffsetX||0;var kP=this._map;var kK=kP.getZoom();mat4.identity(this._modelViewMatrix3D);var kL=kP.getCenterIn();var T=dL.getPointPixelCoor(kL,kR,kM.transform);var kO=Math.pow(2,kR-18);var kG=Math.pow(2,kK-18);var i=kC*kO;var kI=T[0];var kH=T[1];var kS=dL.getResolutionScale(kR,kM.transform);var e=Math.pow(2,kK-kR);var kN=dL.getXYZCellPixelCoor(kE,kD,kR,kM.transform);var kF=this._modelViewMatrix3D;var kQ=this._translateZ;if(this._renderTilt!==0){mat4.translate(kF,kF,[0,0,kQ]);mat4.rotate(kF,kF,iX(this._renderTilt),[-1,0,0]);mat4.translate(kF,kF,[0,0,-kQ])}if(kP._heading%360!==0){mat4.rotate(kF,kF,iX(kP._heading),[0,0,-1])}mat4.translate(kF,kF,[0,0,kQ]);mat4.scale(kF,kF,[e,e,kG]);mat4.translate(kF,kF,[0,0,-kQ]);mat4.translate(kF,kF,[(kN.x-kI)*kS+i,(kN.y-kH)*kS,kQ]);if(kJ!==undefined){mat4.scale(kF,kF,[kJ,kJ,1])}return this._modelViewMatrix3D},getModelViewMatrix3D:function(kC){var e=kC.col;var kP=kC.row;var kM=kC.zoom;var kI=kC.loopOffsetX;var kO=kC.baseTileSize;var T=this._map;var kG=T.getZoom();mat4.identity(this._modelViewMatrix3D);var kN=T.getCenterIn();var kK=Math.pow(2,kM-18);var kH=kI*kK;var kL=kN.lng*kK;var kJ=kN.lat*kK;var kD=Math.pow(2,kG-kM);var kE=new fv(e*kO,kP*kO);var kF=this._modelViewMatrix3D;var i=this._translateZ;if(this._renderTilt!==0){mat4.translate(kF,kF,[0,0,i]);mat4.rotate(kF,kF,iX(this._renderTilt),[-1,0,0]);mat4.translate(kF,kF,[0,0,-i])}if(T._heading%360!==0){mat4.rotate(kF,kF,iX(T._heading),[0,0,-1])}mat4.translate(kF,kF,[0,0,i]);mat4.scale(kF,kF,[kD,kD,kD]);mat4.translate(kF,kF,[0,0,-i]);mat4.translate(kF,kF,[kE.x-kL+kH,kE.y-kJ,i]);return this._modelViewMatrix3D},getModelViewMatrixForLineLabel:function(kC){var i=this._map;if(!i.loaded){return}var kF=this._modelViewMatrixLineLabel;mat4.identity(kF);var T=this._translateZ;var kI=i.centerPoint;var kH=i.zoomLevel;var kJ=i.getZoomUnits();var e=kC.col;var kM=kC.row;var kL=kC.baseTileSize;var kD=Math.pow(2,kH-kC.zoom);var kE={x:e*kL*kD,y:kM*kL*kD};var kG=[kE.x-kI.lng/kJ,kE.y-kI.lat/kJ,T];if(this._renderTilt!==0){mat4.translate(kF,kF,[0,0,T]);mat4.rotate(kF,kF,iX(this._renderTilt),[-1,0,0]);mat4.translate(kF,kF,[0,0,-T])}if(i._heading%360!==0){mat4.rotate(kF,kF,iX(i._heading),[0,0,-1])}mat4.translate(kF,kF,kG);var kK=Math.pow(2,kH-18);mat4.scale(kF,kF,[kK,kK,Math.pow(2,kH-20)]);return this._modelViewMatrixLineLabel},_updatePlaneMatrix:function(){var kG=this._map;if(!kG.loaded){return}var kD=this._modelViewMatrixMCPlane64;mat4.identity(kD);var kC=this._translateZ;var T=kG.centerPoint;var kF=kG.zoomLevel;var kE=kG.getZoomUnits();var i=[-T.lng/kE,-T.lat/kE,kC];if(this._renderTilt!==0){mat4.translate(kD,kD,[0,0,kC]);mat4.rotate(kD,kD,iX(this._renderTilt),[-1,0,0]);mat4.translate(kD,kD,[0,0,-kC])}if(kG._heading%360!==0){mat4.rotate(kD,kD,iX(kG._heading),[0,0,-1])}mat4.translate(kD,kD,i);var e=Math.pow(2,kF-18);mat4.scale(kD,kD,[e,e,Math.pow(2,kF-20)]);mat4.invert(this._modelViewMatrixMCPlaneInverse64,kD);this._modelViewMatrixMCPlane=mat4.clone(this._modelViewMatrixMCPlane64)},_updatePolyMatrix:function(){if(!this._map._polyOverlayBasePoint){return}var kG=this._map;var kF=kG.getZoom();mat4.identity(this._modelViewMatrixPoly);var kE=kG.getCenterIn();var i=Math.pow(2,kF-18);var e=kE.sub(kG._polyOverlayBasePoint).mult(i);var kC=this._translateZ;var T=this._modelViewMatrixPoly;if(this._renderTilt!==0){mat4.translate(T,T,[0,0,kC]);mat4.rotate(T,T,iX(this._renderTilt),[-1,0,0]);mat4.translate(T,T,[0,0,-kC])}if(kG._heading%360!==0){mat4.rotate(T,T,iX(kG._heading),[0,0,-1])}mat4.translate(T,T,[-e.lng,-e.lat,kC]);var kD=i;mat4.scale(T,T,[kD,kD,kD])},_updatePolyLayerMatrix:function(e){var i=this._map;if(!i._normalLayerMgr){return}if(e){var kD=jy.convertLL2MC(e)}else{var kD=i._normalLayerMgr.base}var kF=i.getZoom();mat4.identity(this._modelViewMatrixLayer);var kI=i.getCenterIn();var kH=Math.pow(2,kF-18);var kC=kI.sub(kD).mult(kH);var T=this._translateZ;var kE=this._modelViewMatrixLayer;if(this._renderTilt!==0){mat4.translate(kE,kE,[0,0,T]);mat4.rotate(kE,kE,iX(this._renderTilt),[-1,0,0]);mat4.translate(kE,kE,[0,0,-T])}if(i._heading%360!==0){mat4.rotate(kE,kE,iX(i._heading),[0,0,-1])}mat4.translate(kE,kE,[-kC.lng,-kC.lat,T]);var kG=kH;mat4.scale(kE,kE,[kG,kG,kG]);return kE},getFixedViewMatrix:function(e){var kE=this._map;mat4.identity(this._fixedViewMatrix);var kD=this._fixedViewMatrix;if(!kE||e.length<4){return kD}var kC=(e[0].lng+e[1].lng)/2;var T=(e[0].lat+e[3].lat)/2;var i=this._translateZ;mat4.translate(kD,kD,[kC,T,0]);if(this._renderTilt!==0){mat4.translate(kD,kD,[0,0,i]);mat4.rotate(kD,kD,iX(this._renderTilt),[-1,0,0]);mat4.translate(kD,kD,[0,0,-i])}if(kE._heading%360!==0){mat4.rotate(kD,kD,iX(kE._heading),[0,0,-1])}mat4.translate(kD,kD,[0,0,i]);mat4.translate(kD,kD,[-kC,-T,0]);return kD},getModelViewMatrixPoly:function(){return this._modelViewMatrixPoly},castRay:function(T,kD){var i=this._ray;var e=T.x;var kG=T.y;var kC=vec3.create(Float64Array);var kE=vec4.set(this._tempV4,e,kG,-1,1);this._calcV4InCastRay(kE,kD);vec3.scale(kC,kE,1/kE[3]);var kF=vec3.create(Float64Array);kE=vec4.fromValues(e,kG,1,1,Float64Array);this._calcV4InCastRay(kE,kD);vec3.scale(kE,kE,1/kE[3]);vec3.sub(kF,kE,kC);vec3.normalize(kF,kF);i.set(kC,kF);return i},_calcV4InCastRay:function(kE,T){if(!T||!T.matrixInfo){mat4.multiply(kE,this._projectionMatrix3DInverse64,kE);mat4.multiply(kE,this._modelViewMatrixMCPlaneInverse64,kE)}else{if(T.matrixInfo){var e=T.matrixInfo.projectionMatrix;var kC=mat4.create(Float64Array);if(e){mat4.invert(kC,e)}else{kC=this._projectionMatrix3DInverse64}var i=T.matrixInfo.modelViewMatrix;var kD=mat4.create(Float64Array);if(i){mat4.invert(kD,i)}else{kD=this._projectionMatrix3DInverse64}mat4.multiply(kE,kC,kE);mat4.multiply(kE,kD,kE)}}},fromXYZToNDC:function(kF,kD,T,kH){var kC=vec4.set(this._tempV4,kF,kD,T,1);var i=this._tempRes;kH=kH||{};var e=this._modelViewMatrixMCPlane64;var kE=this._projectionMatrix3D64;if(kH.matrixInfo){e=kH.matrixInfo.modelViewMatrix||e;kE=kH.matrixInfo.projectionMatrix||kE}mat4.multiply(i,e,kC);mat4.multiply(i,kE,i);var kG=vec4.set(this._tempNdc,i[0]/i[3],i[1]/i[3],i[2]/i[3],1);kG.outOfFrustum=false;if(kH.frustumTest){if(i[0]<-i[3]||i[0]>i[3]||i[1]<-i[3]||i[1]>i[3]||i[2]<-i[3]||i[2]>i[3]){kG.outOfFrustum=true}}kG.w=i[3];return kG},fromMCToScreenPixel:function(kD,kC,kJ){kJ=kJ||{};var T={matrixInfo:{}};if(kJ.center||kJ.zoom||typeof kJ.heading==="number"||typeof kJ.tilt==="number"){var kG=kJ.zoom||this._map.zoomLevel;var e=kJ.center||this._map.centerPoint;var kI=typeof kJ.heading==="number"?kJ.heading:this._map.getHeading();var kH=typeof kJ.tilt==="number"?kJ.tilt:this._renderTilt;T.matrixInfo.modelViewMatrix=this.generateMVMatrix(e,kG,kI,kH)}T.frustumTest=kJ.frustumTest;if(kJ.forLabel){T.matrixInfo.projectionMatrix=this._projectionMatrixLabel3D64}var kF=kJ.height||0;var kE=this.fromXYZToNDC(kD,kC,kF,T);if(!kE){return null}var i=new fv(((kE[0]+1)*this._map.width/2),((1-kE[1])*this._map.height/2));i.depth=(kE[2]+1)*0.5;i.w=kE.w;i.outOfFrustum=kE.outOfFrustum;return i},fromScreenPixelToMC:function(kJ,kF,kP){var kI=kJ*2/this._map.width-1;var kG=1-kF*2/this._map.height;kP=kP||{};var T=null;if(kP.zoom||kP.center||typeof kP.heading==="number"||typeof kP.tilt==="number"){var i=this._map;var kM=kP.zoom||i.zoomLevel;var e=kP.center||i.centerPoint;var kO=typeof kP.heading==="number"?kP.heading:i.getHeading();var kL=typeof kP.tilt==="number"?kP.tilt:this._renderTilt;T={matrixInfo:{modelViewMatrix:this.generateMVMatrix(e,kM,kO,kL)}}}var kH=this.castRay(new fv(kI,kG),T);var kC=vec3.fromValues(0,0,1,Float64Array);var kE=vec3.dot(kC,kH.origin);var kD=vec3.dot(kC,kH.direction);var kK=-kE/kD;var kN=vec3.create(Float64Array);vec3.scaleAndAdd(kN,kH.origin,kH.direction,kK);kN[0]=Math.round(kN[0]*100000)/100000;kN[1]=Math.round(kN[1]*100000)/100000;return new cG(kN[0],kN[1])},generateMVMatrix:function(e,kG,kI,kH){var i=this._map;if(!i.loaded){return}e=e||i.centerPoint;kG=kG||i.zoomLevel;kI=typeof kI==="number"?kI:i._heading;kH=typeof kH==="number"?kH:this._renderTilt;var kC=mat4.create(Float64Array);mat4.identity(kC);var T=this._translateZ;var kE=i.getZoomUnits(kG);var kD=[-e.lng/kE,-e.lat/kE,T];if(kH!==0){mat4.translate(kC,kC,[0,0,T]);mat4.rotate(kC,kC,iX(kH),[-1,0,0]);mat4.translate(kC,kC,[0,0,-T])}if(kI%360!==0){mat4.rotate(kC,kC,iX(kI),[0,0,-1])}mat4.translate(kC,kC,kD);var kF=Math.pow(2,kG-18);mat4.scale(kC,kC,[kF,kF,1]);return kC},getPosition:function(e){e=e||this._modelViewMatrixMCPlaneInverse64;return vec3.transformMat4(vec3.create(Float64Array),vec3.fromValues(0,0,0,Float64Array),e)}});function e6(i,e){this._map=i;this._camera=i._webglMapCamera;this._painter=e;this._changedStatus={};this._statusChanged=false;this._rAFStarted=false;this._enabled=true;if(i.getMapType()==="B_EARTH_MAP"){this._enabled=false}this._onEachFrame=(function(T){return function(){T._updateFrame()}})(this);this._init()}e9.extend(e6.prototype,{_init:function(){this._fpsStarted=false;this._mapStatusIdle=true;this._bind();this._statusChanged=true;this.startRenderThread();var e=new Q();var T=this;var kC=this._map;kC.on("movestart",function(){if(T._fpsStarted){return}T._fpsStarted=true;e.startFPS()});kC.on("moveend",function(){if(!T._fpsStarted){return}T._fpsStarted=false;e.stopFPS()});kC.on("zoomstart",function(){if(T._fpsStarted){return}T._fpsStarted=true;e.startFPS()});kC.on("zoomend",function(){if(!T._fpsStarted){return}T._fpsStarted=false;e.stopFPS()});function i(){if(!e.fpsStarted){return}if(kC.getMapType()!=="B_NORMAL_MAP"){return}var kF=e.getAverageFPS();var kE=e.getHigherAverageFPS();var kD=new fW("onfpsdata_ready");kD.fps=kF;kD.fpsH=kE;kC.fire(kD);e.clearFPSData()}setTimeout(i,5000);this._fpsInterval=setInterval(i,10000)},_bind:function(){var kC=this._map;var e=this;function kE(kF){e._changedStatus[kF.type]=kF||true;e._statusChanged=true;e.startRenderThread()}kC.on("zoom_changed",kE);kC.on("center_changed",kE);kC.on("heading_changed",kE);kC.on("tilt_changed",kE);kC.on("size_changed",kE);kC.on("displayoptions_changed",kE);kC.on("mapglidle_inner",function(){cancelAnimationFrame(e.renderTimer);e._rAFStarted=false;this.fire(new fW("onrenderthreadstop"));this.fire(new fW("onmapglidle"));e.renderTimer=null});var T=function(kF){e.startRenderThread()};kC.on("refresh",T);function kD(){if(this.mapType==="B_EARTH_MAP"){e._enabled=false;cancelAnimationFrame(e.renderTimer);e._rAFStarted=false;kC.fire(new fW("onrenderthreadstop"));e.renderTimer=null}else{e._enabled=true;e.startRenderThread()}}kC.on("maptypechange",kD);function i(){if(document.hidden){cancelAnimationFrame(e.renderTimer)}else{e.startRenderThread()}}kC.on("destroy",function(){this.off("zoom_changed",kE);this.off("center_changed",kE);this.off("heading_changed",kE);this.off("tilt_changed",kE);this.off("size_changed",kE);this.off("displayoptions_changed",kE);this.off("refresh",T);this.off("maptypechange",kD);document.removeEventListener("visibilitychange",i,false);cancelAnimationFrame(e.renderTimer);clearInterval(e._fpsInterval);e._fpsInterval=null})},startRenderThread:function(){if(!this._enabled){return}var T=this;if(T.idleTimer){clearTimeout(T.idleTimer)}T.idleTimer=setTimeout(function i(){T._map.fire(new fW("onmapglidle_inner"));T.idleTimer=null},200);if(T._statusChanged===true){if(T._mapStatusIdle===true){T._mapStatusIdle=false;T._map.fire(new fW("onmapstatusbusy_inner"))}if(T.statusIdleTimer){clearTimeout(T.statusIdleTimer)}T.statusIdleTimer=setTimeout(function e(){T._mapStatusIdle=true;T._map.fire(new fW("onmapstatusidle_inner"));T.statusIdleTimer=null},100)}if(this._rAFStarted===true){return}this._rAFStarted=true;this.renderTimer=requestAnimationFrame(this._onEachFrame)},_updateFrame:function(){this.renderTimer=requestAnimationFrame(this._onEachFrame);this._map.fire(new fW("onbeforeupdateframe"));if(this._rAFStarted===false){cancelAnimationFrame(this.renderTimer);return}var T=iy();if(this._statusChanged){this._statusChanged=false;var e=new fW("onupdate");e.changedStatus=this._changedStatus;if(this._changedStatus.onsize_changed){this._resizeMap(this._changedStatus.onsize_changed.oldSize)}this._camera.update(e);this._map.fire(e);this._changedStatus={}}this._painter.draw({idle:this._mapStatusIdle});var kC=iy()-T;var i=new fW("onupdateframe");i.frameTime=kC;this._map.fire(i)},_resizeMap:function(e){var T=this._map;var kC=T.getSize();var kH=(kC.width-e.width)/2;var kE=(kC.height-e.height)/2;var i=kH;var kF=kE;if(T._heading!==0){var kJ=iX(T._heading);i=Math.abs(Math.cos(kJ)*kH)+Math.abs(Math.sin(kJ)*kE);kF=Math.abs(Math.sin(kJ)*kH)+Math.abs(Math.cos(kJ)*kE)}var kG=T.getZoomUnits();var kI=T.centerPoint;if(kI&&!T.config.enableResizeOnCenter){if(T._heading%360!==0||T._tilt>0){var kD=new fv(kC.width/2,kC.height/2);T.centerPoint=T.restrictCenter(T.pixelToPointIn(kD))}else{T.centerPoint=T.restrictCenter(new cG(kI.lng+i*kG,kI.lat-kF*kG))}}}});function Q(){this._fps=0;this.preFrameTimeStamp=Date.now();this.currentTime=null;this.fpsArr=[];this.averageFPS=0;this.higherAverageFPS=0;this.averageTimeInterval=20;this.fpsStarted=false}Q.prototype.startFPS=function(){this.fpsStarted=true;this.preFrameTimeStamp=Date.now();this.initFPS()};Q.prototype.initFPS=function(){this._fps++;this.currentTime=Date.now();if(this.currentTime-this.preFrameTimeStamp>500){var i=this._fps*2;i=i>60?60:i;this.fpsArr.push(i);if(this.fpsArr.length===this.averageTimeInterval){this._calcAverageFPS()}this._fps=0;this.preFrameTimeStamp=this.currentTime}var e=this;this.timer=requestAnimationFrame(function(){e.initFPS()})};Q.prototype._calcAverageFPS=function(){if(this.fpsArr.length===0){return}var kC=0;var e=0;this.fpsArr.sort(function(kE,i){return i-kE});var kD=Math.round(this.fpsArr.length*0.8);for(var T=0;T<this.fpsArr.length;T++){if(T===kD){e=kC}kC+=this.fpsArr[T]}this.averageFPS=Math.round(kC/this.fpsArr.length);this.higherAverageFPS=Math.round(e/kD);this.fpsArr=[]};Q.prototype.getAverageFPS=function(){if(this.averageFPS===0){this._calcAverageFPS()}return this.averageFPS};Q.prototype.getHigherAverageFPS=function(){if(this.higherAverageFPS===0){this._calcAverageFPS()}return this.higherAverageFPS};Q.prototype.stopFPS=function(){if(this.timer){cancelAnimationFrame(this.timer);this.timer=null;if(this._fps!==0){var e=this.currentTime-this.preFrameTimeStamp;var i=this._fps*1000/e;i=i>60?60:i;this.fpsArr.push(i);this._fps=0}}};Q.prototype.clearFPSData=function(){this.averageFPS=0;this.higherAverageFPS=0;this.fpsStarted=false};var j5=(function(){var e={" ":[16,[]],"!":[10,[5,21,5,7,-1,-1,5,2,4,1,5,0,6,1,5,2]],\'"\':[16,[4,21,4,14,-1,-1,12,21,12,14]],"#":[21,[11,25,4,-7,-1,-1,17,25,10,-7,-1,-1,4,12,18,12,-1,-1,3,6,17,6]],"$":[20,[8,25,8,-4,-1,-1,12,25,12,-4,-1,-1,17,18,15,20,12,21,8,21,5,20,3,18,3,16,4,14,5,13,7,12,13,10,15,9,16,8,17,6,17,3,15,1,12,0,8,0,5,1,3,3]],"%":[24,[21,21,3,0,-1,-1,8,21,10,19,10,17,9,15,7,14,5,14,3,16,3,18,4,20,6,21,8,21,10,20,13,19,16,19,19,20,21,21,-1,-1,17,7,15,6,14,4,14,2,16,0,18,0,20,1,21,3,21,5,19,7,17,7]],"&":[26,[23,12,23,13,22,14,21,14,20,13,19,11,17,6,15,3,13,1,11,0,7,0,5,1,4,2,3,4,3,6,4,8,5,9,12,13,13,14,14,16,14,18,13,20,11,21,9,20,8,18,8,16,9,13,11,10,16,3,18,1,20,0,22,0,23,1,23,2]],"(":[14,[11,25,9,23,7,20,5,16,4,11,4,7,5,2,7,-2,9,-5,11,-7]],")":[14,[3,25,5,23,7,20,9,16,10,11,10,7,9,2,7,-2,5,-5,3,-7]],"*":[16,[8,21,8,9,-1,-1,3,18,13,12,-1,-1,13,18,3,12]],"+":[26,[13,18,13,0,-1,-1,4,9,22,9]],",":[10,[6,1,5,0,4,1,5,2,6,1,6,-1,5,-3,4,-4]],"-":[26,[4,9,22,9]],".":[10,[5,2,4,1,5,0,6,1,5,2]],"/":[22,[20,25,2,-7]],"0":[20,[9,21,6,20,4,17,3,12,3,9,4,4,6,1,9,0,11,0,14,1,16,4,17,9,17,12,16,17,14,20,11,21,9,21]],"1":[20,[6,17,8,18,11,21,11,0]],"2":[20,[4,16,4,17,5,19,6,20,8,21,12,21,14,20,15,19,16,17,16,15,15,13,13,10,3,0,17,0]],"3":[20,[5,21,16,21,10,13,13,13,15,12,16,11,17,8,17,6,16,3,14,1,11,0,8,0,5,1,4,2,3,4]],"4":[20,[13,21,3,7,18,7,-1,-1,13,21,13,0]],"5":[20,[15,21,5,21,4,12,5,13,8,14,11,14,14,13,16,11,17,8,17,6,16,3,14,1,11,0,8,0,5,1,4,2,3,4]],"6":[20,[16,18,15,20,12,21,10,21,7,20,5,17,4,12,4,7,5,3,7,1,10,0,11,0,14,1,16,3,17,6,17,7,16,10,14,12,11,13,10,13,7,12,5,10,4,7]],"7":[20,[17,21,7,0,-1,-1,3,21,17,21]],"8":[20,[8,21,5,20,4,18,4,16,5,14,7,13,11,12,14,11,16,9,17,7,17,4,16,2,15,1,12,0,8,0,5,1,4,2,3,4,3,7,4,9,6,11,9,12,13,13,15,14,16,16,16,18,15,20,12,21,8,21]],"9":[20,[16,14,15,11,13,9,10,8,9,8,6,9,4,11,3,14,3,15,4,18,6,20,9,21,10,21,13,20,15,18,16,14,16,9,15,4,13,1,10,0,8,0,5,1,4,3]],":":[10,[5,14,4,13,5,12,6,13,5,14,-1,-1,5,2,4,1,5,0,6,1,5,2]],";":[10,[5,14,4,13,5,12,6,13,5,14,-1,-1,6,1,5,0,4,1,5,2,6,1,6,-1,5,-3,4,-4]],"<":[24,[20,18,4,9,20,0]],"=":[26,[4,12,22,12,-1,-1,4,6,22,6]],">":[24,[4,18,20,9,4,0]],"?":[18,[3,16,3,17,4,19,5,20,7,21,11,21,13,20,14,19,15,17,15,15,14,13,13,12,9,10,9,7,-1,-1,9,2,8,1,9,0,10,1,9,2]],"@":[27,[18,13,17,15,15,16,12,16,10,15,9,14,8,11,8,8,9,6,11,5,14,5,16,6,17,8,-1,-1,12,16,10,14,9,11,9,8,10,6,11,5,-1,-1,18,16,17,8,17,6,19,5,21,5,23,7,24,10,24,12,23,15,22,17,20,19,18,20,15,21,12,21,9,20,7,19,5,17,4,15,3,12,3,9,4,6,5,4,7,2,9,1,12,0,15,0,18,1,20,2,21,3,-1,-1,19,16,18,8,18,6,19,5]],A:[18,[9,21,1,0,-1,-1,9,21,17,0,-1,-1,4,7,14,7]],B:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,11,-1,-1,4,11,13,11,16,10,17,9,18,7,18,4,17,2,16,1,13,0,4,0]],C:[21,[18,16,17,18,15,20,13,21,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5]],D:[21,[4,21,4,0,-1,-1,4,21,11,21,14,20,16,18,17,16,18,13,18,8,17,5,16,3,14,1,11,0,4,0]],E:[19,[4,21,4,0,-1,-1,4,21,17,21,-1,-1,4,11,12,11,-1,-1,4,0,17,0]],F:[18,[4,21,4,0,-1,-1,4,21,17,21,-1,-1,4,11,12,11]],G:[21,[18,16,17,18,15,20,13,21,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,18,8,-1,-1,13,8,18,8]],H:[22,[4,21,4,0,-1,-1,18,21,18,0,-1,-1,4,11,18,11]],I:[8,[4,21,4,0]],J:[16,[12,21,12,5,11,2,10,1,8,0,6,0,4,1,3,2,2,5,2,7]],K:[21,[4,21,4,0,-1,-1,18,21,4,7,-1,-1,9,12,18,0]],L:[17,[4,21,4,0,-1,-1,4,0,16,0]],M:[24,[4,21,4,0,-1,-1,4,21,12,0,-1,-1,20,21,12,0,-1,-1,20,21,20,0]],N:[22,[4,21,4,0,-1,-1,4,21,18,0,-1,-1,18,21,18,0]],O:[22,[9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21]],P:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,14,17,12,16,11,13,10,4,10]],Q:[22,[9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21,-1,-1,12,4,18,-2]],R:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,11,4,11,-1,-1,11,11,18,0]],S:[20,[17,18,15,20,12,21,8,21,5,20,3,18,3,16,4,14,5,13,7,12,13,10,15,9,16,8,17,6,17,3,15,1,12,0,8,0,5,1,3,3]],T:[16,[8,21,8,0,-1,-1,1,21,15,21]],U:[22,[4,21,4,6,5,3,7,1,10,0,12,0,15,1,17,3,18,6,18,21]],V:[18,[1,21,9,0,-1,-1,17,21,9,0]],W:[24,[2,21,7,0,-1,-1,12,21,7,0,-1,-1,12,21,17,0,-1,-1,22,21,17,0]],X:[20,[3,21,17,0,-1,-1,17,21,3,0]],Y:[18,[1,21,9,11,9,0,-1,-1,17,21,9,11]],Z:[20,[17,21,3,0,-1,-1,3,21,17,21,-1,-1,3,0,17,0]],"[":[14,[4,25,4,-7,-1,-1,5,25,5,-7,-1,-1,4,25,11,25,-1,-1,4,-7,11,-7]],"]":[14,[9,25,9,-7,-1,-1,10,25,10,-7,-1,-1,3,25,10,25,-1,-1,3,-7,10,-7]],"^":[16,[6,15,8,18,10,15,-1,-1,3,12,8,17,13,12,-1,-1,8,17,8,0]],_:[16,[0,-2,16,-2]],"`":[10,[6,21,5,20,4,18,4,16,5,15,6,16,5,17]],a:[19,[15,14,15,0,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],b:[19,[4,21,4,0,-1,-1,4,11,6,13,8,14,11,14,13,13,15,11,16,8,16,6,15,3,13,1,11,0,8,0,6,1,4,3]],c:[18,[15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],d:[19,[15,21,15,0,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],e:[18,[3,8,15,8,15,10,14,12,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],f:[12,[10,21,8,21,6,20,5,17,5,0,-1,-1,2,14,9,14]],g:[19,[15,14,15,-2,14,-5,13,-6,11,-7,8,-7,6,-6,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],h:[19,[4,21,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0]],i:[8,[3,21,4,20,5,21,4,22,3,21,-1,-1,4,14,4,0]],j:[10,[5,21,6,20,7,21,6,22,5,21,-1,-1,6,14,6,-3,5,-6,3,-7,1,-7]],k:[17,[4,21,4,0,-1,-1,14,14,4,4,-1,-1,8,8,15,0]],l:[8,[4,21,4,0]],m:[30,[4,14,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0,-1,-1,15,10,18,13,20,14,23,14,25,13,26,10,26,0]],n:[19,[4,14,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0]],o:[19,[8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3,16,6,16,8,15,11,13,13,11,14,8,14]],p:[19,[4,14,4,-7,-1,-1,4,11,6,13,8,14,11,14,13,13,15,11,16,8,16,6,15,3,13,1,11,0,8,0,6,1,4,3]],q:[19,[15,14,15,-7,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],r:[13,[4,14,4,0,-1,-1,4,8,5,11,7,13,9,14,12,14]],s:[17,[14,11,13,13,10,14,7,14,4,13,3,11,4,9,6,8,11,7,13,6,14,4,14,3,13,1,10,0,7,0,4,1,3,3]],t:[12,[5,21,5,4,6,1,8,0,10,0,-1,-1,2,14,9,14]],u:[19,[4,14,4,4,5,1,7,0,10,0,12,1,15,4,-1,-1,15,14,15,0]],v:[16,[2,14,8,0,-1,-1,14,14,8,0]],w:[22,[3,14,7,0,-1,-1,11,14,7,0,-1,-1,11,14,15,0,-1,-1,19,14,15,0]],x:[17,[3,14,14,0,-1,-1,14,14,3,0]],y:[16,[2,14,8,0,-1,-1,14,14,8,0,6,-4,4,-6,2,-7,1,-7]],z:[17,[14,14,3,0,-1,-1,3,14,14,14,-1,-1,3,0,14,0]],"{":[14,[9,25,7,24,6,23,5,21,5,19,6,17,7,16,8,14,8,12,6,10,-1,-1,7,24,6,22,6,20,7,18,8,17,9,15,9,13,8,11,4,9,8,7,9,5,9,3,8,1,7,0,6,-2,6,-4,7,-6,-1,-1,6,8,8,6,8,4,7,2,6,1,5,-1,5,-3,6,-5,7,-6,9,-7]],"|":[8,[4,25,4,-7]],"}":[14,[5,25,7,24,8,23,9,21,9,19,8,17,7,16,6,14,6,12,8,10,-1,-1,7,24,8,22,8,20,7,18,6,17,5,15,5,13,6,11,10,9,6,7,5,5,5,3,6,1,7,0,8,-2,8,-4,7,-6,-1,-1,8,8,6,6,6,4,7,2,8,1,9,-1,9,-3,8,-5,7,-6,5,-7]],"~":[24,[3,6,3,8,4,11,6,12,8,12,10,11,14,8,16,7,18,7,20,8,21,10,-1,-1,3,8,4,10,6,11,8,11,10,10,14,7,16,6,18,6,20,7,21,10,21,12]]};return function(kN,T,kJ,kD){kD=kD||1;var kF=[];var kH;var kI;var kG;var kE;var kK;var kM;var kL;var kC;for(kH=0,kI=kN.length;kH<kI;kH++){kK=e[kN[kH]];if(!kK){continue}kC=null;for(kG=0,kE=kK[1].length;kG<kE;kG+=2){if(kK[1][kG]===-1&&kK[1][kG+1]===-1){kC=null}else{kM=T+kK[1][kG]*kD;kL=kJ-kK[1][kG+1]*kD;if(kC){kF.push(kC.x,kC.y,kM,kL)}kC={x:kM,y:kL}}}T+=kK[0]*kD}return kF}})();function cl(i,kE,e,kD,kC){var kF=i.gl;var T=i.programMgr.useProgram("block");e.vao1.bind(kF,T,e.vertex,e.element1);kF.uniformMatrix4fv(T.uniforms.u_mv_matrix,false,kE.mvMatrix);if(kD){mat4.invert(i.normalMatrix,kE.mvMatrix);mat4.transpose(i.normalMatrix,i.normalMatrix)}kF.uniformMatrix4fv(T.uniforms.u_normal_matrix,false,i.normalMatrix);kF.drawElements(kF.TRIANGLES,e.element1.length,kF.UNSIGNED_SHORT,0)}function kg(e,T,kC){var kD=e.gl;var i=e.programMgr.useProgram("block");kD.uniform3fv(i.uniforms.u_side_light_dir,T);kD.uniform1i(i.uniforms.u_is_normal,kC);if(!i.lastState.projMatrix){kD.uniformMatrix4fv(i.uniforms.u_proj_matrix,false,e.projMatrix);i.lastState.projMatrix=true}var kE=e._camera._far||4000;if(i.lastState.cameraFar!==kE){kD.uniform1f(i.uniforms.u_camera_far,kE);i.lastState.cameraFar=kE}}function eR(kG,kF,e,kH){var kE=kG.gl;var kD=kG.programMgr.useProgram("shadow");kE.uniformMatrix4fv(kD.uniforms.u_mv_matrix,false,kF.mvMatrix);if(typeof e.length==="number"){for(var kC=0;kC<e.length;kC++){var kI=e[kC];var T=kH[kC];if(T.type==="fill"){kI.vao1.bind(kE,kD,kI.vertex,kI.element1);kE.drawElements(kE.TRIANGLES,kI.element1.length,kE.UNSIGNED_SHORT,0)}}}else{e.vao1.bind(kE,kD,e.vertex,e.element1);kE.drawElements(kE.TRIANGLES,e.element1.length,kE.UNSIGNED_SHORT,0)}}function ff(i,e){var kC=i.gl;var T=i.programMgr.useProgram("shadow");kC.uniform3fv(T.uniforms.u_light_dir,e);if(!T.lastState.projMatrix){kC.uniformMatrix4fv(T.uniforms.u_proj_matrix,false,i.projMatrix);T.lastState.projMatrix=true}var kD=i._camera._far||4000;if(T.lastState.cameraFar!==kD){kC.uniform1f(T.uniforms.u_camera_far,kD);T.lastState.cameraFar=kD}}var af=(function(){var i=new Image();var e=false;i.onload=function(){e=true};i.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAYAAADDPmHLAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAUdJREFUeNrs2sENwyAQRcE4ckf0RBv04Z7ck30wFXBi/4wU5bScXhQk9hhj9B+xzu/7WjijvZ/b/Jbz/e83kE0AAkAACAABIAAEgAAQAAJAAAgAAVDYfA5ui+eY33R+BuA9PXO++QtwB0AACAABIAAEgAAQAAJAAAgAASAAqrIPED5vH8A+AO4ACAABIAAEgAAQAAJAAAgAASAABEBJ9gHC5+0D2AfAHQABIAAEgAAQAAJAAAgAASAABIAAKMk+QPi8fQD7ALgDIAAEgAAQAAJAAAgAASAABIAAEAAl2QcIn7cPYB8AdwAEgAAQAAJAAAgAASAABIAAEAACoCT7AOHz9gHsA+AOgAAQAAJAAAgAASAABIAAEAACQACUZB8gfN4+gH0A3AEQAAJAAAgAASAABIAAEAACQABUNV8D++I5nmM3nX8EGADa0U/2xPbBVwAAAABJRU5ErkJggg==";function T(kC,kD){if(!kC._gridTexture){kC._gridTexture=kD.createTexture();kD.bindTexture(kD.TEXTURE_2D,kC._gridTexture);kD.texParameteri(kD.TEXTURE_2D,kD.TEXTURE_WRAP_S,kD.REPEAT);kD.texParameteri(kD.TEXTURE_2D,kD.TEXTURE_WRAP_T,kD.REPEAT);kD.texParameteri(kD.TEXTURE_2D,kD.TEXTURE_MIN_FILTER,kD.LINEAR_MIPMAP_LINEAR);kD.texParameteri(kD.TEXTURE_2D,kD.TEXTURE_MAG_FILTER,kD.LINEAR);kD.texImage2D(kD.TEXTURE_2D,0,kD.RGBA,kD.RGBA,kD.UNSIGNED_BYTE,i);kD.generateMipmap(kD.TEXTURE_2D)}else{kD.bindTexture(kD.TEXTURE_2D,kC._gridTexture)}}return function(kC,kE,kG,kF){if(!e){return}var kH=kC.gl;var kD=kC.programMgr.useProgram("grid");if(!kD.lastState.projMatrix){kH.uniformMatrix4fv(kD.uniforms.u_proj_matrix,false,kC.projMatrix);kD.lastState.projMatrix=true}kH.uniformMatrix4fv(kD.uniforms.u_mv_matrix,false,kE);kC._state.activeTexture(kH.TEXTURE0);T(kC,kH);if(kD.uniforms.lastSampler!==0){kH.uniform1i(kD.uniforms.u_image,0);kD.uniforms.lastSampler=0}if(kD.uniforms.lastTexScale!==kG){kH.uniform1f(kD.uniforms.u_tex_scale,kG);kD.uniforms.lastTexScale=kG}if(kF){kC.grid3857VAO.bind(kH,kD,kC.grid3857Buffer)}else{kC.gridVAO.bind(kH,kD,kC.gridBuffer)}kH.drawArrays(kH.TRIANGLE_STRIP,0,kC.gridBuffer.length)}})();var I=(function(){var kE={};function i(kG,kK,kJ,kF,kI){var kL=kG.gl;var kH=kG.programMgr.useProgram("overlayfill");kL.uniform4fv(kH.uniforms.u_color,kI);kF.vao1.bind(kL,kH,kF.vertex,kF.element1);if(!kH.lastState.projMatrix){kL.uniformMatrix4fv(kH.uniforms.u_proj_matrix,false,kG.projMatrix);kH.lastState.projMatrix=true}kL.uniformMatrix4fv(kH.uniforms.u_mv_matrix,false,kK);kL.drawElements(kL.TRIANGLES,kF.element1.length,kL.UNSIGNED_SHORT,0);if(window.global_lines){kL.uniform4fv(kH.uniforms.u_color,[1,0,0,1]);kL.drawElements(kL.LINE_STRIP,kJ[2].length,kL.UNSIGNED_SHORT,0)}}function e(kH,kK,kJ,kG,kF){var kL=kH.gl;var kI=kH.programMgr.useProgram("fill");kG.vao1.bind(kL,kI,kG.vertex,kG.element1);if(!kI.lastState.projMatrix){kL.uniformMatrix4fv(kI.uniforms.u_proj_matrix,false,kH.projMatrix);kI.lastState.projMatrix=true}if(kI.lastState.isFlat!==kH.isFlat){kL.uniform1i(kI.uniforms.u_flat,kH.isFlat);kI.lastState.isFlat=kH.isFlat}if(kI.lastState.drawPart!==kF){kL.uniform1i(kI.uniforms.u_draw_part,kF);kI.lastState.drawPart=kF}var kM=kH._camera._far||4000;if(kI.lastState.cameraFar!==kM){kL.uniform1f(kI.uniforms.u_camera_far,kM);kI.lastState.cameraFar=kM}kL.uniform1i(kI.uniforms.u_pattern,false);kL.uniformMatrix4fv(kI.uniforms.u_mv_matrix,false,kK);kL.drawElements(kL.TRIANGLES,kG.element1.length,kL.UNSIGNED_SHORT,0)}function kD(kR,kL,kN,kI,kS,kG){var kM=kR.gl;var kH=kN.texture;if(!kR._dashLineTextures){kR._dashLineTextures={}}var kO=kR._dashLineTextures;if(!kO[kH]){kO[kH]={status:"init"};var kK=new Image();kK.crossOrigin="anonymous";kK.onload=function(){kO[kH]=d5.utils.createTexture(kM,this,{flipY:true,wrap:kM.REPEAT,mipmap:false,unpackAlpha:true});kO[kH].size=[this.width,this.height];kO[kH].status="done";kR._map.fire(new fW("onrefresh"))};kK.src=decodeURIComponent(decodeURIComponent(kH))}if(kO[kH].status!=="done"){return}var kJ=kR.programMgr.useProgram("fill");kI.vao1.bind(kM,kJ,kI.vertex,kI.element1);if(!kJ.lastState.projMatrix){kM.uniformMatrix4fv(kJ.uniforms.u_proj_matrix,false,kR.projMatrix);kJ.lastState.projMatrix=true}if(kJ.lastState.isFlat!==kR.isFlat){kM.uniform1i(kJ.uniforms.u_flat,kR.isFlat);kJ.lastState.isFlat=kR.isFlat}if(kJ.lastState.drawPart!==kS){kM.uniform1i(kJ.uniforms.u_draw_part,kS);kJ.lastState.drawPart=kS}var kQ=kR._camera._far||4000;if(kJ.lastState.cameraFar!==kQ){kM.uniform1f(kJ.uniforms.u_camera_far,kQ);kJ.lastState.cameraFar=kQ}kM.uniform1i(kJ.uniforms.u_pattern,true);var kP=kR._mapTextureScale||1;kM.uniform1f(kJ.uniforms.u_scale,kP);kR._state.activeTexture(kM.TEXTURE5);kM.bindTexture(kM.TEXTURE_2D,kO[kH]);if(kJ.uniforms.lastSampler!==5){kM.uniform1i(kJ.uniforms.u_image,5);kJ.uniforms.lastSampler=5}var kF=Math.floor(kR._map.getZoom());if(!kG._fill_tex){kG._fill_tex={}}if(!kG._fill_tex[kF]){kG._fill_tex[kF]=mat4.clone(kL)}kM.uniformMatrix4fv(kJ.uniforms.u_mv_matrix_tex,false,kG._fill_tex[kF]);kM.uniformMatrix4fv(kJ.uniforms.u_mv_matrix,false,kL);kM.drawElements(kM.TRIANGLES,kI.element1.length,kM.UNSIGNED_SHORT,0)}var T=true;return function kC(kK,kJ,kI,kG,kM,kO){kO=kO||{};if(!kM){var kL=kO.drawPart||0;if(kK._fillTexture===false){T=false}if(kI.texture&&T){kD(kK,kJ.mvMatrix,kI,kG,kL,kJ.tileInfo)}else{e(kK,kJ.mvMatrix,kI,kG,kL)}return}var kH=kK.gl;var kN=kK._state;if(kO.usePolygonStencil&&kO.drawPolygonPass===1){kF=[1,1,1,255];if(!kO.clipRefer){kH.clear(kH.STENCIL_BUFFER_BIT);kH.stencilFunc(kH.NEVER,0,255);kN.stencilOp(kH.INVERT,kH.INVERT,kH.INVERT)}else{kH.stencilFunc(kH.LEQUAL,kO.clipRefer,255);kN.stencilOp(kH.KEEP,kH.INCR,kH.INCR)}kH.stencilMask(255);kN.colorMask(false,false,false,false);i(kK,kJ.mvMatrix,kI,kG,kF);return}if(kO.usePolygonStencil&&kO.drawPolygonPass===2){if(!kO.clipRefer){kH.stencilFunc(kH.EQUAL,255,255);kN.stencilOp(kH.KEEP,kH.KEEP,kH.KEEP);kH.stencilMask(0)}else{kH.stencilFunc(kH.EQUAL,kO.clipRefer+1,255);kN.stencilOp(kH.KEEP,kH.KEEP,kH.KEEP)}kN.colorMask(true,true,true,true)}var kF=kE[kI[0]];if(!kF){kF=kI[0].split(",");kF=[kF[0]/255,kF[1]/255,kF[2]/255,parseFloat(kF[3])];kE[kI[0]]=kF}i(kK,kJ.mvMatrix,kI,kG,kF);if(kO.usePolygonStencil&&!kO.clipRefer){kH.clear(kH.STENCIL_BUFFER_BIT);kH.stencilMask(255);kH.stencilFunc(kH.ALWAYS,1,255)}else{if(kO.usePolygonStencil&&kO.clipRefer){kH.stencilFunc(kH.LEQUAL,kO.clipRefer,255);kN.stencilOp(kH.KEEP,kH.REPLACE,kH.REPLACE);kN.colorMask(false,false,false,false);i(kK,kJ.mvMatrix,kI,kG,kF);kN.stencilOp(kH.KEEP,kH.KEEP,kH.KEEP);kH.stencilFunc(kH.EQUAL,kO.clipRefer,255);kN.colorMask(true,true,true,true)}}}})();var fE=(function(){var e=true;function T(kL,kE,kH,kO,kM,kN){if(kE.element1&&kE.element1.length===0){return}var kK=kH.mvMatrix;var kD=kH.tileOverlay;var kG=kL.gl;var kF=kL.programMgr.useProgram("line");if(!kF.lastState.projMatrix){kG.uniformMatrix4fv(kF.uniforms.u_proj_matrix,false,kL.projMatrix);kF.lastState.projMatrix=true}kG.uniformMatrix4fv(kF.uniforms.u_mv_matrix,false,kK);var kC;if(kO&&!kD){kC=kL.polyZoomRatio}else{if(kO){kC=kL.tileGrid3857Scale}else{kC=kL.tileScale}}if(kF.lastState.scale!==kC){kG.uniform1f(kF.uniforms.u_scale,kC);kF.lastState.scale=kC}var kI=kN?false:kL.isFlat;if(kF.lastState.isFlat!==kI){kG.uniform1i(kF.uniforms.u_flat,kI);kF.lastState.isFlat=kI}if(kM===undefined){kM=0}if(kF.lastState.drawPart!==kM){kG.uniform1i(kF.uniforms.u_draw_part,kM);kF.lastState.drawPart=kM}var kJ=kL._camera._far||4000;if(kF.lastState.cameraFar!==kJ){kG.uniform1f(kF.uniforms.u_camera_far,kJ);kF.lastState.cameraFar=kJ}kE.vao1.bind(kG,kF,kE.vertex,kE.element1);kG.drawElements(kG.TRIANGLES,kE.element1.length,kG.UNSIGNED_SHORT,0)}function i(kZ,k1,k2,kR,kS,kV,kT,kY,kK){var kU=kZ.gl;var kJ=kZ.programMgr.useProgram("dash");var kQ=k2.texture;var kE=e?k2.hue:null;if(!kZ._dashLineTextures){kZ._dashLineTextures={}}var kN;var kG=kU.REPEAT;var kW;if(kV&&k2.overlay){kW=k2.overlay}if(kQ instanceof HTMLCanvasElement||(window.ImageBitmap&&kQ instanceof window.ImageBitmap)){if(!k2.glTexture){if(kW&&kW._config.textureRepeat===false){kG=kU.CLAMP_TO_EDGE}k2.glTexture=d5.utils.createTexture(kU,kQ,{flipY:false,wrap:kG,mipmap:true,unpackAlpha:true})}kN=k2.glTexture}else{var kD=kZ._dashLineTextures;if(!kD[kQ]){kD[kQ]={status:"init"};var k3=new Image();k3.crossOrigin="anonymous";if(kW&&kW._config.textureRepeat===false){kG=kU.CLAMP_TO_EDGE}k3.onload=function(){kD[kQ].texture=d5.utils.createTexture(kU,this,{flipY:false,wrap:kG,mipmap:true,unpackAlpha:true});kD[kQ].status="done";kZ._map.fire(new fW("onrefresh"))};if(!kV){k3.src=E.getIconSetPath(kZ._map.config.style)+kQ}else{k3.src=kQ}}if(kD[kQ].status!=="done"){return}kN=kD[kQ].texture}if(!kJ.lastState.projMatrix){kU.uniformMatrix4fv(kJ.uniforms.u_proj_matrix,false,kZ.projMatrix);kJ.lastState.projMatrix=true}var kM=kY?false:kZ.isFlat;if(kJ.lastState.isFlat!==kM){kU.uniform1i(kJ.uniforms.u_flat,kM);kJ.lastState.isFlat=kM}kU.uniformMatrix4fv(kJ.uniforms.u_mv_matrix,false,kS);kZ._state.activeTexture(kU.TEXTURE6);kU.bindTexture(kU.TEXTURE_2D,kN);if(kJ.uniforms.lastSampler!==6){kU.uniform1i(kJ.uniforms.u_image,6);kJ.uniforms.lastSampler=6}var kH=k2.textureSize;var kC=k2.lineWidth;var kI=k2.isSingle?true:false;var k0;if(kI){k0=1}else{var kX;kZ._state.blendFunc(kU.ONE,kU.ONE_MINUS_SRC_ALPHA);if((!k2.zoomWithMap&&!kV)||kV){k0=kZ.tileScale;var kO=1;if(/ditie/.test(kQ)){kO=1}if(/shengjie/.test(kQ)){kO=1.2;if(kK<=7){kO=0.8}}if(kV){k0=kZ.polyZoomRatio;kX=kW._totalDashLen;var kP=18;if(!k2.zoomWithMap){kP=kZ._map.getZoom()}if(kJ.lastState.stepZoom!==kP){kU.uniform1f(kJ.uniforms.u_step_zoom,kP);kJ.lastState.stepZoom=kP}}else{k0=kZ.tileScale;kX=kH[1]*kO/kZ.tileScaleFromStart;if(kJ.lastState.stepZoom!==kZ.stepZoom){kU.uniform1f(kJ.uniforms.u_step_zoom,kZ.stepZoom);kJ.lastState.stepZoom=kZ.stepZoom}}}else{k0=0.5;kX=kH[1]/kH[0]*kC/2;if(kJ.lastState.stepZoom!==k1.tileInfo.useZoom){kU.uniform1f(kJ.uniforms.u_step_zoom,k1.tileInfo.useZoom);kJ.lastState.stepZoom=k1.tileInfo.useZoom}}if(kJ.lastState.dash!==kX){kU.uniform1f(kJ.uniforms.u_dash,kX);kJ.lastState.dash=kX}if(!kV){if(kJ.lastState.tileZoom!==k1.tileInfo.useZoom){kU.uniform1f(kJ.uniforms.u_tile_zoom,k1.tileInfo.useZoom);kJ.lastState.tileZoom=k1.tileInfo.useZoom}}else{if(kJ.lastState.tileZoom!==18){kU.uniform1f(kJ.uniforms.u_tile_zoom,18);kJ.lastState.tileZoom=18}}}if(k1.tileOverlay){k0=kZ.tileGrid3857Scale}if(kJ.lastState.scale!==k0){kU.uniform1f(kJ.uniforms.u_scale,k0);kJ.lastState.scale=k0}if(kJ.lastState.isSingle!==kI){kU.uniform1f(kJ.uniforms.u_is_single,kI);kJ.lastState.isSingle=kI}if(kJ.lastState.drawPart!==kT){kU.uniform1i(kJ.uniforms.u_draw_part,kT);kJ.lastState.drawPart=kT}var kF=1;if(kV&&k2.overlay&&k2.overlay._config.strokeTexture){kF=k2.overlay._config.strokeOpacity}if(kJ.lastState.alpha!==kF){kU.uniform1f(kJ.uniforms.u_alpha,kF);kJ.lastState.alpha=kF}if(kJ.lastState.hue!==kE){if(kE&&kE[3]!==0){kU.uniform1i(kJ.uniforms.u_hue,true);kU.uniform4fv(kJ.uniforms.u_hue_color,kE)}else{kU.uniform1i(kJ.uniforms.u_hue,false)}kJ.lastState.hue=kE}var kL=kZ._camera._far||4000;if(kJ.lastState.cameraFar!==kL){kU.uniform1f(kJ.uniforms.u_camera_far,kL);kJ.lastState.cameraFar=kL}kR.vao1.bind(kU,kJ,kR.vertex,kR.element1);kU.drawElements(kU.TRIANGLES,kR.element1.length,kU.UNSIGNED_SHORT,0);if(!kI){kZ._state.blendFunc(kU.SRC_ALPHA,kU.ONE_MINUS_SRC_ALPHA,kU.ONE,kU.ONE_MINUS_SRC_ALPHA)}}return function(kI,kG,kF,kC,kK,kN){if(!kC){return}if(kI._fillTexture===false){e=false}if(kK){for(var kD=0;kD<kC.length;kD++){var kL=kC[kD].__index;if(kL>=0&&kF[kL].texture){i(kI,kG,kF[kL],kC[kD],kG.mvMatrix,true)}else{if(kC[kD].hasMultipleParts){var kE=kI.gl;var kM=kI._state;kE.clear(kE.STENCIL_BUFFER_BIT);kE.stencilFunc(kE.NEVER,0,255);kM.stencilOp(kE.INVERT,kE.INVERT,kE.INVERT);kE.stencilMask(255);kM.colorMask(false,false,false,false);T(kI,kC[kD],kG,true);kE.stencilFunc(kE.EQUAL,255,255);kE.stencilMask(0);kM.stencilOp(kE.KEEP,kE.KEEP,kE.KEEP);kM.colorMask(true,true,true,true);T(kI,kC[kD],kG,true);kE.clear(kE.STENCIL_BUFFER_BIT);kE.stencilMask(255);kE.stencilFunc(kE.ALWAYS,1,255)}else{T(kI,kC[kD],kG,true)}}}}else{kN=kN||{};var kH=kN.drawPart||0;var kJ=kN.force3D||false;if(kF.texture){i(kI,kG,kF,kC,kG.mvMatrix,false,kH,kJ,kG.tileInfo.zoom)}else{T(kI,kC,kG,false,kH,kJ)}}}})();var aY=(function(){var T=mat4.create();var e=vec3.create();function i(kM,kI,kD,kL,kJ,kH,kK,kP,kC,kG,kO,kN){var kF=kM.gl;var kE=kM.programMgr.useProgram("guide");kP=kP||0;kG=kG||0;if(!kE.lastState.projMatrix){kF.uniformMatrix4fv(kE.uniforms.uPMatrix,false,kK);kF.uniform2fv(kE.uniforms.uMapHalfSize,kC);kE.lastState.projMatrix=true}kF.uniformMatrix4fv(kE.uniforms.uMVMatrix,false,kL);kF.uniform1f(kE.uniforms.uCameraFar,kM._camera._farLabel);if(typeof kN!=="number"){kN=7}kM._state.activeTexture(kF.TEXTURE0+kN);kF.bindTexture(kF.TEXTURE_2D,kJ);if(kE.uniforms.lastSamper!==kN){kF.uniform1i(kE.uniforms.uSampler,kN);kE.uniforms.lastSamper=kN}kF.uniform1i(kE.uniforms.uForRenderPNG8Text,kH);kF.uniform1i(kE.uniforms.uUseRound,kP);if(kE.lastState.isFlat!==kM.isFlat){kF.uniform1i(kE.uniforms.u_flat,kM.isFlat);kE.lastState.isFlat=kM.isFlat}if(kE.uniforms.lastMapZoom!==kG){kF.uniform1f(kE.uniforms.uMapZoom,kG);kE.uniforms.lastMapZoom=kG}kD.bind(kF,kE,kI);kF.drawArrays(kF.TRIANGLES,0,kI.length)}return function(kL,kG,kD,kK,kI,kF,kJ,kO,kC,kE,kN,kM,kH){i(kL,kG,kD,kK,kI,kF,kJ,kO,kC,kE,kN,kM,kH)}})();var jY=(function(){var kC=mat4.create();var T=vec3.create();var i=true;function e(kT,kS,kW,kP,kL,kE,kV,kG,kD,kN,kM,kJ,kO,kQ,kF,kI){var kR=kT.gl;if(kT._fillTexture===false){i=false}var kK=kT.programMgr.useProgram("symbol");kG=kG||0;kD=kD||0;kM=kM||0;kQ=kQ||kC;kR.uniformMatrix4fv(kK.uniforms.uOrthoPMatrix,false,kQ);if(!kK.lastState.projMatrix){kR.uniformMatrix4fv(kK.uniforms.uPMatrix,false,kV);kR.uniform2fv(kK.uniforms.uMapHalfSize,kN);kK.lastState.projMatrix=true}kR.uniformMatrix4fv(kK.uniforms.uMVMatrix,false,kP);kR.uniform3fv(kK.uniforms.uCameraPosHigh,kJ);kR.uniform3fv(kK.uniforms.uCameraPosLow,kO);kR.uniform1f(kK.uniforms.uCameraFar,kT._camera._farLabel);if(kI){var kU=kT._map;var kH=i5(h5.WORLD_SIZE_MC);kR.uniform3fv(kK.uniforms.uFixPositionInfo,[1,kH[0],kH[1]])}else{kR.uniform3fv(kK.uniforms.uFixPositionInfo,T)}if(typeof kF!=="number"){kF=7}kT._state.activeTexture(kR.TEXTURE0+kF);kR.bindTexture(kR.TEXTURE_2D,kL);if(kK.uniforms.lastSamper!==kF){kR.uniform1i(kK.uniforms.uSampler,kF);kK.uniforms.lastSamper=kF}kR.uniform1i(kK.uniforms.uHighlight,kG);kR.uniform1i(kK.uniforms.uForRenderPNG8Text,kE);kR.uniform1i(kK.uniforms.uUseRound,kD);kR.uniform1i(kK.uniforms.uHue,i);if(kK.uniforms.lastMapZoom!==kM){kR.uniform1f(kK.uniforms.uMapZoom,kM);kK.uniforms.lastMapZoom=kM}kW.bind(kR,kK,kS);kR.drawArrays(kR.TRIANGLES,0,kS.length)}return function(kP,kJ,kE,kO,kL,kI,kN,kF,kS,kD,kH,kM,kG,kQ,kR,kK){e(kP,kJ,kE,kO,kL,kI,kN,kF,kS,kD,kH,kM,kG,kQ,kR,kK)}})();var jh=(function(){var T=mat4.create();var e=vec3.create();function i(kM,kI,kD,kL,kJ,kH,kK,kP,kC,kG,kO,kN){var kF=kM.gl;var kE=kM.programMgr.useProgram("symbolline");kP=kP||0;kG=kG||0;if(!kE.lastState.projMatrix){kF.uniformMatrix4fv(kE.uniforms.uPMatrix,false,kK);kF.uniform2fv(kE.uniforms.uMapHalfSize,kC);kE.lastState.projMatrix=true}kF.uniformMatrix4fv(kE.uniforms.uMVMatrix,false,kL);kF.uniform1f(kE.uniforms.uCameraFar,kM._camera._farLabel);if(typeof kN!=="number"){kN=7}kM._state.activeTexture(kF.TEXTURE0+kN);kF.bindTexture(kF.TEXTURE_2D,kJ);if(kE.uniforms.lastSamper!==kN){kF.uniform1i(kE.uniforms.uSampler,kN);kE.uniforms.lastSamper=kN}kF.uniform1i(kE.uniforms.uForRenderPNG8Text,kH);kF.uniform1i(kE.uniforms.uUseRound,kP);if(kE.lastState.isFlat!==kM.isFlat){kF.uniform1i(kE.uniforms.u_flat,kM.isFlat);kE.lastState.isFlat=kM.isFlat}if(kE.uniforms.lastMapZoom!==kG){kF.uniform1f(kE.uniforms.uMapZoom,kG);kE.uniforms.lastMapZoom=kG}kD.bind(kF,kE,kI);kF.drawArrays(kF.TRIANGLES,0,kI.length)}return function(kL,kG,kD,kK,kI,kF,kJ,kO,kC,kE,kN,kM,kH){i(kL,kG,kD,kK,kI,kF,kJ,kO,kC,kE,kN,kM,kH)}})();var h2=(function(){function e(kN,kK,kP,kI,kO,kH){var kF=kH.texture;var kQ=kH._texture;var kM=kH.attach;var kD=kM.renderPNG8||false;var i=kM.opacity;var kJ=kN.gl;var kC=kN.programMgr.useProgram("raster");if(kQ){var kL={fShader:kM.fomularC};kC=kN.programMgr.useProgram("rasterpixel",kL);if(kC.lastState.fHashcode!==kM.fHashcode){kN.programMgr.removeProgram("rasterpixel");kC=kN.programMgr.useProgram("rasterpixel",kL);kC.lastState.fHashcode=kM.fHashcode}}kJ.uniform1i(kC.uniforms.uRenderPNG8,kD);kJ.uniformMatrix4fv(kC.uniforms.uPMatrix,false,kO);kJ.uniformMatrix4fv(kC.uniforms.uMVMatrix,false,kI);kN._state.activeTexture(kJ.TEXTURE7);kJ.bindTexture(kJ.TEXTURE_2D,kF);kJ.uniform1i(kC.uniforms.uSampler,7);kJ.uniform1f(kC.uniforms.u_opacity,i);kP.bind(kJ,kC,kK);if(kQ){kN._state.activeTexture(kJ.TEXTURE6);kJ.bindTexture(kJ.TEXTURE_2D,kQ);kJ.uniform1i(kC.uniforms.u_ColorMap,6);if(kM.textureMask&&kM.maskBox){kN._state.activeTexture(kJ.TEXTURE5);kJ.bindTexture(kJ.TEXTURE_2D,kM.textureMask);kJ.uniform1i(kC.uniforms.u_Mask,5);kJ.uniform1i(kC.uniforms.u_maskLoaded,1)}else{kJ.uniform1i(kC.uniforms.u_maskLoaded,0)}var kE=kM.maskData;kJ.uniform1f(kC.uniforms.u_maskData,kE);var kR=kM.domain;kJ.uniform2f(kC.uniforms.u_domain,kR[0],kR[1]);var kG=kM.clamp;kJ.uniform2f(kC.uniforms.u_clamp,kG[0],kG[1]);var T=kM.noData;kJ.uniform1f(kC.uniforms.u_noData,T);var i=kM.opacity;kJ.uniform1f(kC.uniforms.u_opacity,i)}kJ.drawArrays(kJ.TRIANGLES,0,kK.length)}return function(i,kE,kC,T,kD,kF){e(i,kE,kC,T,kD,kF)}})();var cW=(function(){var i=new Image();var e=false;i.onload=function(){e=true};i.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJ5JREFUeNrsllEKgCAMhp14rsqT1X08Q6VdbDmYLxGUoO5lg72J+9i/3wmIaCTDGuFQAAVQANfyshCCSkBx5pwlAZackUEmSQkIJH2BjJiBAnK8gQBtwzy9I1cidWTLeUm5wHNHduqIlXagEyhMDlmLBNDyR8QvIf4pPNIFkZ3gn8V7SxB52tOwZVRTuCeArzkM+i1XAAVQAGmAW4ABAOOjKXrLR4xWAAAAAElFTkSuQmCC";function T(kD,kC){if(!kC._arrowTexture){kC._arrowTexture=d5.utils.createTexture(kD,i,{wrap:kD.REPEAT})}else{kD.bindTexture(kD.TEXTURE_2D,kC._arrowTexture)}}return function(kI,kH,kG,kD,kK,kL){if(!e){return}var kJ=kL.drawPart||0;var kF=kI.gl;var kE=kI.programMgr.useProgram("arrow");if(!kE.lastState.projMatrix){kF.uniformMatrix4fv(kE.uniforms.u_proj_matrix,false,kI.projMatrix);kE.lastState.projMatrix=true}if(kE.lastState.drawPart!==kJ){kF.uniform1i(kE.uniforms.u_draw_part,kJ);kE.lastState.drawPart=kJ}if(kE.lastState.isFlat!==kI.isFlat){kF.uniform1i(kE.uniforms.u_flat,kI.isFlat);kE.lastState.isFlat=kI.isFlat}kF.uniformMatrix4fv(kE.uniforms.u_mv_matrix,false,kH.mvMatrix);var kC=kI.tileScale;if(kI.mapZoom>=19){kC*=1.8}else{kC*=1.2}if(kE.lastState.scale!==kC){kF.uniform1f(kE.uniforms.u_scale,kC);kE.lastState.scale=kC}kI._state.activeTexture(kF.TEXTURE4);T(kF,kI);if(!kE.uniforms.lastSampler){kF.uniform1i(kE.uniforms.u_image,4);kE.uniforms.lastSampler=true}kD.vao1.bind(kF,kE,kD.vertex,kD.element1);kF.drawElements(kF.TRIANGLES,kD.element1.length,kF.UNSIGNED_SHORT,0)}})();var jK=(function(){return function(e,kC,T,kF,kE){var kG=e.gl;var i=e.programMgr.useProgram("sky");kG.depthMask(false);kG.uniformMatrix4fv(i.uniforms.uPMatrix,false,e.projMatrix2D);kG.uniformMatrix4fv(i.uniforms.uMVMatrix,false,kC);kG.uniform4fv(i.uniforms.uGroundColor,kE[0]);kG.uniform4fv(i.uniforms.uSkyColor,kE[1]||kE[0]);var kD=kF-T;if(e._map._projectionMatrix3D==="ortho"){kD=kF/2+T}kD=kD<0?Math.abs(kD):kD;kG.uniform1f(i.uniforms.uHorizonY,kD);e.skyVAO.bind(kG,i,e.skyBuffer);kG.drawArrays(kG.TRIANGLES,0,e.skyBuffer.length);kG.depthMask(true)}})();function gq(kG,kC){var T=kG.gl;var i=kG.programMgr.useProgram("debug");T.uniform4fv(i.uniforms.u_color,[1,0,0,1]);T.uniform1f(i.uniforms.u_opacity,1);T.uniformMatrix4fv(i.uniforms.u_proj_matrix,false,kG.projMatrix);T.uniformMatrix4fv(i.uniforms.u_mv_matrix,false,kC.mvMatrix);kG.debugVAO.bind(T,i,kG.debugBuffer);T.drawArrays(T.LINE_STRIP,0,kG.debugBuffer.length);kG.debugVAO.unbind(T);var kF=mat4.create();kF=mat4.scale(kF,kF,[1,-1,1]);kF=mat4.multiply(kF,kC.mvMatrix,kF);T.uniformMatrix4fv(i.uniforms.u_mv_matrix,false,kF);var e=kC.tileInfo;var kI=kC.tileInfo.col+"-"+kC.tileInfo.row+"-"+kC.tileInfo.zoom;var kD=j5(kI,10,-10,0.5);var kE=new B(new Float32Array(kD),{alignment:1,components:2,members:[{name:"a_pos",components:2,offset:0,type:"Float32"}]},B.BufferType.VERTEX);var kH=new dY();kH.bind(T,i,kE);T.drawArrays(T.LINES,0,kE.length)}var bt=(function(){function kD(kL,kJ,kK,kI,kE,kG,kF){var kH=kL.createTexture();kL.bindTexture(kL.TEXTURE_2D,kH);kL.pixelStorei(kL.UNPACK_FLIP_Y_WEBGL,true);kL.texImage2D(kL.TEXTURE_2D,0,kK||kL.RGBA,kK||kL.RGBA,kL.UNSIGNED_BYTE,kJ);kL.texParameteri(kL.TEXTURE_2D,kL.TEXTURE_MAG_FILTER,kI||kL.LINEAR);kL.texParameteri(kL.TEXTURE_2D,kL.TEXTURE_MIN_FILTER,kE||kL.LINEAR);kL.texParameteri(kL.TEXTURE_2D,kL.TEXTURE_WRAP_S,kG||kL.CLAMP_TO_EDGE);kL.texParameteri(kL.TEXTURE_2D,kL.TEXTURE_WRAP_T,kF||kL.CLAMP_TO_EDGE);kL.bindTexture(kL.TEXTURE_2D,null);return kH}function T(kF,kH){var kE=new Image();kE.onload=function(){kF._smaaInfo.areaTexture=kD(kH,this,kH.RGB,kH.LINEAR,kH.LINEAR,null,null);if(kF._smaaInfo.areaTexture&&kF._smaaInfo.searchTexture){kF._smaaInfo.glDrawSMAAReady=true}};kE.src=i();var kG=new Image();kG.onload=function(){kF._smaaInfo.searchTexture=kD(kH,this,null,kH.NEAREST,kH.NEAREST,null,null);if(kF._smaaInfo.areaTexture&&kF._smaaInfo.searchTexture){kF._smaaInfo.glDrawSMAAReady=true}};kG.src=e()}function kC(kE,kF){if(!kE._smaaInfo.textureBeginToLoad){T(kE,kF);kE._smaaInfo.textureBeginToLoad=true}}return{init:function(kE){kE._smaaInfo={areaTexture:null,searchTexture:null,textureBeginToLoad:false,glDrawSMAAReady:false}},loadTexture:kC,draw:function(kH,kG,kJ,kF,kK,kE){var kL=kH.gl;if(kH._smaaInfo.glDrawSMAAReady===false){return}kH._state.disableCap("blend");kL.bindFramebuffer(kL.FRAMEBUFFER,kF[1].framebuffer);var kI=kH.programMgr.useProgram("smaa1");kG.vao1.bind(kL,kI,kG.vertex);kL.uniform2fv(kI.uniforms.resolution,[1/kK,1/kE]);kL.uniformMatrix4fv(kI.uniforms.projectionMatrix,false,kH.projMatrix2D);kL.uniformMatrix4fv(kI.uniforms.modelViewMatrix,false,kJ);kH._state.activeTexture(kL.TEXTURE1);kL.bindTexture(kL.TEXTURE_2D,kF[0].texture);kL.uniform1i(kI.uniforms.tDiffuse,1);kL.drawArrays(kL.TRIANGLES,0,kG.vertex.length);kL.bindFramebuffer(kL.FRAMEBUFFER,null);kL.bindFramebuffer(kL.FRAMEBUFFER,kF[2].framebuffer);kI=kH.programMgr.useProgram("smaa2");kG.vao2.bind(kL,kI,kG.vertex);kL.uniform2fv(kI.uniforms.resolution,[1/kK,1/kE]);kL.uniformMatrix4fv(kI.uniforms.projectionMatrix,false,kH.projMatrix2D);kL.uniformMatrix4fv(kI.uniforms.modelViewMatrix,false,kJ);kH._state.activeTexture(kL.TEXTURE1);kL.bindTexture(kL.TEXTURE_2D,kF[1].texture);kL.uniform1i(kI.uniforms.tDiffuse,1);kH._state.activeTexture(kL.TEXTURE2);kL.bindTexture(kL.TEXTURE_2D,kH._smaaInfo.areaTexture);kL.uniform1i(kI.uniforms.tArea,2);kH._state.activeTexture(kL.TEXTURE3);kL.bindTexture(kL.TEXTURE_2D,kH._smaaInfo.searchTexture);kL.uniform1i(kI.uniforms.tSearch,3);kL.drawArrays(kL.TRIANGLES,0,kG.vertex.length);kL.bindFramebuffer(kL.FRAMEBUFFER,null);kI=kH.programMgr.useProgram("smaa3");kG.vao3.bind(kL,kI,kG.vertex);kL.uniform2fv(kI.uniforms.resolution,[1/kK,1/kE]);kL.uniformMatrix4fv(kI.uniforms.projectionMatrix,false,kH.projMatrix2D);kL.uniformMatrix4fv(kI.uniforms.modelViewMatrix,false,kJ);kH._state.activeTexture(kL.TEXTURE1);kL.bindTexture(kL.TEXTURE_2D,kF[2].texture);kL.uniform1i(kI.uniforms.tDiffuse,1);kH._state.activeTexture(kL.TEXTURE2);kL.bindTexture(kL.TEXTURE_2D,kF[0].texture);kL.uniform1i(kI.uniforms.tColor,2);kL.drawArrays(kL.TRIANGLES,0,kG.vertex.length);kH._state.enableCap("blend")}};function i(){return"data:image/png;base64,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"}function e(){return"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEIAAAAhCAIAAADiVupLAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAFZJREFUeNrs00EKgAAIRNEZ739mTQoiwmhRi4L/FiKiu9ERISkzbXdTVV3H4WhfOG6ehl1rNR7qDSF8hwkVcJXt+3A//I0Nv0GoCBUAAAAAAMA/LAIMAB+Dcg2OE2zsAAAAAElFTkSuQmCC"}})();var kf=(function(){return function(kC,T,kF,i,kE,e){var kG=kC.gl;kC._state.disableCap("blend");var kD=kC.programMgr.useProgram("light");T.vao1.bind(kG,kD,T.vertex);kG.uniformMatrix4fv(kD.uniforms.projectionMatrix,false,kC.projMatrix2D);kG.uniformMatrix4fv(kD.uniforms.modelViewMatrix,false,kF);kC._state.activeTexture(kG.TEXTURE1);kG.bindTexture(kG.TEXTURE_2D,i[0].texture);kG.uniform1i(kD.uniforms.tDiffuse,1);kG.uniform1f(kD.uniforms.uHue,kE);kG.uniform1i(kD.uniforms.uGray,e);kG.drawArrays(kG.TRIANGLES,0,T.vertex.length);kC._state.enableCap("blend")}})();var dp=(function(){function e(T,kD,i){var kE=T.gl;var kC=T.programMgr.useProgram("overlayblock");i.vao1.bind(kE,kC,i.vertex,i.element1);if(!kC.lastState.projMatrix){kE.uniformMatrix4fv(kC.uniforms.u_proj_matrix,false,T.projMatrix);kC.lastState.projMatrix=true}var kF=T._camera._far||4000;if(kC.lastState.cameraFar!==kF){kE.uniform1f(kC.uniforms.u_camera_far,kF);kC.lastState.cameraFar=kF}kE.uniformMatrix4fv(kC.uniforms.u_mv_matrix,false,kD);kE.uniformMatrix4fv(kC.uniforms.u_normal_matrix,false,T.normalMatrix);kE.drawElements(kE.TRIANGLES,i.element1.length,kE.UNSIGNED_SHORT,0)}return function(T,kD,i,kC){kC=kC||{};e(T,kD.mvMatrix,i)}})();var kq=(function(){function e(T,kD,kF,kH,i,kE){if(i.length<=0){return}var kG=T.gl;var kC=T.programMgr.useProgram("marker3d");i.vao.bind(kG,kC,i.vertex);if(!kC.lastState.projMatrix){kG.uniformMatrix4fv(kC.uniforms.u_proj_matrix,false,T.projMatrix);kC.lastState.projMatrix=true}kG.uniform1i(kC.uniforms.u_use_texture,!!i.texture);if(i.texture){T._state.activeTexture(kG.TEXTURE7);kG.bindTexture(kG.TEXTURE_2D,i.texture);if(kC.uniforms.lastSamper!==7){kG.uniform1i(kC.uniforms.u_Sampler,7);kC.uniforms.lastSamper=7}}kG.uniform3fv(kC.uniforms.u_camera_pos_high,kF);kG.uniform3fv(kC.uniforms.u_camera_pos_low,kH);kG.uniform3fv(kC.uniforms.u_camera_pos_low,kH);kG.uniformMatrix4fv(kC.uniforms.u_mv_matrix,false,kD);kG.drawArrays(kG.POINTS,0,i.vertex.length)}return function(T,kD,kE,kF,i,kC){kC=kC||{};e(T,kD.mvMatrix,kE,kF,i,kC)}})();var fd=(function(){function e(kN,kH,kK,kF,kM,kL,kC){var kI=kN.gl;var kG=kN.programMgr.useProgram("groundoverlay");if(kL){var kE=kK.overlay;var T={fShader:kE._config.fomularC};kG=kN.programMgr.useProgram("groundpixeloverlay",T);if(kG.lastState.fHashcode!==kE.fHashcode){kN.programMgr.removeProgram("groundpixeloverlay");kG=kN.programMgr.useProgram("groundpixeloverlay",T);kG.lastState.fHashcode=kE.fHashcode}}if(kG.lastState.opacity!==kK.opacity){kI.uniform1f(kG.uniforms.u_opacity,kK.opacity);kG.lastState.opacity=kK.opacity}if(kK.overlay&&kK.overlay._config&&kK.overlay._config.sysType==="fixed"){if(!kG.lastState.projMatrix2D){kI.uniformMatrix4fv(kG.uniforms.u_proj_matrix,false,kN.projMatrix2D);kG.lastState.projMatrix2D=true;kG.lastState.projMatrix=false}}else{if(!kG.lastState.projMatrix){kI.uniformMatrix4fv(kG.uniforms.u_proj_matrix,false,kN.projMatrix);kG.lastState.projMatrix=true;kG.lastState.projMatrix2D=false}}kF.vao1.bind(kI,kG,kF.vertex,kF.element1);kN._state.activeTexture(kI.TEXTURE0);kI.bindTexture(kI.TEXTURE_2D,kM);kI.uniform1i(kG.uniforms.u_Sampler,0);if(kL){kN._state.activeTexture(kI.TEXTURE1);kI.bindTexture(kI.TEXTURE_2D,kL);kI.uniform1i(kG.uniforms.u_ColorMap,1);if(kC){kN._state.activeTexture(kI.TEXTURE2);kI.bindTexture(kI.TEXTURE_2D,kC);kI.uniform1i(kG.uniforms.u_Mask,2);kI.uniform1i(kG.uniforms.u_maskLoaded,1)}else{kI.uniform1i(kG.uniforms.u_maskLoaded,0)}var kD=kK.overlay._config.domain;kI.uniform2f(kG.uniforms.u_domain,kD[0],kD[1]);var kJ=kK.overlay._config.clamp;kI.uniform2f(kG.uniforms.u_clamp,kJ[0],kJ[1]);var kP=kK.overlay._config.maskData;kI.uniform1f(kG.uniforms.u_maskData,kP);var kO=kK.overlay._config.noData;kI.uniform1f(kG.uniforms.u_noData,kO)}kI.uniformMatrix4fv(kG.uniforms.u_mv_matrix,false,kH);kI.drawElements(kI.TRIANGLES,kF.element1.length,kI.UNSIGNED_SHORT,0)}return function i(kC,kH,kF,T,kG,kE,kI,kD){kD=kD||{};e(kC,kH.mvMatrix,kF,T,kG,kE,kI)}})();var hf=(function(){function T(kG,kL,kF){kL=(typeof kL==="number")?kL:24;kF=kF||"æªè·å¾ç¾åº¦å°å¾åç¨ææ";var kH=document.createElement("canvas");var kK=256;var kE=256;kH.style="width: 256px;height: 256px;";kH.width=kK*2;kH.height=kE*2;var kJ=kH.getContext("2d");kJ.scale(2,2);kJ.clearRect(0,0,kK,kE);kJ.translate(kK/2,kE/2);kJ.rotate(-Math.PI/4);kJ.textAlign="center";var kI="rgba(255, 0, 0, 1)";kJ.fillStyle=kI;kJ.font=kL+"px Arial";kJ.fillText(kF,0,0);return kH}function kD(){var kE=new Float32Array([-1,-1,0,0,1,-1,1,0,-1,1,0,1,1,1,1,1]);var kF={vao:new dY(),buffer:new B(kE,{components:4,members:[{name:"a_pos",components:2,offset:0,type:"Float32"},{name:"a_tex",components:2,offset:8,type:"Float32"}]},B.BufferType.VERTEX)};return kF}function kC(kE,kG,kF){if(!kE._watermarkTexture){kE._watermarkTexture=kG.createTexture();kG.pixelStorei(kG.UNPACK_FLIP_Y_WEBGL,true);kG.bindTexture(kG.TEXTURE_2D,kE._watermarkTexture);kG.texParameteri(kG.TEXTURE_2D,kG.TEXTURE_WRAP_S,kG.REPEAT);kG.texParameteri(kG.TEXTURE_2D,kG.TEXTURE_WRAP_T,kG.REPEAT);kG.texParameteri(kG.TEXTURE_2D,kG.TEXTURE_MIN_FILTER,kG.LINEAR_MIPMAP_LINEAR);kG.texParameteri(kG.TEXTURE_2D,kG.TEXTURE_MAG_FILTER,kG.LINEAR);kG.texImage2D(kG.TEXTURE_2D,0,kG.RGBA,kG.RGBA,kG.UNSIGNED_BYTE,kF);kG.generateMipmap(kG.TEXTURE_2D)}else{kG.bindTexture(kG.TEXTURE_2D,kE._watermarkTexture)}}var i;var e=false;return function(kE,kG){if(kE._watermark){e=true}if(!e){return}if(kG===undefined){i=T(kE.background);kE._watermarkTexture=null;return}else{if(!i){i=T(kE.background)}}if(!kE.wartermarkVerObj){kE.wartermarkVerObj=kD()}var kH=kE.gl;var kF=kE.programMgr.useProgram("watermark");kE._state.activeTexture(kH.TEXTURE6);kC(kE,kH,i);if(kF.uniforms.lastSampler!==6){kH.uniform1i(kF.uniforms.u_image,6);kF.uniforms.lastSampler=6}if(kF.uniforms.lastTexScale!==kG){kH.uniform2fv(kF.uniforms.u_tex_scale,kG);kF.uniforms.lastTexScale=kG}kE.wartermarkVerObj.vao.bind(kH,kF,kE.wartermarkVerObj.buffer);kH.drawArrays(kH.TRIANGLE_STRIP,0,kE.wartermarkVerObj.buffer.length)}})();function jT(kH,kM,lO){var lg=new kH.Int8Array(lO);var lf=new kH.Int16Array(lO);var le=new kH.Int32Array(lO);var ld=new kH.Uint8Array(lO);var lb=new kH.Uint16Array(lO);var k9=new kH.Uint32Array(lO);var k8=new kH.Float32Array(lO);var k7=new kH.Float64Array(lO);var k5=kM.DYNAMICTOP_PTR|0;var k4=kM.tempDoublePtr|0;var k3=kM.ABORT|0;var k2=kM.STACKTOP|0;var k1=kM.STACK_MAX|0;var kZ=kM.gb|0;var kY=kM.fb|0;var kX=0;var kW=0;var kV=0;var kU=0;var kT=kH.NaN,kS=kH.Infinity;var kR=0,kQ=0,kP=0,kO=0,kN=0;var lL=0;var lK=kH.Math.floor;var lJ=kH.Math.abs;var lI=kH.Math.sqrt;var lG=kH.Math.pow;var lF=kH.Math.cos;var lE=kH.Math.sin;var lD=kH.Math.tan;var lC=kH.Math.acos;var lA=kH.Math.asin;var lz=kH.Math.atan;var ly=kH.Math.atan2;var lx=kH.Math.exp;var lw=kH.Math.log;var lv=kH.Math.ceil;var lt=kH.Math.imul;var ls=kH.Math.min;var lr=kH.Math.max;var lq=kH.Math.clz32;var lp=kM.abort;var lo=kM.assert;var ln=kM.enlargeMemory;var lm=kM.getTotalMemory;var ll=kM.abortOnCannotGrowMemory;var lk=kM.setTempRet0;var lj=kM.getTempRet0;var li=0;function lT(i){i=i|0;var e=0;e=k2;k2=k2+i|0;k2=k2+15&-16;return e|0}function lP(){return k2|0}function lu(e){e=e|0;k2=e}function k0(i,e){i=i|0;e=e|0;k2=i;k1=e}function kI(i,e){i=i|0;e=e|0;if(!kX){kX=i;kW=e}}function kD(){return kZ+1892368|0}function lW(){return kZ+1990672|0}function lQ(){return kZ+0|0}function lB(){return kZ+4374544|0}function k6(){return kZ+1998864|0}function kJ(){return kZ+1998864+(le[kZ+32768>>2]<<1)|0}function kE(){return kZ+2523152|0}function lY(){return kZ+2523152+((le[kZ+32772>>2]|0)*20|0)|0}function lS(){return le[kZ+32772>>2]|0}function lH(){le[kZ+32768>>2]=0;le[kZ+32772>>2]=0;return}function lc(){return kZ+32776|0}function kK(){return kZ+3833872|0}function kF(){le[kZ+40968>>2]=0;le[kZ+40972>>2]=0;return}function lZ(){return kZ+3842064|0}function lU(){return kZ+3842064+(le[kZ+40968>>2]<<1)|0}function lM(){return kZ+40976|0}function lh(){return kZ+40976+((le[kZ+40972>>2]|0)*28|0)|0}function kL(){return le[kZ+40972>>2]|0}function kG(){return kZ+1875984|0}function kC(T,i){T=T|0;i=i|0;var l2=0,l1=0,l0=0,la=0;l1=(i|0)>0;if(l1){l2=0;do{l0=kZ+1875984+(l2<<2)|0;k8[l0>>2]=+k8[l0>>2]/100;l2=l2+1|0}while((l2|0)!=(i|0))}if((i|0)>=(T|0)|l1^1){return}else{l2=i}do{l1=0;do{la=l1+l2|0;l0=kZ+1875984+(la<<2)|0;k8[l0>>2]=+k8[kZ+1875984+(la-i<<2)>>2]+ +k8[l0>>2]/100;l1=l1+1|0}while((l1|0)!=(i|0));l2=l2+i|0}while((l2|0)<(T|0));return}function lV(mr,mq,mp,mo,mn,mm,ml,mk,mj,mi,mh,mg,me){mr=mr|0;mq=mq|0;mp=mp|0;mo=mo|0;mn=mn|0;mm=+mm;ml=ml|0;mk=mk|0;mj=mj|0;mi=mi|0;mh=mh|0;mg=mg|0;me=me|0;var mc=0,ma=0,l9=0,l7=0,l5=0,l3=0,l1=0,la=0,T=0,mf=0,md=0,mb=0,l8=0,l6=0,l4=0,l2=0,l0=0;l6=(mr|0)/2|0;l4=mh<<24>>24==1;if(l4){lf[kZ+4366352>>1]=0;if((mi|0)>2){mc=0;ma=2;do{l0=+(le[kZ+0+(ma<<2)>>2]|0);l2=+(le[kZ+0+((ma|1)<<2)>>2]|0);mc=(~~(+lI(+(l0*l0+l2*l2))/10)<<16>>16)+(mc<<16>>16)|0;lf[kZ+4366352+(((ma|0)/2|0)<<1)>>1]=mc;ma=ma+2|0}while((ma|0)<(mi|0));mc=4}}else{mc=4}if((mc|0)==4?(mi|0)>2:0){mc=2;ma=le[kZ+0>>2]|0;do{mb=kZ+0+(mc<<2)|0;ma=(le[mb>>2]|0)+ma|0;le[mb>>2]=ma;mb=mc|1;l8=kZ+0+(mb<<2)|0;le[l8>>2]=(le[l8>>2]|0)+(le[kZ+0+(mb+-2<<2)>>2]|0);mc=mc+2|0}while((mc|0)<(mi|0))}if(mj<<24>>24){lf[kZ+1892368>>1]=lf[kZ+1892368+8>>1]|0;lf[kZ+1892368+2>>1]=lf[kZ+1892368+10>>1]|0;lf[kZ+1892368+4>>1]=lf[kZ+1892368+12>>1]|0;lf[kZ+1892368+6>>1]=lf[kZ+1892368+14>>1]|0;l8=l6<<1;lf[kZ+1892368+(l8+-2<<1)>>1]=lf[kZ+1892368+(l8+-6<<1)>>1]|0;lf[kZ+1892368+(l8+-1<<1)>>1]=lf[kZ+1892368+(l8+-5<<1)>>1]|0;lf[kZ+1892368+(l8+-4<<1)>>1]=lf[kZ+1892368+(l8+-8<<1)>>1]|0;lf[kZ+1892368+(l8+-3<<1)>>1]=lf[kZ+1892368+(l8+-7<<1)>>1]|0}mb=me-mg|0;l8=le[kZ+32772>>2]|0;if((mr|0)<=1){lN(mb,l8);return}mf=(ml|0)==0;md=l6+-2|0;l3=mh<<24>>24==2;l1=l6+-1|0;la=l6+-4|0;T=mg+1|0;l5=me+-1|0;l9=0;mc=0;l7=l8;do{if((l9|0)>=4){if((la|0)>(l9|0)){mi=T+((l9+-4|0)/5|0)|0}else{mi=l5}}else{mi=mg}if(!mf){mc=lf[kZ+1990672+(mi<<1)>>1]|0}mr=mi<<1;me=((le[kZ+0+(mr<<2)>>2]|0)/10|0)&65535;mr=((le[kZ+0+((mr|1)<<2)>>2]|0)/10|0)&65535;mh=l9<<1;ml=~~(+(lf[kZ+1892368+(mh<<1)>>1]|0)*mm/10);mh=~~(+(lf[kZ+1892368+((mh|1)<<1)>>1]|0)*mm/10);lg:do{if(!((l9|0)==0|(l9|0)==(md|0))){if((l9|0)==1|(l9|0)==(l1|0)){mj=-1}else{ma=l9+-2|0;switch((ma|0)%5|0|2|0){case 2:mj=1;break lg;case 3:mj=-1;break lg;default:mj=lg[((ma|0)/5|0)+(kZ+4374544)>>0]|0;break lg}}}else{mj=1}}while(0);if(l4){ma=lf[kZ+4366352+(mi<<1)>>1]|0}else{ma=l3?((mi|0)==0?0:10):0}mi=l7;l7=l7+1|0;lf[kZ+2523152+(mi*20|0)>>1]=me;lf[kZ+2523152+(mi*20|0)+2>>1]=mr;lf[kZ+2523152+(mi*20|0)+4>>1]=ml;lf[kZ+2523152+(mi*20|0)+6>>1]=mh;lg[kZ+2523152+(mi*20|0)+8>>0]=mq;lg[kZ+2523152+(mi*20|0)+9>>0]=mp;lg[kZ+2523152+(mi*20|0)+10>>0]=mo;lg[kZ+2523152+(mi*20|0)+11>>0]=mn;lf[kZ+2523152+(mi*20|0)+12>>1]=mj;lf[kZ+2523152+(mi*20|0)+14>>1]=mc;lf[kZ+2523152+(mi*20|0)+16>>1]=mk;lf[kZ+2523152+(mi*20|0)+18>>1]=ma;l9=l9+1|0}while((l9|0)<(l6|0));le[kZ+32772>>2]=l7;lN(mb,l8);return}function lN(mb,ma){mb=mb|0;ma=ma|0;var l9=0,l8=0,l7=0,l6=0,l5=0,l4=0,l3=0,l2=0,l1=0,l0=0,la=0,T=0;l2=mb+-1|0;l3=mb+-2|0;l4=0;l9=1;l8=1;l5=le[kZ+32768>>2]|0;while(1){mb=l9+1|0;l0=mb+ma|0;mb=(mb&1|0)==0;l6=l8<<24>>24!=0;la=l0+-2|0;l1=l9+ma|0;l7=l6?la:l1;la=l6?l1:la;lf[kZ+1998864+(l5<<1)>>1]=mb?l7:la;lf[kZ+1998864+(l5+1<<1)>>1]=mb?la:l7;lf[kZ+1998864+(l5+2<<1)>>1]=l0;l0=l9+2|0;l7=l0+ma|0;l0=(l0&1|0)==0;la=l7+-1|0;mb=l6?l1:la;l1=l6?la:l1;lf[kZ+1998864+(l5+3<<1)>>1]=l0?mb:l1;lf[kZ+1998864+(l5+4<<1)>>1]=l0?l1:mb;mb=l5+6|0;lf[kZ+1998864+(l5+5<<1)>>1]=l7;if((l4|0)>=(l2|0)){break}l0=l9+3|0;l7=l0+ma|0;l0=(l0&1|0)==0;l1=l7+-2|0;T=l7+-1|0;la=l6?l1:T;l1=l6?T:l1;lf[kZ+1998864+(mb<<1)>>1]=l0?la:l1;lf[kZ+1998864+(l5+7<<1)>>1]=l0?l1:la;lf[kZ+1998864+(l5+8<<1)>>1]=l7;l7=l9+4|0;la=l7+ma|0;l1=(l7&1|0)==0;l0=la+-2|0;T=la+-1|0;mb=l6?l0:T;l0=l6?T:l0;lf[kZ+1998864+(l5+9<<1)>>1]=l1?mb:l0;lf[kZ+1998864+(l5+10<<1)>>1]=l1?l0:mb;mb=l5+12|0;lf[kZ+1998864+(l5+11<<1)>>1]=la;if((l4|0)==(l3|0)){l9=l7}else{l9=l9+5|0;T=l9+ma|0;l1=(l9&1|0)==0;l0=T+-2|0;l7=T+-1|0;la=l6?l0:l7;l0=l6?l7:l0;lf[kZ+1998864+(mb<<1)>>1]=l1?la:l0;lf[kZ+1998864+(l5+13<<1)>>1]=l1?l0:la;lf[kZ+1998864+(l5+14<<1)>>1]=T;l8=l8<<24>>24==0&1;mb=l5+15|0}l4=l4+1|0;l5=mb}le[kZ+32768>>2]=mb;return}function lX(mq,mp,mo,mn,mm,ml,mk,mj,mi,mh,mf,md){mq=mq|0;mp=mp|0;mo=+mo;mn=mn|0;mm=mm|0;ml=ml|0;mk=mk|0;mj=mj|0;mi=mi|0;mh=mh|0;mf=mf|0;md=md|0;var mb=0,l9=0,l7=0,l5=0,l3=0,l1=0,la=0,e=0,mg=0,me=0,mc=0,ma=0,l8=0,l6=0,l4=0,l2=0,l0=0,T=0;if((mq|0)>2){mb=2;l9=le[kZ+32776>>2]|0;do{l1=kZ+32776+(mb<<2)|0;l9=(le[l1>>2]|0)+l9|0;le[l1>>2]=l9;l1=mb|1;la=kZ+32776+(l1<<2)|0;le[la>>2]=(le[la>>2]|0)+(le[kZ+32776+(l1+-2<<2)>>2]|0);mb=mb+2|0}while((mb|0)<(mq|0))}l3=le[kZ+40972>>2]|0;l1=(mq|0)>0;if(l1){l9=l3+((mq+-1|0)>>>1)|0;mb=0;l7=l3;while(1){e=+(le[kZ+32776+((mb|1)<<2)>>2]|0)/100;k8[kZ+40976+(l7*28|0)>>2]=+(le[kZ+32776+(mb<<2)>>2]|0)/100;k8[kZ+40976+(l7*28|0)+4>>2]=e;k8[kZ+40976+(l7*28|0)+8>>2]=mo;k8[kZ+40976+(l7*28|0)+12>>2]=0;k8[kZ+40976+(l7*28|0)+16>>2]=0;k8[kZ+40976+(l7*28|0)+20>>2]=1;lg[kZ+40976+(l7*28|0)+24>>0]=mm;lg[kZ+40976+(l7*28|0)+25>>0]=ml;lg[kZ+40976+(l7*28|0)+26>>0]=mk;lg[kZ+40976+(l7*28|0)+27>>0]=mj;mb=mb+2|0;if((mb|0)>=(mq|0)){break}else{l7=l7+1|0}}mb=l9+1|0;le[kZ+40972>>2]=mb}else{mb=l3}if((mp|0)>0){l5=le[kZ+40968>>2]|0;l9=0;l7=l5;while(1){lf[kZ+3842064+(l7<<1)>>1]=(lb[kZ+3833872+(l9<<1)>>1]|0)+l3;l9=l9+1|0;if((l9|0)==(mp|0)){break}else{l7=l7+1|0}}le[kZ+40968>>2]=l5+mp}if(!l1){return}la=mq+-2|0;l5=(mn|0)==0;mj=l5?md:mj;mn=l5?mf:mk;mp=l5?mh:ml;l5=l5?mi:mm;l9=le[kZ+40968>>2]|0;l1=(mq+-1|0)>>>1;l3=mb+(l1<<2)|0;l1=l9+(l1*6|0)|0;l7=0;while(1){l4=+(le[kZ+32776+(l7<<2)>>2]|0)/100;l6=+(le[kZ+32776+((l7|1)<<2)>>2]|0)/100;mm=l7;l7=l7+2|0;mg=(mm|0)==(la|0);l8=+(le[kZ+32776+((mg?0:l7)<<2)>>2]|0)/100;ma=+(le[kZ+32776+((mg?1:mm+3|0)<<2)>>2]|0)/100;l0=l8-l4;e=ma-l6;l2=l4-l4;T=l6-l6;mc=e*mo-T*0;me=l2*0-l0*mo;e=T*l0-l2*e;mm=mb+1|0;k8[kZ+40976+(mb*28|0)>>2]=l4;k8[kZ+40976+(mb*28|0)+4>>2]=l6;k8[kZ+40976+(mb*28|0)+8>>2]=0;k8[kZ+40976+(mb*28|0)+12>>2]=mc;k8[kZ+40976+(mb*28|0)+16>>2]=me;k8[kZ+40976+(mb*28|0)+20>>2]=e;lg[kZ+40976+(mb*28|0)+24>>0]=mi;lg[kZ+40976+(mb*28|0)+25>>0]=mh;lg[kZ+40976+(mb*28|0)+26>>0]=mf;lg[kZ+40976+(mb*28|0)+27>>0]=md;mg=mb+2|0;k8[kZ+40976+(mm*28|0)>>2]=l4;k8[kZ+40976+(mm*28|0)+4>>2]=l6;k8[kZ+40976+(mm*28|0)+8>>2]=mo;k8[kZ+40976+(mm*28|0)+12>>2]=mc;k8[kZ+40976+(mm*28|0)+16>>2]=me;k8[kZ+40976+(mm*28|0)+20>>2]=e;lg[kZ+40976+(mm*28|0)+24>>0]=l5;lg[kZ+40976+(mm*28|0)+25>>0]=mp;lg[kZ+40976+(mm*28|0)+26>>0]=mn;lg[kZ+40976+(mm*28|0)+27>>0]=mj;ml=mb+3|0;k8[kZ+40976+(mg*28|0)>>2]=l8;k8[kZ+40976+(mg*28|0)+4>>2]=ma;k8[kZ+40976+(mg*28|0)+8>>2]=0;k8[kZ+40976+(mg*28|0)+12>>2]=mc;k8[kZ+40976+(mg*28|0)+16>>2]=me;k8[kZ+40976+(mg*28|0)+20>>2]=e;lg[kZ+40976+(mg*28|0)+24>>0]=mi;lg[kZ+40976+(mg*28|0)+25>>0]=mh;lg[kZ+40976+(mg*28|0)+26>>0]=mf;lg[kZ+40976+(mg*28|0)+27>>0]=md;k8[kZ+40976+(ml*28|0)>>2]=l8;k8[kZ+40976+(ml*28|0)+4>>2]=ma;k8[kZ+40976+(ml*28|0)+8>>2]=mo;k8[kZ+40976+(ml*28|0)+12>>2]=mc;k8[kZ+40976+(ml*28|0)+16>>2]=me;k8[kZ+40976+(ml*28|0)+20>>2]=e;lg[kZ+40976+(ml*28|0)+24>>0]=l5;lg[kZ+40976+(ml*28|0)+25>>0]=mp;lg[kZ+40976+(ml*28|0)+26>>0]=mn;lg[kZ+40976+(ml*28|0)+27>>0]=mj;mk=mb&65535;lf[kZ+3842064+(l9<<1)>>1]=mk;lf[kZ+3842064+(l9+1<<1)>>1]=mg;ml=ml&65535;lf[kZ+3842064+(l9+2<<1)>>1]=ml;lf[kZ+3842064+(l9+3<<1)>>1]=mk;lf[kZ+3842064+(l9+4<<1)>>1]=ml;lf[kZ+3842064+(l9+5<<1)>>1]=mm;if((l7|0)>=(mq|0)){break}else{mb=mb+4|0;l9=l9+6|0}}le[kZ+40972>>2]=l3+4;le[kZ+40968>>2]=l1+6;return}function lR(){}return{_reset_line:lH,_get_block_index_start:lZ,setThrew:kI,_get_line_turnings_address:lB,_get_block_triangle_indices_address:kK,_get_line_vertex_count:lS,stackAlloc:lT,_get_block_vertex_count:kL,_get_block_vertex_start:lM,_get_line_vertex_end:lY,_get_feature_points_address:kG,stackRestore:lu,_get_block_index_end:lU,_get_line_altitudes_address:lW,_get_block_vertex_end:lh,stackSave:lP,runPostSets:lR,_get_line_vertex_start:kE,_parse_points:kC,_get_line_points_address:lQ,establishStackSpace:k0,_get_line_index_end:kJ,_append_line_data:lV,_get_line_index_start:k6,_append_block_data:lX,_get_block_points_address:lc,_reset_block:kF,_get_line_data_address:kD}}var eu;var kk;var jj;var bc;var gN;var dQ;var ai;var fR;var hh;var f6;var dM;var cd;var ij;var jW;var cF;var aP;var fz;var gr;if(!ArrayBuffer.prototype.slice){ArrayBuffer.prototype.slice=function(T,i){if(T===undefined){T=0}if(i===undefined){i=this.byteLength}T=Math.floor(T);i=Math.floor(i);if(T<0){T+=this.byteLength}if(i<0){i+=this.byteLength}T=Math.min(Math.max(0,T),this.byteLength);i=Math.min(Math.max(0,i),this.byteLength);if(i-T<=0){return new ArrayBuffer(0)}var e=new ArrayBuffer(i-T);var kD=new Uint8Array(e);var kC=new Uint8Array(this,T,i-T);kD.set(kC);return e}}function gU(i){var e=70;if(eu){i&&i();return}eu=new ArrayBuffer(e*65536);jj=new Float32Array(eu);bc=new Int32Array(eu);kk=new Int8Array(eu);gN=new Int16Array(eu);dQ=new Uint16Array(eu);ai=self.createWasmModule(self,{DYNAMICTOP_PTR:0,tempDoublePtr:0,ABORT:0,STACKTOP:0,STACK_MAX:0,gb:0,fb:0},eu);i&&i()}function dN(e){if(!fR){fR=ai._get_line_data_address()>>1}gN.set(e,fR)}function bw(e){if(!hh){hh=ai._get_line_altitudes_address()>>1}gN.set(e,hh)}function hn(e){if(!f6){f6=ai._get_line_points_address()>>2}bc.set(e,f6)}function bX(e){if(!dM){dM=ai._get_line_turnings_address()}kk.set(e,dM)}function c6(e){if(!jW){jW=ai._get_block_points_address()>>2}bc.set(e,jW)}function aa(e){if(!cF){cF=ai._get_block_triangle_indices_address()>>1}dQ.set(e,cF)}var j8={parseFeature:function(i,T){var e=i.length;T=T||2;if(!gr){gr=ai._get_feature_points_address()>>2}jj.set(i,gr);ai._parse_points(e,T);return new Float32Array(eu.slice(gr<<2,(gr+e)<<2))},getBlockVertices:function(){if(!fz){fz=ai._get_block_vertex_start()}return new Float32Array(eu.slice(fz,ai._get_block_vertex_end()))},getBlockIndices:function(){if(!aP){aP=ai._get_block_index_start()}return new Uint16Array(eu.slice(aP,ai._get_block_index_end()))},getBlockVertexCount:function(){return ai._get_block_vertex_count()},getLineVertices:function(){if(!ij){ij=ai._get_line_vertex_start()}return new Float32Array(eu.slice(ij,ai._get_line_vertex_end()))},getLineIndices:function(){if(!cd){cd=ai._get_line_index_start()}return new Uint16Array(eu.slice(cd,ai._get_line_index_end()))},getLineVertexCount:function(){return ai._get_line_vertex_count()},appendLineData:function(kF,kE,kC,i,kI,e,kK,kG,kJ,T,kD){var kH=0;if(i){kH=i.length;bw(i)}if(kG&&kG.length){bX(kG)}kI=kI||0;T=T||0;kD=kD||kK.length/2;dN(kF);hn(kK);ai._append_line_data(kF.length,kE[0],kE[1],kE[2],kE[3],kC,kH,kI,e?1:0,kK.length,kJ,T,kD)},resetLine:function(){ai._reset_line()},appendBlockData:function(kK,kI,kF,kH,kE,kJ,e,T,kG,i,kC,kD){c6(kK);aa(kI);return ai._append_block_data(kK.length,kI.length,kF,kH,kE,kJ,e,T,kG,i,kC,kD)},resetBlock:function(){ai._reset_block()},initWasmModule:gU};var br={block:[["precision highp float;attribute vec4 a_pos;attribute vec4 a_normal;attribute vec4 a_color;uniform mat4 u_proj_matrix;uniform mat4 u_mv_matrix;uniform mat4 u_normal_matrix;uniform vec3 u_side_light_dir;uniform bool u_is_normal;varying vec4 _;varying float a;const vec3 b=vec3(0.06,0.06,0.06);vec3 c=vec3(0.1,0.1,0.1);void main(){vec4 d=u_proj_matrix*u_mv_matrix*a_pos;gl_Position=d;a=-1./500.-a_pos.z/100.;gl_Position.z=gl_Position.z+a;if(!u_is_normal){c=vec3(0.2,0.2,0.2);}if(u_is_normal&&a_normal==vec4(0.,0.,1.,1.)){_=a_color;}else{vec3 e=a_color.rgb;vec3 f=normalize(vec3(u_normal_matrix*a_normal));vec4 g=u_mv_matrix*vec4(0,1,0,0);vec3 h=normalize(g.xyz);float i=max(0.,dot(f,-h));vec4 j=u_mv_matrix*vec4(u_side_light_dir,0);vec3 k=normalize(j.xyz);float l=max(0.,dot(f,-k));if(a_pos.z<2.){float m=(2.-a_pos.z)/5.;l=l-m;}_=vec4(e+e*c*l+e*b*i,a_color.a);}}",""].join("\\n"),["precision highp float;varying vec4 _;varying float a;uniform float u_camera_far;float b=500.0;void main(){float c=(gl_FragCoord.z/gl_FragCoord.w-a);float d=_.a;if(c>u_camera_far-b){d=d*(u_camera_far-c)/b;if(d<=0.){discard;}}gl_FragColor=vec4(_.rgb,d);}",""].join("\\n")],shadow:[["precision highp float;attribute vec3 a_pos;uniform mat4 u_proj_matrix;uniform mat4 u_mv_matrix;uniform vec3 u_light_dir;varying vec4 _;varying float a;const vec4 b=vec4(153.0/255.0,157.0/255.0,170.0/255.0,.15);void main(){float c=u_light_dir.x/u_light_dir.z*a_pos.z;float d=u_light_dir.y/u_light_dir.z*a_pos.z;vec2 e=vec2(a_pos.x+c,a_pos.y+d);a=a_pos.z;gl_Position=u_proj_matrix*u_mv_matrix*vec4(e,0,1);_=b;}",""].join("\\n"),["precision highp float;varying vec4 _;varying float a;uniform float u_camera_far;float b=500.0;void main(){if(a<1.){discard;}else{float c=gl_FragCoord.z/gl_FragCoord.w;float d=_.a;if(c>u_camera_far-b){d=d*(u_camera_far-c)/b;if(d<=0.){discard;}}gl_FragColor=vec4(_.rgb,d);}}",""].join("\\n")],arrow:[["precision highp float;attribute vec3 a_pos;attribute vec2 a_diff;attribute vec2 a_normal;attribute vec2 a_tex;attribute float a_layer_index;varying vec2 _;varying float a;uniform mat4 u_proj_matrix;uniform mat4 u_mv_matrix;uniform float u_scale;uniform bool u_flat;void main(){float b=a_pos.z;vec2 c=(a_pos.xy+a_diff*u_scale)+normalize(a_normal)*2.5*u_scale;float d=-a_layer_index/500.-b/100.;if(u_flat){a=0.;gl_Position=u_proj_matrix*u_mv_matrix*vec4(c,0.,1);vec4 e=u_proj_matrix*u_mv_matrix*vec4(c,b/10.,1);gl_Position.z=e.z+d;}else{a=b;gl_Position=u_proj_matrix*u_mv_matrix*vec4(c,b,1);gl_Position.z=gl_Position.z+d;}_=a_tex;}",""].join("\\n"),["precision mediump float;uniform sampler2D u_image;uniform int u_draw_part;varying vec2 _;varying float a;void main(){if(u_draw_part==1){if(a>0.){discard;}}else if(u_draw_part==2){if(a==0.){discard;}}gl_FragColor=texture2D(u_image,_);}",""].join("\\n")],grid:[["precision highp float;attribute vec2 a_pos;attribute vec2 a_tex;uniform mat4 u_proj_matrix;uniform mat4 u_mv_matrix;uniform float u_tex_scale;varying vec2 _;void main(){vec4 a=u_proj_matrix*u_mv_matrix*vec4(a_pos,0,1);gl_Position=a;_=a_tex*u_tex_scale;}",""].join("\\n"),["precision mediump float;uniform sampler2D u_image;varying vec2 _;void main(){gl_FragColor=texture2D(u_image,_);}",""].join("\\n")],line:[["attribute vec2 a_pos;attribute vec2 a_normal;attribute vec4 a_color;attribute vec4 a_data;uniform mat4 u_mv_matrix;uniform mat4 u_proj_matrix;uniform float u_scale;uniform bool u_flat;varying float _;varying vec4 a;varying float b;varying float c;varying float d;const float e=0.5;void main(){vec2 f=a_normal/10.;_=a_data.x;float g=a_data.y/100.;float h=a_data.z;float i=length(f);vec2 j=a_pos/10.;if(i==0.){b=0.;}else{float k=1.+e/i;j=a_pos/10.+f*k*u_scale;b=1.-(2.*e/(i+e));}a=a_color;d=-h/500.-g/100.;if(u_flat){gl_Position=u_proj_matrix*u_mv_matrix*vec4(j,0.,1);vec4 k=u_proj_matrix*u_mv_matrix*vec4(j,g/10.,1);gl_Position.z=k.z+d;c=0.;}else{gl_Position=u_proj_matrix*u_mv_matrix*vec4(j,g,1.);gl_Position.z=gl_Position.z+d;c=g;}}",""].join("\\n"),["precision highp float;uniform int u_draw_part;varying float _;varying vec4 a;varying float b;varying float c;varying float d;uniform float u_camera_far;float e=500.0;void main(){if(u_draw_part==1){if(c>0.){discard;}}else if(u_draw_part==2){if(c==0.){discard;}}vec4 f;if(abs(_)>b){float g=1.-(abs(_)-b)/(1.-b);f=vec4(a.rgb,g*a.a);}else{f=a;}float g=(gl_FragCoord.z/gl_FragCoord.w-d);float h=f.a;if(g>u_camera_far-e){h=h*(u_camera_far-g)/e;if(h<=0.){discard;}}f.a=h;gl_FragColor=f;}",""].join("\\n")],dash:[["attribute vec2 a_pos;attribute vec2 a_normal;attribute vec4 a_color;attribute vec4 a_data;uniform mat4 u_mv_matrix;uniform mat4 u_proj_matrix;uniform float u_scale;uniform float u_dash;uniform float u_step_zoom;uniform float u_tile_zoom;uniform bool u_is_single;uniform bool u_flat;varying float _;varying vec2 a;varying vec4 b;varying float c;varying float d;varying float e;const float f=0.2;void main(){vec2 g=a_normal/10.;_=a_data.x;float h=a_data.y/100.;float i=a_data.z;float j=a_data.w/10.;float k=length(g);vec2 l=a_pos/10.;if(k==0.){c=0.;}else{float m=1.+f/k;l=a_pos/10.+g*m*u_scale;c=1.-(2.*f/(k+f));}b=vec4(a_color.rgb,floor(a_color.a/10.));float m=0.;if(u_is_single){m=j;}else{m=j/u_dash/pow(2.,u_tile_zoom-u_step_zoom);}if(_==1.){a=vec2(1.,m);}else{a=vec2(0.,m);}e=-i/500.-h/100.;if(u_flat){gl_Position=u_proj_matrix*u_mv_matrix*vec4(l,0.,1);vec4 n=u_proj_matrix*u_mv_matrix*vec4(l,h/10.,1);gl_Position.z=n.z+e;d=0.;}else{gl_Position=u_proj_matrix*u_mv_matrix*vec4(l,h,1.);gl_Position.z=gl_Position.z+e;d=h;}}",""].join("\\n"),["precision highp float;uniform sampler2D u_image;uniform float u_dash;uniform int u_draw_part;uniform float u_alpha;varying vec4 b;varying float _;varying vec2 a;varying float d;varying float e;varying float c;uniform bool u_hue;uniform vec4 u_hue_color;uniform float u_camera_far;float f=500.0;vec3 g(vec3 g){float h=g.r;float i=g.g;float j=g.b;float k=min(h,i);k=min(k,j);float l=max(h,i);l=max(l,j);float m=l-k;float n;float o;float p=(l+k)/2.;if(m==0.){n=0.;o=0.;}else{if(p<0.5){o=m/(l+k);}else{o=m/(2.-k-l);}float q=(((l-h)/6.)+(m/2.))/m;float r=(((l-i)/6.)+(m/2.))/m;float s=(((l-j)/6.)+(m/2.))/m;if(h==l){n=s-r;}else if(i==l){n=(1./3.)+q-s;}else if(j==l){n=(2./3.)+r-q;}if(n<0.){n+=1.;}if(n>1.){n-=1.;}}return vec3(n,o,p);}float h(float h,float i,float j){if(j<0.){j+=1.;}if(j>1.){j-=1.;}if(6.*j<1.){return(h+(i-h)*6.*j);}if(2.*j<1.){return(i);}if(3.*j<2.){return(h+(i-h)*6.*(2./3.-j));}return h;}vec3 i(vec3 i){float j=i.x;float k=i.y;float l=i.z;float m,_G,_B,v1,v2;if(k==0.){m=l;_G=l;_B=l;}else{if(l<0.5){v2=l*(1.+k);}else{v2=(l+k)-(k*l);}v1=2.*l-v2;m=h(v1,v2,j+1./3.);_G=h(v1,v2,j);_B=h(v1,v2,j-1./3.);}return vec3(m,_G,_B);}void main(){if(u_draw_part==1){if(d>0.){discard;}}else if(u_draw_part==2){if(d==0.){discard;}}vec4 j=texture2D(u_image,a);float k=j.a*u_alpha+b.a;vec4 l;if(abs(_)>c){float m=1.-(abs(_)-c)/(1.-c);l=vec4(j.rgb*m,m*k);}else{l=j*u_alpha;}if(u_hue){float m=g(vec3(u_hue_color.rgb/255.)).r;float n=(l.r*0.3+l.g*0.59+l.b*0.11);l.rgb=i(vec3(m,n,n));}float m=(gl_FragCoord.z/gl_FragCoord.w-e);float n=l.a;if(m>u_camera_far-f){n=n*(u_camera_far-m)/f;if(n<=0.){discard;}}l.a=n;gl_FragColor=l;}",""].join("\\n")],fill:[["precision highp float;attribute vec3 a_pos;attribute vec4 a_color;attribute float a_layer_index;uniform mat4 u_proj_matrix;uniform mat4 u_mv_matrix;uniform mat4 u_mv_matrix_tex;uniform bool u_flat;varying vec4 _;varying float a;varying float b;varying vec2 c;void main(){float d=a_pos.z;b=-a_layer_index/500.-d/100.;if(u_flat){gl_Position=u_proj_matrix*u_mv_matrix*vec4(a_pos.xy,0.,1);vec4 e=u_proj_matrix*u_mv_matrix*vec4(a_pos.xy,d/10.,1);gl_Position.z=e.z+b;a=0.;}else{gl_Position=u_proj_matrix*u_mv_matrix*vec4(a_pos.xy,d,1);gl_Position.z=gl_Position.z+b;a=d;}c=(u_mv_matrix_tex*vec4(a_pos.xy,0.,1)).xy;_=a_color;}",""].join("\\n"),["precision highp float;uniform int u_draw_part;varying vec4 _;varying float a;varying float b;uniform sampler2D u_image;uniform float u_camera_far;float d=500.0;varying vec2 c;uniform float u_tile_zoom;uniform float u_map_zoom;uniform float u_scale;uniform bool u_pattern;void main(){if(u_draw_part==1){if(a>0.){discard;}}else if(u_draw_part==2){if(a==0.){discard;}}float e=(gl_FragCoord.z/gl_FragCoord.w-b);float f=_.a/255.;if(e>u_camera_far-d){f=f*(u_camera_far-e)/d;if(f<=0.){discard;}}if(u_pattern){vec2 g=vec2(u_scale*256.);vec2 h=mod(mod(c,g)/g,1.);vec4 i=texture2D(u_image,h);gl_FragColor=vec4(i.rgb,f);return;}gl_FragColor=vec4(_.r/255.,_.g/255.,_.b/255.,f);}",""].join("\\n")],debug:[["precision highp float;attribute vec2 a_pos;uniform mat4 u_proj_matrix;uniform mat4 u_mv_matrix;void main(){gl_Position=u_proj_matrix*u_mv_matrix*vec4(a_pos,step(32767.,a_pos.x),1);}",""].join("\\n"),["precision mediump float;uniform vec4 u_color;void main(){gl_FragColor=u_color;}",""].join("\\n")],symbol:[["precision highp float;attribute vec4 aPosition;attribute float aZLevel;attribute vec2 aExtend;attribute vec2 aLoopOffset;attribute vec2 aVertexTextureCoord;attribute float aHue;varying vec2 _;varying vec2 a;varying vec3 b;varying float c;uniform bool uUseRound;uniform mat4 uMVMatrix;uniform mat4 uPMatrix;uniform mat4 uOrthoPMatrix;uniform vec2 uMapHalfSize;uniform float uMapZoom;uniform vec3 uCameraPosHigh;uniform vec3 uCameraPosLow;uniform vec3 uFixPositionInfo;void main(){vec4 d;vec3 e=vec3(aPosition.xy,aZLevel);vec3 f=vec3(aPosition.zw,aZLevel);a=vec2(1.,1.);c=aHue;e.x+=aLoopOffset.x;f.x+=aLoopOffset.y;vec4 g=uPMatrix*uMVMatrix*vec4((e-uCameraPosHigh)+(f-uCameraPosLow),1.);float h=g[3]+100.;if((g[0]<-h||g[0]>h||g[1]<-h||g[1]>h||g[2]<-h||g[2]>h)&&uFixPositionInfo[0]!=1.){a=vec2(0.,0.);}vec3 i=vec3(g[0]/g[3],g[1]/g[3],g[2]/g[3]);vec3 j=vec3((i[0]+1.)*uMapHalfSize[0],(1.-i[1])*uMapHalfSize[1],0.5*i[2]+0.5);if(uFixPositionInfo[0]==1.){float k=uMapHalfSize[0]*2.;if(j[0]>k+20.){e.x-=uFixPositionInfo[1];f.x-=uFixPositionInfo[2];g=uPMatrix*uMVMatrix*vec4((e-uCameraPosHigh)+(f-uCameraPosLow),1.);i=vec3(g[0]/g[3],g[1]/g[3],g[2]/g[3]);j=vec3((i[0]+1.)*uMapHalfSize[0],(1.-i[1])*uMapHalfSize[1],0.5*i[2]+0.5);}else if(j[0]<-20.){e.x+=uFixPositionInfo[1];f.x+=uFixPositionInfo[2];g=uPMatrix*uMVMatrix*vec4((e-uCameraPosHigh)+(f-uCameraPosLow),1.);i=vec3(g[0]/g[3],g[1]/g[3],g[2]/g[3]);j=vec3((i[0]+1.)*uMapHalfSize[0],(1.-i[1])*uMapHalfSize[1],0.5*i[2]+0.5);}}d=vec4(j.xy,-100.,1.);d.y=uMapHalfSize[1]*2.-d.y;if(uUseRound==true){d.x=floor(d.x+.5);d.y=floor(d.y+.5);}d.x+=aExtend.x;d.y+=aExtend.y;b=vec3(1.,j.z,1./g[3]);gl_Position=uOrthoPMatrix*d;_=vec2(aVertexTextureCoord.xy);}",""].join("\\n"),["precision highp float;uniform sampler2D uSampler;uniform bool uForRenderPNG8Text;uniform bool uHighlight;uniform bool uHue;uniform float uCameraFar;float d=500.0;varying vec2 _;varying vec2 a;varying vec3 b;varying float c;vec3 e(vec3 e){float f=e.r;float g=e.g;float h=e.b;float i=min(f,g);i=min(i,h);float j=max(f,g);j=max(j,h);float k=j-i;float l;float m;float n=(j+i)/2.;if(k==0.){l=0.;m=0.;}else{if(n<0.5){m=k/(j+i);}else{m=k/(2.-i-j);}float o=(((j-f)/6.)+(k/2.))/k;float p=(((j-g)/6.)+(k/2.))/k;float q=(((j-h)/6.)+(k/2.))/k;if(f==j){l=q-p;}else if(g==j){l=(1./3.)+o-q;}else if(h==j){l=(2./3.)+p-o;}if(l<0.){l+=1.;}if(l>1.){l-=1.;}}return vec3(l,m,n);}float f(float f,float g,float h){if(h<0.){h+=1.;}if(h>1.){h-=1.;}if(6.*h<1.){return(f+(g-f)*6.*h);}if(2.*h<1.){return(g);}if(3.*h<2.){return(f+(g-f)*6.*(2./3.-h));}return f;}vec3 g(vec3 g){float h=g.x;float i=g.y;float j=g.z;float k,_G,_B,v1,v2;if(i==0.){k=j;_G=j;_B=j;}else{if(j<0.5){v2=j*(1.+i);}else{v2=(j+i)-(i*j);}v1=2.*j-v2;k=f(v1,v2,h+1./3.);_G=f(v1,v2,h);_B=f(v1,v2,h-1./3.);}return vec3(k,_G,_B);}vec3 h(float h){float i=h+1.;float j=floor(i/65536.);i=i-j*65536.;float k=floor(i/256.);i=i-k*256.;float l=i;return vec3(l,k,j);}void main(){if(a[0]==0.){discard;return;}vec4 i=texture2D(uSampler,_);if(uForRenderPNG8Text==true&&i.a<0.7){i.a=0.;}if(uHighlight==true){float j=i.a;if(j!=0.){float k=i.r;float l=i.g;float m=i.b;float n=floor((k*255.+l*255.+m*255.)/3.+0.5);float o=n-90.;if(o<0.){o=0.;}i.r=(51.+o*1.3)/255.;i.g=(133.+o*0.8)/255.;i.b=1.;}}if(uHue&&c!=0.){vec3 j=h(c);float k=e(vec3(j/255.)).r;float l=(i.r*0.3+i.g*0.59+i.b*0.11);i.rgb=g(vec3(k,l,l));}float j=(b[1]/b[2]);float k=1.;if(j>uCameraFar-d){k=(uCameraFar-j)/d;if(k<=0.){discard;}}gl_FragColor=i*k;}",""].join("\\n")],symbolline:[["precision highp float;attribute vec2 aPosition;attribute float aZLevel;attribute vec2 aExtend;attribute vec2 aVertexTextureCoord;attribute vec2 aRotationCenter;attribute float aRotationAngle;varying vec2 _;varying vec2 a;uniform bool uUseRound;uniform mat4 uMVMatrix;uniform mat4 uPMatrix;uniform vec2 uMapHalfSize;uniform float uMapZoom;uniform bool uIsFlat;float b(float b){return pow(2.,18.-b);}void main(){vec4 c;float d=aZLevel;if(uIsFlat){d=0.;}a=vec2(1.,1.);float e=b(uMapZoom);vec2 f=aPosition.xy+aExtend.xy*e;float g=sin(radians(-aRotationAngle));float h=cos(radians(-aRotationAngle));mat2 i=mat2(h,-g,g,h);vec3 j=vec3(aRotationCenter.xy+i*(f.xy-aRotationCenter.xy),d);c=uMVMatrix*vec4(j,1.);gl_Position=uPMatrix*c;_=vec2(aVertexTextureCoord.xy);}",""].join("\\n"),["precision highp float;uniform sampler2D uSampler;uniform bool uForRenderPNG8Text;uniform float uCameraFar;float b=500.0;varying vec2 _;varying vec2 a;void main(){if(a[0]==0.){discard;return;}vec4 c=texture2D(uSampler,_);if(uForRenderPNG8Text==true&&c.a<0.7){c.a=0.;}float d;bool e=false;d=(gl_FragCoord.z/gl_FragCoord.w);float f=c.a;if(d>uCameraFar-b){f=f*(uCameraFar-d)/b;if(f<1.){discard;}}gl_FragColor=vec4(c.rgb,f);}",""].join("\\n")],raster:[["precision highp float;attribute vec3 aVertexPosition;attribute vec2 aVertexTextureCoord;varying vec2 _;uniform mat4 uMVMatrix;uniform mat4 uPMatrix;void main(){gl_Position=uPMatrix*uMVMatrix*vec4(aVertexPosition,1.);_=aVertexTextureCoord;}",""].join("\\n"),["precision highp float;uniform sampler2D uSampler;uniform bool uRenderPNG8;varying vec2 _;uniform float u_opacity;void main(){vec4 _=texture2D(uSampler,_);_.a*=u_opacity;if(uRenderPNG8==true){_.a=smoothstep(0.7,1.,_.a);}gl_FragColor=_;}",""].join("\\n")],rasterpixel:[["precision highp float;attribute vec3 aVertexPosition;attribute vec2 aVertexTextureCoord;attribute vec4 aVertexMaskCoord;varying vec2 _;varying vec4 a;uniform mat4 uMVMatrix;uniform mat4 uPMatrix;void main(){gl_Position=uPMatrix*uMVMatrix*vec4(aVertexPosition,1.);_=aVertexTextureCoord;a=aVertexMaskCoord;}",""].join("\\n"),["precision highp float;uniform sampler2D uSampler;varying vec2 _;varying vec4 a;uniform sampler2D u_ColorMap;uniform sampler2D u_Mask;uniform float u_maskData;uniform float u_noData;uniform float u_opacity;uniform vec2 u_domain;uniform vec2 u_clamp;uniform bool u_maskLoaded;void main(){vec4 _=texture2D(uSampler,vec2(_.s,_.t));vec4 a=a;vec4 b=texture2D(u_Mask,vec2(a.s,a.t));float c=generateValue(_);if(c!=u_noData&&c>=u_clamp.s&&c<=u_clamp.t){c=(c-u_domain.s)/(u_domain.t-u_domain.s);vec4 d=texture2D(u_ColorMap,vec2(c,0));d.a*=_.a*u_opacity;_=d;}else{_=vec4(0,0,0,0);}if(u_maskLoaded){if(a.s<0.||a.s>1.||a.t<0.||a.t>1.){b.a=0.;}_.a*=b.a;if(u_maskData>0.){float d=b.r*255.;_.a*=(step(u_maskData,d)-step(u_maskData+1.,d));}}if(_.a<0.001){discard;}gl_FragColor=_;}",""].join("\\n")],sky:[["precision highp float;attribute vec3 aPos;uniform mat4 uPMatrix;uniform mat4 uMVMatrix;uniform float uHorizonY;uniform vec4 uGroundColor;uniform vec4 uSkyColor;varying vec4 _;void main(){vec2 a=aPos.xy;a.y+=uHorizonY;vec4 b=uPMatrix*uMVMatrix*vec4(a.xy,-2900.,1.);b.z=-1.;gl_Position=b;float c=aPos.z;if(c==0.){_=uGroundColor;}else{_=uSkyColor;}}",""].join("\\n"),["precision highp float;varying vec4 _;void main(){gl_FragColor=_;}",""].join("\\n")],smaa1:[["precision highp float;attribute vec3 position;attribute vec2 uv;uniform mat4 projectionMatrix;uniform mat4 modelViewMatrix;uniform vec2 resolution;varying vec2 _;varying vec4 a[3];void b(vec2 b){a[0]=b.xyxy+resolution.xyxy*vec4(-1.,0.,0.,1.);a[1]=b.xyxy+resolution.xyxy*vec4(1.,0.,0.,-1.);a[2]=b.xyxy+resolution.xyxy*vec4(-2.,0.,0.,2.);}void main(){_=uv;b(_);gl_Position=projectionMatrix*modelViewMatrix*vec4(position,1.);}",""].join("\\n"),["precision highp float;","#define A 0.1","uniform sampler2D tDiffuse;varying vec2 _;varying vec4 a[3];vec4 b(vec2 _,vec4 a[3],sampler2D b){vec2 c=vec2(A,A);vec4 d;vec3 e=texture2D(b,_).rgb;vec3 f=texture2D(b,a[0].xy).rgb;vec3 g=abs(e-f);d.x=max(max(g.r,g.g),g.b);vec3 h=texture2D(b,a[0].zw).rgb;g=abs(e-h);d.y=max(max(g.r,g.g),g.b);vec2 i=step(c,d.xy);if(dot(i,vec2(1.,1.))==0.)discard;vec3 j=texture2D(b,a[1].xy).rgb;g=abs(e-j);d.z=max(max(g.r,g.g),g.b);vec3 k=texture2D(b,a[1].zw).rgb;g=abs(e-k);d.w=max(max(g.r,g.g),g.b);float l=max(max(max(d.x,d.y),d.z),d.w);vec3 m=texture2D(b,a[2].xy).rgb;g=abs(e-m);d.z=max(max(g.r,g.g),g.b);vec3 n=texture2D(b,a[2].zw).rgb;g=abs(e-n);d.w=max(max(g.r,g.g),g.b);l=max(max(l,d.z),d.w);i.xy*=step(0.5*l,d.xy);return vec4(i,0.,0.);}void main(){gl_FragColor=b(_,a,tDiffuse);}",""].join("\\n")],smaa2:[["precision highp float;","#define A 8","#define B 16","#define C (1.0/vec2(160.0,560.0))","#define D (1.0/7.0)","attribute vec3 position;attribute vec2 uv;uniform vec2 resolution;uniform mat4 projectionMatrix;uniform mat4 modelViewMatrix;varying vec2 _;varying vec4 a[3];varying vec2 b;void c(vec2 c){b=c/resolution;a[0]=c.xyxy+resolution.xyxy*vec4(-0.25,0.125,1.25,0.125);a[1]=c.xyxy+resolution.xyxy*vec4(-0.125,0.25,-0.125,-1.25);a[2]=vec4(a[0].xz,a[1].yw)+vec4(-2.,2.,-2.,2.)*resolution.xxyy*float(A);}void main(){_=uv;c(_);gl_Position=projectionMatrix*modelViewMatrix*vec4(position,1.);}",""].join("\\n"),["precision highp float;","#define A 8","#define B 16","#define C (1.0/vec2(160.0,560.0))","#define D (1.0/7.0)","#define E(tex,coord,offset) texture2D(tex,coord+float(offset)*resolution,0.0)","uniform sampler2D tDiffuse;uniform sampler2D tArea;uniform sampler2D tSearch;uniform vec2 resolution;varying vec2 _;varying vec4 a[3];varying vec2 b;vec2 c(vec2 _){return sign(_)*floor(abs(_)+0.5);}float d(sampler2D d,vec2 e,float f,float g){e.r=f+e.r*g;return 255.*texture2D(d,e,0.).r;}float e(sampler2D e,sampler2D f,vec2 g,float h){vec2 i=vec2(0.,1.);for(int j=0;j<A;j++){i=texture2D(e,g,0.).rg;g-=vec2(2.,0.)*resolution;if(!(g.x>h&&i.g>0.8281&&i.r==0.))break;}g.x+=0.25*resolution.x;g.x+=resolution.x;g.x+=2.*resolution.x;g.x-=resolution.x*d(f,i,0.,0.5);return g.x;}float f(sampler2D f,sampler2D g,vec2 h,float i){vec2 j=vec2(0.,1.);for(int k=0;k<A;k++){j=texture2D(f,h,0.).rg;h+=vec2(2.,0.)*resolution;if(!(h.x<i&&j.g>0.8281&&j.r==0.))break;}h.x-=0.25*resolution.x;h.x-=resolution.x;h.x-=2.*resolution.x;h.x+=resolution.x*d(g,j,0.5,0.5);return h.x;}float g(sampler2D g,sampler2D h,vec2 i,float j){vec2 k=vec2(1.,0.);for(int l=0;l<A;l++){k=texture2D(g,i,0.).rg;i+=vec2(0.,2.)*resolution;if(!(i.y>j&&k.r>0.8281&&k.g==0.))break;}i.y-=0.25*resolution.y;i.y-=resolution.y;i.y-=2.*resolution.y;i.y+=resolution.y*d(h,k.gr,0.,0.5);return i.y;}float h(sampler2D h,sampler2D i,vec2 j,float k){vec2 l=vec2(1.,0.);for(int m=0;m<A;m++){l=texture2D(h,j,0.).rg;j-=vec2(0.,2.)*resolution;if(!(j.y<k&&l.r>0.8281&&l.g==0.))break;}j.y+=0.25*resolution.y;j.y+=resolution.y;j.y+=2.*resolution.y;j.y-=resolution.y*d(i,l.gr,0.5,0.5);return j.y;}vec2 i(sampler2D i,vec2 j,float k,float l,float m){vec2 n=float(B)*c(4.*vec2(k,l))+j;n=C*n+(0.5*C);n.y+=D*m;return texture2D(i,n,0.).rg;}vec4 j(vec2 j,vec2 k,vec4 l[3],sampler2D m,sampler2D n,sampler2D o,ivec4 p){vec4 q=vec4(0.,0.,0.,0.);vec2 r=texture2D(m,j).rg;if(r.g>0.){vec2 s;vec2 t;t.x=e(m,o,l[0].xy,l[2].x);t.y=l[1].y;s.x=t.x;float u=texture2D(m,t,0.).r;t.x=f(m,o,l[0].zw,l[2].y);s.y=t.x;s=s/resolution.x-k.x;vec2 v=sqrt(abs(s));t.y-=1.*resolution.y;float w=E(m,t,ivec2(1,0)).r;q.rg=i(n,v,u,w,float(p.y));}if(r.r>0.){vec2 s;vec2 t;t.y=g(m,o,l[1].xy,l[2].z);t.x=l[0].x;s.x=t.y;float u=texture2D(m,t,0.).g;t.y=h(m,o,l[1].zw,l[2].w);s.y=t.y;s=s/resolution.y-k.y;vec2 v=sqrt(abs(s));t.y-=1.*resolution.y;float w=E(m,t,ivec2(0,1)).g;q.ba=i(n,v,u,w,float(p.x));}return q;}void main(){gl_FragColor=j(_,b,a,tDiffuse,tArea,tSearch,ivec4(0.));}",""].join("\\n")],smaa3:[["precision highp float;uniform vec2 resolution;attribute vec3 position;attribute vec2 uv;uniform mat4 modelViewMatrix;uniform mat4 projectionMatrix;varying vec2 _;varying vec4 a[2];void b(vec2 b){a[0]=b.xyxy+resolution.xyxy*vec4(-1.,0.,0.,1.);a[1]=b.xyxy+resolution.xyxy*vec4(1.,0.,0.,-1.);}void main(){_=uv;b(_);gl_Position=projectionMatrix*modelViewMatrix*vec4(position,1.);}",""].join("\\n"),["precision highp float;uniform sampler2D tDiffuse;uniform sampler2D tColor;uniform vec2 resolution;varying vec2 _;varying vec4 a[2];vec4 b(vec2 _,vec4 a[2],sampler2D b,sampler2D c){vec4 d;d.xz=texture2D(c,_).xz;d.y=texture2D(c,a[1].zw).g;d.w=texture2D(c,a[1].xy).a;if(dot(d,vec4(1.,1.,1.,1.))<1e-5){return texture2D(b,_,0.);}else{vec2 e;e.x=d.a>d.b?d.a:-d.b;e.y=d.g>d.r?-d.g:d.r;if(abs(e.x)>abs(e.y)){e.y=0.;}else{e.x=0.;}vec4 f=texture2D(b,_,0.);_+=sign(e)*resolution;vec4 g=texture2D(b,_,0.);float h=abs(e.x)>abs(e.y)?abs(e.x):abs(e.y);f.xyz=pow(f.xyz,vec3(2.2));g.xyz=pow(g.xyz,vec3(2.2));vec4 i=mix(f,g,h);i.xyz=pow(i.xyz,vec3(1./2.2));return i;}}void main(){gl_FragColor=b(_,a,tColor,tDiffuse);}",""].join("\\n")],overlayfill:[["precision highp float;attribute vec2 a_pos;uniform mat4 u_proj_matrix;uniform mat4 u_mv_matrix;void main(){gl_Position=u_proj_matrix*u_mv_matrix*vec4(a_pos,0,1);}",""].join("\\n"),["precision mediump float;uniform vec4 u_color;void main(){gl_FragColor=u_color;}",""].join("\\n")],overlayblock:[["precision highp float;attribute vec4 a_pos;attribute vec4 a_normal;attribute vec4 a_color;uniform mat4 u_proj_matrix;uniform mat4 u_mv_matrix;uniform mat4 u_normal_matrix;uniform vec3 u_side_light_dir;uniform bool u_is_normal;varying vec4 _;varying float a;varying vec4 b;const vec3 c=vec3(0.06,0.06,0.06);vec3 d=vec3(0.1,0.1,0.1);void main(){vec4 e=u_proj_matrix*u_mv_matrix*a_pos;gl_Position=e;a=-1./500.-a_pos.z/100.;gl_Position.z=gl_Position.z+a;b=a_normal;_=a_color;vec3 f=a_color.rgb;vec3 g=normalize(vec3(u_normal_matrix*a_normal));vec4 h=u_mv_matrix*vec4(0.5,0.5,0,0);vec3 i=normalize(h.xyz);float j=max(0.,dot(g,-i));_=vec4(f+f*c*j,a_color.a);}",""].join("\\n"),["precision highp float;varying vec4 _;varying float a;uniform float u_camera_far;float c=500.0;void main(){float d=(gl_FragCoord.z/gl_FragCoord.w-a);float e=_.a;if(d>u_camera_far-c){e=e*(u_camera_far-d)/c;if(e<=0.){discard;}}gl_FragColor=vec4(_.rgb,e);}",""].join("\\n")],marker3d:[["attribute vec4 a_pos;attribute float a_height;attribute vec4 a_color;attribute float a_shape;attribute float a_size;attribute vec4 a_texture_coord;uniform mat4 u_proj_matrix;uniform mat4 u_mv_matrix;uniform vec3 u_camera_pos_high;uniform vec3 u_camera_pos_low;varying vec4 _;varying vec4 a;varying float b;void main(){if(a_color.w>=0.&&a_color.w<=1.){_=a_color;}else{_=vec4(a_color.xyz,1.);}b=a_shape;a=a_texture_coord;vec3 c=vec3(a_pos.xy,a_height);vec3 d=vec3(a_pos.zw,a_height);vec4 e=u_proj_matrix*u_mv_matrix*vec4((c-u_camera_pos_high)+(d-u_camera_pos_low),1.);gl_Position=e;gl_PointSize=a_size;}",""].join("\\n"),["precision mediump float;varying vec4 _;varying float b;varying vec4 a;uniform bool u_use_texture;uniform sampler2D u_Sampler;void main(){vec4 _=_;if(b==1.){float a=distance(gl_PointCoord,vec2(0.5,0.5));if(a>0.5){discard;}float b=1.;b=1.-smoothstep(0.49,0.5,a);_.a*=b;}if(u_use_texture){vec4 a=a;float b=a.x;float c=a.z-a.x;float d=a.y;float e=a.w-a.y;_=texture2D(u_Sampler,vec2(b+gl_PointCoord.x*c,d+e*(1.-gl_PointCoord.y)));}gl_FragColor=_;}",""].join("\\n")],groundoverlay:[["precision highp float;attribute vec3 a_pos;attribute vec4 a_texture_coord;varying vec4 _;uniform mat4 u_proj_matrix;uniform mat4 u_mv_matrix;void main(){gl_Position=u_proj_matrix*u_mv_matrix*vec4(a_pos.xy,0.,1.);_=a_texture_coord;}",""].join("\\n"),["precision highp float;varying vec4 _;uniform sampler2D u_Sampler;uniform float u_opacity;void main(){vec4 _=texture2D(u_Sampler,vec2(_.s,_.t));gl_FragColor=_*u_opacity;}",""].join("\\n")],groundpixeloverlay:[["precision highp float;attribute vec3 a_pos;attribute vec4 a_texture_coord;attribute vec4 a_mask_coord;varying vec4 _;varying vec4 a;uniform mat4 u_proj_matrix;uniform mat4 u_mv_matrix;void main(){gl_Position=u_proj_matrix*u_mv_matrix*vec4(a_pos.xy,0.,1.);_=a_texture_coord;a=a_mask_coord;}",""].join("\\n"),["precision highp float;varying vec4 _;varying vec4 a;uniform sampler2D u_Sampler;uniform sampler2D u_ColorMap;uniform sampler2D u_Mask;uniform float u_noData;uniform float u_opacity;uniform float u_maskData;uniform vec2 u_domain;uniform vec2 u_clamp;uniform bool u_maskLoaded;void main(){vec4 _=texture2D(u_Sampler,vec2(_.s,_.t));vec4 a=a;vec4 b=texture2D(u_Mask,vec2(a.s,a.t));float c=generateValue(_);if(c!=u_noData&&c>=u_clamp.s&&c<=u_clamp.t){c=(c-u_domain.s)/(u_domain.t-u_domain.s);vec4 d=texture2D(u_ColorMap,vec2(c,0));d.a*=_.a*u_opacity;_=d;}else{_=vec4(0,0,0,0);}if(u_maskLoaded){if(a.s<0.||a.s>1.||a.t<0.||a.t>1.){b.a=0.;}_.a*=b.a;if(u_maskData>0.){float d=b.r*255.;_.a*=(step(u_maskData,d)-step(u_maskData+1.,d));}}gl_FragColor=_;}",""].join("\\n")],linelayer:[["precision highp float;attribute vec2 a_pos;attribute vec2 a_normal;attribute vec4 a_color;attribute vec4 a_data;attribute float a_id;uniform mat4 u_mv_matrix;uniform mat4 u_proj_matrix;uniform float u_scale;uniform bool u_flat;uniform float u_dash_length;uniform float u_margin_length;uniform float u_map_zoom;uniform bool u_is_linear;varying vec4 _;varying float a;varying float b;varying float c;varying float d;varying float e;varying vec4 f;varying vec2 g;const float h=0.5;void main(){a=a_id;vec2 i=a_normal/10.;b=a_data.x;float j=a_data.y;float k=1.;float l=0.;if(!u_is_linear){k=a_data.z;}else{l=a_data.z;}float m=a_data.w/10.;float n=length(i);float o=1.+h/n;c=1.-(2.*h/(n+h));_=a_color;e=-k/500.-j/100.;vec2 p=a_pos/10.+i*o*u_scale;float q=u_dash_length*pow(2.,18.-u_map_zoom);float r=u_margin_length*pow(2.,18.-u_map_zoom);f=vec4(m,q,r,l);if(u_dash_length>0.){float s=m/q;if(b==1.){g=vec2(1.,s);}else{g=vec2(0.,s);}}else{if(b==1.){g=vec2(1.,0.);}else{g=vec2(0.,0.);}}if(u_flat){gl_Position=u_proj_matrix*u_mv_matrix*vec4(p,0.,1.);vec4 s=u_proj_matrix*u_mv_matrix*vec4(p,j/10.,1.);gl_Position.z=s.z+e;d=0.;}else{gl_Position=u_proj_matrix*u_mv_matrix*vec4(p,j,1.);gl_Position.z=gl_Position.z+e;d=j;}}",""].join("\\n"),["precision highp float;uniform int u_draw_part;uniform sampler2D u_image;uniform sampler2D u_linear_image;uniform float u_camera_far;uniform float u_opacity;uniform bool u_sequence;uniform bool u_pick_model;uniform bool u_no_gradual;uniform vec4 u_pick_color;uniform int u_pick_tag;uniform int u_del_tags[20];uniform int u_trace_index[20];uniform int u_trace_len[20];uniform vec3 u_trace_color;uniform bool u_trace_disappear;uniform bool u_trace_start;uniform bool u_is_linear;uniform vec4 u_arrow_color;varying float a;varying float b;varying vec4 _;varying float c;varying float d;varying float e;varying vec2 g;varying vec4 f;float h=500.0;vec4 i(float i){float j=i+1.;float k=floor(j/65536.);j=j-k*65536.;float l=floor(j/256.);j=j-l*256.;float m=j;return vec4(m/255.,l/255.,k/255.,1.);}float j(vec3 j){return j.r+j.g*256.+j.b*65536.-1.;}float k(vec4 k){vec3 l=vec4(k*255.).rgb;return(j(l)/pow(10.,4.));}bool l(float l){int m=int(l);bool n=false;for(int o=0;o<20;o++){if(u_del_tags[o]==0){break;}else if(u_del_tags[o]==m){n=true;break;}}return n;}int m(int m){int n=-1;for(int o=0;o<20;o++){if(u_trace_index[o]==-1){break;}else if(u_trace_index[o]==m){n=u_trace_len[o];break;}}return n;}vec4 n(vec4 n,bool o){if(o){float p=0.299*n.r+0.587*n.g+0.114*n.b;p=clamp(p,.2,.6);n=vec4(vec3(p)+0.25,n.a);}else{n=vec4(u_trace_color/255.,n.a);}return n;}vec4 o(vec4 o,float p,float q,bool r){if(p>=0.){if(q<=p){if(u_trace_start){if(u_trace_disappear){return vec4(-1.,0.,0.,0.);}o=n(o,r);}}else{if(!u_trace_start){if(u_trace_disappear){return vec4(-1.,0.,0.,0.);}o=n(o,r);}}}return o;}void main(){if(u_draw_part==2){if(d==0.){discard;}}bool p=l(a);if(p){discard;}float q=f.x;float r=f.y;float s=f.z;float t=f.w;vec4 u=_;if(u_is_linear&&u.a==0.){float v=k(u);u=texture2D(u_linear_image,vec2(v,0.));}else if(u_is_linear&&t!=0.){u=texture2D(u_linear_image,vec2(clamp(q/t,0.,1.),0.));}int v=int(a);if(v==u_pick_tag-1){u=vec4(u_pick_color.rgb/255.,u_pick_color.a*u.a);}if(u_pick_model){gl_FragColor=i(a);return;}float w=r;float x=s;float y=q;int z=m(v);float _a=float(z);if(u_sequence){float _b=x/2.;float _c=mod(y,w+x);if(_c>=_b&&_c<=_b+w){float _d=(_c-_b)/w;vec4 _e=texture2D(u_image,vec2(g.x,_d));u=mix(u,_e*vec4(u_arrow_color.rgb/255.,1.),_e.a);if(_e.a>=0.8){u=o(u,_a,y,true);}else{u=o(u,_a,y,false);}}else{u=o(u,_a,y,false);}}else if(w>0.){u=texture2D(u_image,g);u=u*vec4(u_arrow_color.rgb/255.,1.);u=o(u,_a,y,true);}else{u=o(u,_a,y,false);}if(u.r==-1.){discard;}vec4 _b;if(!u_no_gradual&&abs(b)>c){float _c=1.-(abs(b)-c)/(1.-c);_b=vec4(u.rgb,_c*u.a);}else{_b=u;}float _c=(gl_FragCoord.z/gl_FragCoord.w-e);float _d=_b.a;if(_c>u_camera_far-h){_d=_d*(u_camera_far-_c)/h;if(_d<=0.){discard;}}_b.a=_d*u_opacity;gl_FragColor=_b;}",""].join("\\n")],filllayer:[["precision highp float;attribute vec3 a_pos;attribute float a_id;uniform mat4 u_mv_matrix;uniform mat4 u_proj_matrix;uniform bool u_flat;uniform float u_map_zoom;uniform vec2 u_size;uniform vec4 u_bound;uniform float u_scale;varying float _;varying float a;varying float b;varying vec2 c;const float d=0.5;void main(){_=a_id;c=a_pos.xy;float e=a_pos.z;a=-1./500.-e/100.;if(u_flat){gl_Position=u_proj_matrix*u_mv_matrix*vec4(a_pos.xy,0.,1);vec4 f=u_proj_matrix*u_mv_matrix*vec4(a_pos.xy,e/10.,1);gl_Position.z=f.z+a;b=0.;}else{gl_Position=u_proj_matrix*u_mv_matrix*vec4(a_pos.xy,e,1.);gl_Position.z=gl_Position.z+a;b=e;}}",""].join("\\n"),["precision highp float;uniform vec4 u_color;uniform float u_opacity;uniform bool u_pattern;uniform bool u_pattern_mask;uniform sampler2D u_image;uniform float u_map_zoom;uniform vec2 u_size;uniform vec4 u_bound;uniform float u_scale;uniform vec2 u_offset;uniform float u_camera_far;uniform int u_draw_part;uniform bool u_pick_model;uniform vec4 u_pick_color;uniform int u_pick_tag;uniform int u_del_tags[20];varying float _;varying float b;varying float a;varying vec2 c;float d=500.0;bool e=false;vec4 f(float f){float g=f+1.;float h=floor(g/65536.);g=g-h*65536.;float i=floor(g/256.);g=g-i*256.;float j=g;return vec4(j/255.,i/255.,h/255.,1.);}bool g(float g){int h=int(g);bool i=false;for(int j=0;j<20;j++){if(u_del_tags[j]==0){break;}else if(u_del_tags[j]==h){i=true;break;}}return i;}void main(){if(u_draw_part==2){if(b==0.){discard;}}bool h=g(_);if(h){discard;}vec4 i=u_color;int j=int(_);if(j==u_pick_tag-1){i=vec4(u_pick_color.rgb/255.,u_pick_color.a*i.a);e=true;}if(u_pick_model){gl_FragColor=f(_);return;}vec4 k=i;if(u_pattern){vec4 l=u_bound;l.y=u_size.y-(l.y+l.w);vec4 m=l/vec4(u_size,u_size);vec2 n=l.zw*u_scale*pow(2.,18.-u_map_zoom);vec2 o=mod(u_offset+mod(c,n)/n,1.);vec2 p=m.xy+m.zw*o;vec4 q=texture2D(u_image,p);k.a*=q.a;if(!u_pattern_mask&&e==false){k.rgb=q.rgb;}}float l=(gl_FragCoord.z/gl_FragCoord.w-a);float m=k.a;if(l>u_camera_far-d){m=m*(u_camera_far-l)/d;if(m<=0.){discard;}}k.a=m*u_opacity;gl_FragColor=k;}",""].join("\\n")],watermark:[["precision highp float;attribute vec2 a_pos;attribute vec2 a_tex;uniform vec2 u_tex_scale;varying vec2 _;void main(){vec4 a=vec4(a_pos,-1,1);gl_Position=a;_=a_tex*u_tex_scale;}",""].join("\\n"),["precision mediump float;uniform sampler2D u_image;varying vec2 _;void main(){gl_FragColor=texture2D(u_image,_);}",""].join("\\n")],pointshapelayer:[["precision highp float;attribute vec2 a_pos;attribute vec4 a_shape;attribute vec3 a_transform;attribute vec2 a_offset;attribute vec4 a_data;attribute vec2 a_start;attribute vec2 a_end;attribute float a_id;uniform mat4 u_mv_matrix;uniform mat4 u_proj_matrix;uniform bool u_mask;uniform bool u_flat;uniform vec2 u_resolution_ratio;uniform float u_map_zoom;varying vec4 _;varying vec2 a;varying vec2 b;varying vec2 c;varying vec2 d;varying vec4 e;varying float f;mat2 g(float g){return mat2(cos(g),sin(g),-sin(g),cos(g));}vec3 h(vec3 h,vec2 i,float j,float k){vec2 l=vec2(h.xy);if(j==1.){l=vec2(-i.x,i.y)*g(k)+vec2(h.xy);}else if(j==2.){l=vec2(i.x,i.y)*g(k)+vec2(h.xy);}else if(j==3.){l=vec2(i.x,-i.y)*g(k)+vec2(h.xy);}else{l=vec2(-i.x,-i.y)*g(k)+vec2(h.xy);}return vec3(l,h.z);}vec3 i(vec3 i,vec2 j,float k,float l){vec2 m=vec2(i.xy);if(k==1.){m=vec2(-j.x,0.)*g(l)+vec2(i.xy);}else if(k==2.){m=vec2(j.x,0.)*g(l)+vec2(i.xy);}else if(k==3.){m=vec2(j.x,-2.*j.y)*g(l)+vec2(i.xy);}else{m=vec2(-j.x,-2.*j.y)*g(l)+vec2(i.xy);}return vec3(m,i.z);}vec3 j(vec3 j,vec2 k,float l,float m){vec2 n=vec2(j.xy);if(l==1.){n=vec2(-k.x,2.*k.y)*g(m)+vec2(j.xy);}else if(l==2.){n=vec2(k.x,2.*k.y)*g(m)+vec2(j.xy);}else if(l==3.){n=vec2(k.x,0.)*g(m)+vec2(j.xy);}else{n=vec2(-k.x,0.)*g(m)+vec2(j.xy);}return vec3(n,j.z);}vec3 k(vec3 k,vec2 l,float m,float n){vec2 o=vec2(k.xy);if(m==1.){o=vec2(-2.*l.x,l.y)*g(n)+vec2(k.xy);}else if(m==2.){o=vec2(0.,l.y)*g(n)+vec2(k.xy);}else if(m==3.){o=vec2(0.,-l.y)*g(n)+vec2(k.xy);}else{o=vec2(-2.*l.x,-l.y)*g(n)+vec2(k.xy);}return vec3(o,k.z);}vec3 l(vec3 l,vec2 m,float n,float o){vec2 p=vec2(l.xy);if(n==1.){p=vec2(0.,m.y)*g(o)+vec2(l.xy);}else if(n==2.){p=vec2(2.*m.x,m.y)*g(o)+vec2(l.xy);}else if(n==3.){p=vec2(2.*m.x,-m.y)*g(o)+vec2(l.xy);}else{p=vec2(0.,-m.y)*g(o)+vec2(l.xy);}return vec3(p,l.z);}vec3 m(vec3 m,vec2 n,float o,float p){vec2 q=vec2(m.xy);if(o==1.){q=vec2(0.,0.)*g(p)+vec2(m.xy);}else if(o==2.){q=vec2(2.*n.x,0.)*g(p)+vec2(m.xy);}else if(o==3.){q=vec2(2.*n.x,-2.*n.y)*g(p)+vec2(m.xy);}else{q=vec2(0.,-2.*n.y)*g(p)+vec2(m.xy);}return vec3(q,m.z);}vec3 n(vec3 n,vec2 o,float p,float q){vec2 r=vec2(n.xy);if(p==1.){r=vec2(-2.*o.x,0.)*g(q)+vec2(n.xy);}else if(p==2.){r=vec2(0.,0.)*g(q)+vec2(n.xy);}else if(p==3.){r=vec2(0.,-2.*o.y)*g(q)+vec2(n.xy);}else{r=vec2(-2.*o.x,-2.*o.y)*g(q)+vec2(n.xy);}return vec3(r,n.z);}vec3 o(vec3 o,vec2 p,float q,float r){vec2 s=vec2(o.xy);if(q==1.){s=vec2(-2.*p.x,2.*p.y)*g(r)+vec2(o.xy);}else if(q==2.){s=vec2(0.,2.*p.y)*g(r)+vec2(o.xy);}else if(q==3.){s=vec2(0.,0.)*g(r)+vec2(o.xy);}else{s=vec2(-2.*p.x,0.)*g(r)+vec2(o.xy);}return vec3(s,o.z);}vec3 p(vec3 p,vec2 q,float r,float s){vec2 t=vec2(p.xy);if(r==1.){t=vec2(0.,2.*q.y)*g(s)+vec2(p.xy);}else if(r==2.){t=vec2(2.*q.x,2.*q.y)*g(s)+vec2(p.xy);}else if(r==3.){t=vec2(2.*q.x,0.)*g(s)+vec2(p.xy);}else{t=vec2(0.,0.)*g(s)+vec2(p.xy);}return vec3(t,p.z);}void main(){_=a_data;float q=a_shape.z;float r=a_shape.w;float s=a_id;b=a_pos;float t=a_shape.y;if(t==1.){d=vec2(-1.,1.);}else if(t==2.){d=vec2(1.,1.);}else if(t==3.){d=vec2(1.,-1.);}else{d=vec2(-1.,-1.);}float u=a_transform.x/2.;float v=pow(2.,18.-u_map_zoom);vec2 w=a_pos+a_offset*v;float x=a_transform.x;e=vec4(q,s,r,x);if(u_flat){float y=u*a_transform.y*v;float z=a_transform.z;bool _a=false;if((a_start.x+a_start.y)!=0.2&&(a_end.x+a_end.y)!=0.2){y*=3.;z=0.;_a=true;}if(a_shape.z==6.){y*=2.;}a=a_start;c=a_end;vec3 _b=vec3(0.,0.,0.);if(a_shape.x==0.||_a){_b=h(vec3(w,0.),vec2(y,y),t,z);}else if(a_shape.x==1.){_b=m(vec3(w,0.),vec2(y,y),t,z);}else if(a_shape.x==2.){_b=i(vec3(w,0.),vec2(y,y),t,z);}else if(a_shape.x==3.){_b=n(vec3(w,0.),vec2(y,y),t,z);}else if(a_shape.x==4.){_b=k(vec3(w,0.),vec2(y,y),t,z);}else if(a_shape.x==5.){_b=o(vec3(w,0.),vec2(y,y),t,z);}else if(a_shape.x==6.){_b=j(vec3(w,0.),vec2(y,y),t,z);}else if(a_shape.x==7.){_b=p(vec3(w,0.),vec2(y,y),t,z);}else if(a_shape.x==8.){_b=l(vec3(w,0.),vec2(y,y),t,z);}float _c=0.;f=-_c/100.;gl_Position=u_proj_matrix*u_mv_matrix*vec4(_b.xy,0.,1);vec4 _d=u_proj_matrix*u_mv_matrix*vec4(_b.xy,_c/10.,1);gl_Position.z=_d.z+f;}else{vec4 y=u_proj_matrix*u_mv_matrix*vec4(w,0.,1);vec3 z=y.xyz/y.w;vec2 _a=u_resolution_ratio*u*a_transform.y;float _b=a_transform.z;bool _c=false;if((a_start.x+a_start.y)!=0.2&&(a_end.x+a_end.y)!=0.2){_a*=2.;_b=0.;_c=true;}a=a_start;c=a_end;if(a_shape.x==0.||_c){z=h(z,_a,t,_b);}else if(a_shape.x==1.){z=m(z,_a,t,_b);}else if(a_shape.x==2.){z=i(z,_a,t,_b);}else if(a_shape.x==3.){z=n(z,_a,t,_b);}else if(a_shape.x==4.){z=k(z,_a,t,_b);}else if(a_shape.x==5.){z=o(z,_a,t,_b);}else if(a_shape.x==6.){z=j(z,_a,t,_b);}else if(a_shape.x==7.){z=p(z,_a,t,_b);}else if(a_shape.x==8.){z=l(z,_a,t,_b);}gl_Position=vec4(z,1.);}}",""].join("\\n"),["precision highp float;","#define A 3.14159265359","#define B 6.28318530718","uniform float u_camera_far;uniform bool u_mask;uniform bool u_pick_model;uniform vec4 u_pick_color;uniform int u_pick_tag;varying float f;varying vec4 _;varying vec2 a;varying vec2 b;varying vec2 c;varying vec2 d;varying vec4 e;float g=500.0;vec4 h(float h){float i=floor(h+1.);float j=floor(i/65536.);i=i-j*65536.;float k=floor(i/256.);i=floor(i-k*256.);float l=i;return vec4(l/255.,k/255.,j/255.,1.);}mat2 i(float i){return mat2(cos(i),-sin(i),sin(i),cos(i));}mat2 j(vec2 j){return mat2(j.x,0.,0.,j.y);}float k(vec2 k,vec2 l){float m=max(abs(k.x/l.x),abs(k.y/l.y));return smoothstep(1.2,1.15,m);}float l(vec2 l,vec2 m){vec2 n=abs(l)-m;float o=min(max(n.x,n.y),0.01)+length(max(n,0.));return 1.-smoothstep(0.,0.04,o);}float m(vec2 m,float n){float o=length(m)-n;return smoothstep(0.04,0.,o);}float n(vec2 n){int o=3;float p=atan(n.x,n.y)+A;float q=2.*A/float(o);float r=cos(floor(.5+p/q)*q-p)*length(n);return 1.-smoothstep(0.400,0.45,r*1.488);}float o(vec2 o){float p=l(i(0.5*A)*o+vec2(0.,0.25),vec2(0.10,0.25));p+=n(j(vec2(2.,2.))*i(0.17*A)*o+vec2(-1.010,0.610));return p;}float p(float p,float q){float r,t1,t2,t3,t4;t3=abs(q);t1=abs(p);r=max(t3,t1);t1=min(t3,t1);t3=float(1)/r;t3=t1*t3;t4=t3*t3;r=-float(0.013480470);r=r*t4+float(0.057477314);r=r*t4-float(0.121239071);r=r*t4+float(0.195635925);r=r*t4-float(0.332994597);r=r*t4+float(0.999995630);t3=r*t3;t3=(abs(p)>abs(q))?float(1.570796327)-t3:t3;t3=(q<0.)?float(3.141592654)-t3:t3;t3=(p<0.)?-t3:t3;return t3;}float q(vec2 q,vec2 r,vec2 s){vec2 t=vec2(1.,0.);float u=q.x*t.y-q.y*t.x;float v=p(u,dot(q,t));s=s*i(v);float w=q.x*r.y-q.y*r.x;float x=p(w,dot(q,r));float y=degrees(x);float z=1.;float _a=0.5*A*z;float _b=z>0.?y/180.*A:(1.-y/180.)*A;float _c=l(i(_a)*s+vec2(0.,0.45),vec2(0.10,0.45));if(abs(abs(y)-180.)>1.){_c+=m(s,0.1);}_c+=o(i(_b)*s);return _c;}float r(vec2 r){vec2 s=vec2(r.x*1.224,r.y+0.324);int t=3;float u=atan(s.x,s.y)+A;float v=B/float(t);float w=cos(floor(.5+u/v)*v-u)*length(s);float x=1.-smoothstep(0.3,0.342,w*0.488);return x;}float s(vec2 s,float t){vec2 u=abs(s);return 1.-step(0.,max(u.x*0.866025+s.y*0.5,-s.y*0.5)-t*0.5);}float t(vec2 t){vec2 u=vec2(t.x*1.224,t.y+0.356);int v=3;float w=atan(u.x,u.y)+A;float x=B/float(v);float y=cos(floor(.5+w/x)*x-w)*length(u);float z=smoothstep(0.3,0.342,y*0.488);return z;}float u(vec2 u){float v=0.;vec2 w=vec2(u.x*1.160,u.y+0.468);int x=3;float y=atan(w.x,w.y)+A;float z=B/float(x);float _a=cos(floor(.5+y/z)*z-y)*length(w);v=1.-smoothstep(.4,0.43,_a*0.576);w=vec2(u.x*1.192,u.y*2.868+2.260);y=atan(w.x,w.y)+A;_a=cos(floor(.5+y/z)*z-y)*length(w);v-=1.-smoothstep(.4,0.43,_a*0.576);return v;}float v(vec2 v){float w=0.;vec2 x=vec2(v.x*1.160,v.y+0.468);int y=3;float z=atan(x.x,x.y)+A;float _a=B/float(y);float _b=cos(floor(.5+z/_a)*_a-z)*length(x);w=smoothstep(.4,0.43,_b*0.576);return w;}float w(vec2 w){float x=0.;x=u((w+vec2(0.,-.42))*j(vec2(1.8,1.8)));x-=l(w+vec2(0.,.25),vec2(0.60,0.10));x=clamp(x,0.,1.);x+=l(w+vec2(0.,.25),vec2(0.12,0.730));return x;}vec3 x(vec3 x,vec3 y,float z){return(y*z+x*(1.-z));}float y(float y){return smoothstep(0.,0.2,y);}float z(vec2 z,vec2 _a,vec2 _b){vec2 _c=z-_a;vec2 _d=_b-_a;float _e=clamp(dot(_c,_d)/dot(_d,_d),0.,1.);return length(_c-_d*_e);}float _a(vec2 _a,vec2 _b){float _c=l(_a,vec2(0.20,0.960)-_b);_c+=l(_a,vec2(0.960,0.20)-_b);return clamp(_c,0.,1.);}void main(){vec4 _b=h(_.x);vec4 _c=h(_.z);float _d=e.x;float _e=e.y;float _f=e.z;float _g=e.w;int _h=int(_e);if(_h==u_pick_tag-1){_b=vec4(u_pick_color.rgb/255.,u_pick_color.a*_b.a);}if(u_pick_model){_b=h(_e);}float _i=0.;float _j=0.;float _k=floor(_d);if(u_mask){if(_f>=3.||_k==0.||_k==4.){discard;}if(_k==2.){_i=t(d);}else if(_k==5.){_i=v(d);}vec4 _l=vec4(vec3(0.),clamp(_i,0.,1.));if(_i<0.1){discard;}gl_FragColor=_l;return;}else{if((a.x+a.y)!=0.2&&(c.x+c.y)!=0.2){vec2 _l=a-b;vec2 _m=c-b;_i=q(_l,_m,d);}else{if(_k==0.){_i=m(d,0.9);if(_.w>0.){float _l=.9-_.w/_g;_j=m(d,_l);}}if(_k==2.){_i=r(d);if(_.w>0.){float _l=1.+_.w/_g;_j=r(d*j(vec2(_l)));}}else if(_k==4.){_i=_a(d,vec2(0.));if(_.w>0.){float _l=_.w*2./_g;_j=_a(d,vec2(_l*.2));}}else if(_k==5.){_i=u(d);}else if(_k==6.){_i=w(d);}}}vec3 _l=x(vec3(0.),vec3(_b.rgb),clamp(_i,0.,1.));if(_k==0.||_k==2.||_k==4.){if(_.w>0.){float _m=_i-_j;_i=_m+_j*_.y;_l=mix(_b.rgb,_c.rgb,_m);}else{_i*=_.y;}}else{_i*=_.y;}vec4 _m=vec4(_l,clamp(_i,0.,1.));float _n=(gl_FragCoord.z/gl_FragCoord.w-f);float _o=_m.a;if(_n>u_camera_far-g){_o=_o*(u_camera_far-_n)/g;if(_o<=0.){discard;}}gl_FragColor=_m;}",""].join("\\n")],pointiconlayer:[["precision highp float;attribute vec2 a_pos;attribute vec4 a_shape;attribute vec4 a_style;attribute vec4 a_data;attribute float a_index;attribute float a_id;uniform mat4 u_mv_matrix;uniform mat4 u_proj_matrix;uniform bool u_flat;uniform bool u_fixed;uniform vec2 u_resolution_ratio;uniform float u_map_zoom;uniform float u_ref_level;varying float _;varying vec2 a;varying float b;varying float c;mat2 d(float d){return mat2(cos(d),sin(d),-sin(d),cos(d));}vec3 e(vec3 e,vec2 f,float g,float h,vec2 i){vec2 j=vec2(e.xy);if(g==1.){j=vec2((-1.-i.x)*f.x,(1.-i.y)*f.y)*d(h)+vec2(e.xy);}else if(g==2.){j=vec2((1.-i.x)*f.x,(1.-i.y)*f.y)*d(h)+vec2(e.xy);}else if(g==3.){j=vec2((1.-i.x)*f.x,(-1.-i.y)*f.y)*d(h)+vec2(e.xy);}else{j=vec2((-1.-i.x)*f.x,(-1.-i.y)*f.y)*d(h)+vec2(e.xy);}return vec3(j,e.z);}void main(){_=a_id;b=a_style.w;a=a_data.zw;float f=a_style.z;float g=pow(2.,18.-u_ref_level);if(!u_fixed){g=pow(2.,18.-u_map_zoom);}vec2 h=a_pos+a_data.xy*g;if(u_flat){vec2 i=a_shape.xy*a_style.x*g;float j=a_style.y;vec3 k=vec3(0.,0.,0.);k=e(vec3(h,0.),i,f,j,a_shape.zw);float l=0.;c=-l/100.;gl_Position=u_proj_matrix*u_mv_matrix*vec4(k.xy,0.,1);vec4 m=u_proj_matrix*u_mv_matrix*vec4(k.xy,l/10.,1);gl_Position.z=m.z+c;}else{vec4 i=u_proj_matrix*u_mv_matrix*vec4(h,0.,1);vec3 j=i.xyz/i.w;vec2 k=u_resolution_ratio*a_shape.xy*a_style.x;float l=a_style.y;j=e(j,k,f,l,a_shape.zw);gl_Position=vec4(j,1.);}}",""].join("\\n"),["precision highp float;uniform float u_camera_far;uniform bool u_pick_model;uniform vec4 u_pick_color;uniform int u_pick_tag;uniform sampler2D u_sampler;varying float c;varying float _;varying vec2 a;varying float b;float d=500.0;vec4 e(float e){float f=e+1.;float g=floor(f/65536.);f=f-g*65536.;float h=floor(f/256.);f=f-h*256.;float i=f;return vec4(i/255.,h/255.,g/255.,1.);}void main(){int f=int(_);vec4 g=vec4(0.,1.,1.,1.);if(u_pick_model){g=e(_);}else{g=texture2D(u_sampler,vec2(a.s,a.t));}g.a*=b;float h=(gl_FragCoord.z/gl_FragCoord.w-c);float i=g.a;if(h>u_camera_far-d){i=i*(u_camera_far-h)/d;if(i<=0.){discard;}}gl_FragColor=g;}",""].join("\\n")],light:[["precision highp float;attribute vec3 position;attribute vec2 uv;uniform mat4 projectionMatrix;uniform mat4 modelViewMatrix;varying vec2 _;void main(){_=uv;gl_Position=projectionMatrix*modelViewMatrix*vec4(position,1.);}",""].join("\\n"),["precision highp float;uniform sampler2D tDiffuse;uniform float uHue;uniform bool uGray;varying vec2 _;vec3 a(vec3 _){float a=_.r;float b=_.g;float c=_.b;float d=min(a,b);d=min(d,c);float e=max(a,b);e=max(e,c);float f=e-d;float g;float h;float i=(e+d)/2.;if(f==0.){g=0.;h=0.;}else{if(i<0.5){h=f/(e+d);}else{h=f/(2.-d-e);}float j=(((e-a)/6.)+(f/2.))/f;float k=(((e-b)/6.)+(f/2.))/f;float l=(((e-c)/6.)+(f/2.))/f;if(a==e){g=l-k;}else if(b==e){g=(1./3.)+j-l;}else if(c==e){g=(2./3.)+k-j;}if(g<0.){g+=1.;}if(g>1.){g-=1.;}}return vec3(g,h,i);}float b(float b,float c,float d){if(d<0.){d+=1.;}if(d>1.){d-=1.;}if(6.*d<1.){return(b+(c-b)*6.*d);}if(2.*d<1.){return(c);}if(3.*d<2.){return(b+(c-b)*6.*(2./3.-d));}return b;}vec3 c(vec3 c){float d=c.x;float e=c.y;float f=c.z;float g,_G,_B,v1,v2;if(e==0.){g=f;_G=f;_B=f;}else{if(f<0.5){v2=f*(1.+e);}else{v2=(f+e)-(e*f);}v1=2.*f-v2;g=b(v1,v2,d+1./3.);_G=b(v1,v2,d);_B=b(v1,v2,d-1./3.);}return vec3(g,_G,_B);}vec3 d(float d){float e=d+1.;float f=floor(e/65536.);e=e-f*65536.;float g=floor(e/256.);e=e-g*256.;float h=e;return vec3(h,g,f);}void main(){vec4 e=texture2D(tDiffuse,_);if(uHue!=0.){vec3 f=d(uHue);if(!uGray){float g=a(vec3(f.rgb/255.)).r;float h=(e.r*0.3+e.g*0.59+e.b*0.11);e.rgb=c(vec3(g,h,h));}else{vec3 g=vec3(f.rgb/100.);float h=(e.r*g[0]+e.g*g[1]+e.b*g[2]);e.rgb=vec3(h,h,h);}}gl_FragColor=e;}",""].join("\\n")],};function aN(i,e){this.gl=i;this.map=e;this.cache={};this.bind()}aN.prototype.bind=function(){var e=this;this.map.on("update",function(T){var kC=T.changedStatus;if(kC&&kC.onsize_changed){for(var i in e.cache){e.cache[i].lastState.projMatrix=false}}})};aN.prototype._createProgram=function(e,kE){var kK=this.gl;var kJ=kK.createProgram();var kF=br[e];var kQ=kF[1];if(kE&&kE.fShader){kQ=kQ.replace("void main()",kE.fShader+" void main()")}var kG=kK.createShader(kK.FRAGMENT_SHADER);kK.shaderSource(kG,kQ);kK.compileShader(kG);kK.attachShader(kJ,kG);var kM=kF[0];if(kE&&kE.vShader){kM=kM.replace("void main()",kE.vShader+" void main()")}var kP=kK.createShader(kK.VERTEX_SHADER);kK.shaderSource(kP,kM);kK.compileShader(kP);kK.attachShader(kJ,kP);kK.linkProgram(kJ);var kH={};var kN=kK.getProgramParameter(kJ,kK.ACTIVE_ATTRIBUTES);for(var kI=0;kI<kN;kI++){var kD=kK.getActiveAttrib(kJ,kI);kH[kD.name]=kK.getAttribLocation(kJ,kD.name)}var kO={};var kC=kK.getProgramParameter(kJ,kK.ACTIVE_UNIFORMS);for(var kL=0;kL<kC;kL++){var T=kK.getActiveUniform(kJ,kL);kO[T.name]=kK.getUniformLocation(kJ,T.name)}return{program:kJ,attributes:kH,numAttributes:kN,uniforms:kO,lastState:{}}};aN.prototype._createProgramCached=function(i,e){if(!this.cache[i]){this.cache[i]=this._createProgram(i,e)}return this.cache[i]};aN.prototype.removeProgram=function(e){if(this.cache[e]){delete this.cache[e]}};aN.prototype.useProgram=function(kD,e){var kC=this.gl;var T=this._createProgramCached(kD,e);var i=this.currentProgram;if(i!==T){kC.useProgram(T.program);this.currentProgram=T}return T};var e1={};e1.symbol=[{name:"aPosition",components:4,offset:0,type:"Float32"},{name:"aZLevel",components:1,offset:16,type:"Float32"},{name:"aExtend",components:2,offset:20,type:"Float32"},{name:"aLoopOffset",components:2,offset:28,type:"Float32"},{name:"aVertexTextureCoord",components:2,offset:36,type:"Float32"},{name:"aHue",components:1,offset:44,type:"Float32"}];e1.symbolline=[{name:"aPosition",components:2,offset:0,type:"Float32"},{name:"aZLevel",components:1,offset:8,type:"Float32"},{name:"aExtend",components:2,offset:12,type:"Float32"},{name:"aRotationCenter",components:2,offset:20,type:"Float32"},{name:"aRotationAngle",components:1,offset:28,type:"Float32"},{name:"aVertexTextureCoord",components:2,offset:32,type:"Float32"}];e1.arrowComponentsCount=10;e1.arrow=[{name:"a_pos",components:3,offset:0,type:"Float32"},{name:"a_diff",components:2,offset:12,type:"Float32"},{name:"a_normal",components:2,offset:20,type:"Float32"},{name:"a_tex",components:2,offset:28,type:"Float32"},{name:"a_layer_index",components:1,offset:36,type:"Float32"}];e1.fillComponentsCount=8;e1.fill=[{name:"a_pos",components:3,offset:0,type:"Float32"},{name:"a_color",components:4,offset:12,type:"Uint8"},{name:"a_layer_index",components:1,offset:16,type:"Float32"}];e1.overlayLineComponentsCount=12;e1.overlayLine=[{name:"a_pos",components:2,offset:0,type:"Float32"},{name:"a_normal",components:2,offset:8,type:"Float32"},{name:"a_color",components:4,offset:16,type:"Uint8",normalize:true},{name:"a_data",components:4,offset:20,type:"Float32"}];e1.lineComponentsCount=12;e1.line=[{name:"a_pos",components:2,offset:0,type:"Int16"},{name:"a_normal",components:2,offset:4,type:"Int16"},{name:"a_color",components:4,offset:8,type:"Uint8",normalize:true},{name:"a_data",components:4,offset:12,type:"Int16"}];var h7=[0,0,0,256,512,512,512,512,512,512,256,512,512,512,512,512,1024,1024,1024,1024,1024,1024];var iB={grid:af,line:fE,fill:I,guide:aY,block:cl,shadow:eR,debug:gq,arrow:cW,symbol:jY,symbolline:jh,raster:h2,overlayBlock:dp,marker3d:kq,groundoverlay:fd,watermark:hf,light:kf};var fu={3:{start:3},4:{start:4},5:{start:4},6:{start:6},7:{start:6},8:{start:8},9:{start:8},10:{start:10},11:{start:11},12:{start:11},13:{start:11},14:{start:14},15:{start:14},16:{start:16},17:{start:16},18:{start:18},19:{start:18},20:{start:18},21:{start:18},22:{start:18},23:{start:18},24:{start:18},25:{start:18}};var dT=[245,245,245,255];var b3=127;var bY=128;var bV=12;var eI=bV*6;var he=15;var e7=6;var g=10;var jO=g*6;var fp=50;var gk=41;var a4=0;var e2=1;var eL=2;var gh=1;function c4(i){i.preventDefault();if(this._map&&this._map.config.forceReload){setTimeout(function(){window.location.reload()},200)}}function cw(kC,i){var T=this;this._map=kC;this._mapTextureScale=kC.config.textureScale;this._textRenderType=kC.config.textRenderType;this._gridBufferCache={};this._grid3857BufferCache=null;this._debugBufferCache={};this._shadowPosVec3=vec3.fromValues(2,1,1);this._sideLightDirVec3=vec3.fromValues(0,1,2);this._camera=i;this._canvas=this._initCanvas();this._useAntialias=!b5()&&!e9.Browser.ie;this._useSMAA=this._useAntialias&&kC.config.smaa!==false;this._currentTextureIsFull=false;var kD=this.gl=this._getWebGLContext();this._float32ArrayForPolyline=new Float32Array(65535);this._uint16ArrayForPolyline=new Uint16Array(65535);this._textureCache=new aC((b5()||e9.Browser.ie)?64:128,{clearCallback:function(kE){if(kE){kD.deleteTexture(kE)}}});this._labelTextureAtlasOffset={};var e=df.params.maxTextureSize;if(b5()){this._labelTextTextureSize=[4096,Math.min(this._map.config.textureSizeHeight/2,e)]}else{this._labelTextTextureSize=[4096,Math.min(this._map.config.textureSizeHeight,e)]}if(this._textRenderType==="canvas"){this._renderPng8Text=false}else{this._renderPng8Text=true}this._lineLabelBuffer=null;this._fixedLabelBuffer=null;this._iconLabelBuffer=null;this._highlightLabelBuffer=null;this._marker3dVertexBuffer=null;this._markerVertexBuffer=null;this._lyingGuideVertexBuffer=null;this._polylineBufferArray=[{vertex:null,element1:null,vao1:null}];this._polygonBuffer=new Array(20);this._groundBuffer=new Array(20);this._groundoverlayBuffer=new Array(20);this._textTextureManager=new d5.TextTextureManager(kD,{width:this._labelTextTextureSize[0],height:this._labelTextTextureSize[1],unpackAlpha:true});this._lyingGuideTextureManager=new d5.TextTextureManager(kD,{width:1024,height:1024,unpackAlpha:true});this._lyingTextureAtlas=this._lyingGuideTextureManager.getEmptyTexture();this._lyingGuideTextureOffset={};this._lyingGuideTextureCoords={};this._iconTextureManager=new d5.TextTextureManager(kD,{width:1024,height:1024,unpackAlpha:true});this._iconTextureAtlas=this._iconTextureManager.getEmptyTexture();this._iconTextureAtlasOffset={};this._iconTextureAtlasCoords={};this._textureAddToJob={};this._isIdle=false;this._hightLightEnable();this._identityMatrix=mat4.create();this._initialize();this._handleContextStatus();this._stencilMask=null;this.draw()}e9.extend(cw.prototype,{draw:function(kP){var kI=this.gl;var kM=this;var kR=kM._map;var kO=this.mapZoom=kR.getZoom();if(!this.stepZoom){this.stepZoom=kO}kR.beforeRender&&kR.beforeRender();this.createGridBuffer(Math.floor(kO));this._isIdle=kP?kP.idle:false;if(this._isIdle&&this._useSMAA){bt.loadTexture(this,kI);if(this._frameBufferSizeInvalid===true){this.clearPreviousSMAAFramebuffer();this.initSMAAFrameBuffers();this._frameBufferSizeInvalid=false}}else{this._frameBufferSizeInvalid=true}this.projMatrix=this._camera.getProjectionMatrix3D();this.projMatrix2D=this._camera.getProjectionMatrix();this.cameraPosition=this._camera.getPosition();var k8=kR._featureMgr.getResult();var kD=k8.bkData;var kH=k8.eleData;this._stencilMask=kH[9];var k1=kR.getSize();var e=k1.width;var kC=k1.height;this.mapHalfSize=[e/2,kC/2];this.polyZoomRatio=Math.pow(2,18-kO);this.gridTextureScale=kx.mapZoomTileSize[Math.floor(kO)]/128;var kK=kR._displayOptions;this.isFlat=kK.isFlat;if(this._isIdle&&this._smaaInfo.glDrawSMAAReady===true){kI.bindFramebuffer(kI.FRAMEBUFFER,this._smaaPasses[0].framebuffer)}if(this._hightLight){kI.bindFramebuffer(kI.FRAMEBUFFER,this._smaaPasses[0].framebuffer)}this.tileClippintRefer=0;this.showIndoorContour=false;this.currentIndoorUid=null;if(kR._indoorMgr){this.currentIndoorUid=kR._indoorMgr.currentUid}if(this.currentIndoorUid&&kO>=17){this.showIndoorContour=true}kM.clearGLStatus({stencil:true,color:true,depth:true});this._state.enableCap("depthTest");this._state.blendFunc(kI.SRC_ALPHA,kI.ONE_MINUS_SRC_ALPHA,kI.ONE,kI.ONE_MINUS_SRC_ALPHA);this.calShadowPos();kM.clearGLStatus({depth:true});var kU=[];var k6=[];var kT=0;for(var kY=0;kY<kD.length;kY++){if(!kD[kY]){continue}var kX=kD[kY];if(kY>0&&kK.layer===false){continue}if(kX.ontology instanceof cv){if(kX.ontology.doRender()){if(!kX.ontology.isTop&&!kX.ontology.isLowText){this._drawNormalLayer(kX.ontology)}else{if(kX.ontology.isTop){kU.push(kX.ontology)}else{k6.push(kX.ontology)}}}}else{if(kX.ontology instanceof ek){this.drawMVT(kX)}else{if(kX.dataType===2){var kQ=[0,0,0];for(var k7=0;k7<kX.length;k7++){var T=undefined;for(var k5=0;k5<kX[k7].length;k5++){var k2=kX[k7][k5];var k4=k2.tileInfo.useZoom;if(k4!==T){kQ[k7]++;T=k4}}}for(var k7=0;k7<kX.length;k7++){var kS=1;if(k7===1){kS+=kQ[0]+kQ[2]}else{if(k7===2){kS+=kQ[0]}}var kL=kS+kT;kL=this.drawBase(kX[k7],kL,kO,kY,k7===2);var k3=false;for(var k5=0;k5<kX[k7].length;k5++){var k2=kX[k7][k5];if(k2.dataType===2||!k2.dataType){if(k2.renderData&&k2.renderData.base3d){k3=true;this.drawTileBase3D(k2,kO,kL,e2)}}}if(kK.indoor){for(var k5=0;k5<kX[k7].length;k5++){var k2=kX[k7][k5];if(k2.dataType===2||!k2.dataType){if(k2.renderData&&k2.renderData.indoorBase){this.drawIndoorBase(k2,kO);var kW=this._map._indoorMgr;var k0=kW.currentUid;var kV=kW.currentFloor;if(k0&&k2.renderData.indoorData[k0]){var k9={uid:k0,floor:kV};this.drawTileBase3DIndoor(k2,kO,kL,e2,k9)}}}}}if(k3&&!this.isFlat){this.gl.stencilFunc(this.gl.ALWAYS,1<<7,bY);for(var k5=0;k5<kX[k7].length;k5++){var k2=kX[k7][k5];if(k2.dataType===2||!k2.dataType){if(k2.renderData&&k2.renderData.base3d){this.drawTileBase3D(k2,kO,kL,eL);this.drawTileBase3D(k2,kO,kL,eL,true)}}}this.gl.stencilFunc(this.gl.ALWAYS,0,255)}for(var k5=0;k5<kX[k7].length;k5++){var k2=kX[k7][k5];if(k2.dataType===2||!k2.dataType){if(k2.renderData&&k2.renderData.virtual){this.drawTileVirtual(k2,kO)}}}}kT+=kQ[0]+kQ[1]+kQ[2]}else{if(!kX.isTop&&!kX.isLowText){this._drawRasterLayer(kX)}else{if(kX.isTop){kU.push(kX)}else{k6.push(kX)}}}}}}if(!this._map.config.overlayTop){this._drawOverlay(kK,kH)}this.draw3D(kD);this.renderWatermark();if(kR.getTilt()>10){var kJ=kR.pointToPixelIn(kR.getBoundsIn().pointTopLeft).y+100;if(kJ>0&&kR.config.showSky!==false){jK(this,this._identityMatrix,kJ,kR.height,this._skyColor)}}kR.insertRender&&kR.insertRender();if(this._useSMAA&&this._isIdle&&this._smaaInfo.glDrawSMAAReady===true){this.drawSMAA()}if(!this._useSMAA&&this._hightLight&&kR._spotOptions.involve===0){this._hightLightProcess()}for(var k7=0;k7<k6.length;k7++){if(k6[k7] instanceof cv){this._drawNormalLayer(k6[k7])}else{this._drawRasterLayer(k6[k7])}}k6=[];this._state.disableCap("depthTest");this.mvMatrixMarker=this._camera.getMCPlaneMVMatrix();this.mvMatrixMarker[12]=this.mvMatrixMarker[13]=this.mvMatrixMarker[14]=0;this._checkTextureAtlasUsage();var kG=i5(this.cameraPosition[0]);var kF=i5(this.cameraPosition[1]);var kE=i5(this.cameraPosition[2]);this.cameraPosHigh=[kG[0],kF[0],kE[0]];this.cameraPosLow=[kG[1],kF[1],kE[1]];this._state.blendFunc(kI.ONE,kI.ONE_MINUS_SRC_ALPHA);if(kK.poiText&&kH[2].length>0){for(var k7=0;k7<kH[2].length;k7++){if(!kH[2][k7]){continue}for(var k5=0;k5<kH[2][k7].length;k5++){var kN=kH[2][k7][k5];if(kN.lineLabels.length===0){continue}this.drawLineLabelSymbol(kN.lineLabels,this._camera.getModelViewMatrixForLineLabel(kN.tileInfo))}}}if(kH[3].length>0){for(var k7=0;k7<kH[3].length;k7++){if(!kH[3][k7]){continue}this.drawFixedLabelSymbol(kH[3][k7],k7)}}if(kK.poiText&&kH[4].length>0){for(var k7=0;k7<kH[4].length;k7++){if(!kH[4][k7]){continue}this.drawHighlightFixedLabelSymbol(kH[4][k7])}}if(!this._useSMAA&&this._hightLight&&kR._spotOptions.involve===1){this._hightLightProcess()}for(var k7=0;k7<kU.length;k7++){if(kU[k7] instanceof cv){this._drawNormalLayer(kU[k7])}else{this._drawRasterLayer(kU[k7])}}kU=[];if(this._map.config.overlayTop){this._drawOverlay(kK,kH)}if(kK.overlay){this._state.blendFunc(kI.ONE,kI.ONE_MINUS_SRC_ALPHA);var kZ=false;if(kO<12){kZ=true}if(kH[8].length>0){this.drawSymbol(kH[8],{fixPosition:kZ})}if(kH[7].length>0){this.drawMarker3D(kH[7])}}if(kH[5].length>0){this._state.blendFunc(kI.ONE,kI.ONE_MINUS_SRC_ALPHA);this._state.disableCap("depthTest");this.mvMatrixPoly=this._camera.getModelViewMatrixPoly();this.drawGroundOverlay(kH[5],true);this._state.enableCap("depthTest")}if(!this._useSMAA&&this._hightLight&&kR._spotOptions.involve===2){this._hightLightProcess()}kR.afterRender&&kR.afterRender();this._map.dispatchEvent(new fW("ondraw"))},_hightLightEnable:function(){this._hightLight=(!this._useSMAA&&this._map._spotOptions)?this._map._spotOptions.open:false;if(this._hightLight){this.initSMAAFrameBuffers(true)}else{if(this._smaaPasses&&this._smaaPasses.length){this.clearPreviousSMAAFramebuffer()}}},_hightLightProcess:function(){this.drawSMAA(true);this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,null);var i=this._map._spotOptions;var e=jg.getRender(jg.FOCUS);if(gh&&i.focus!==-1&&e&&this._map._polyOverlayBasePoint){this.enableStencilMask(e);iB.light(this,this._smaaBuffer,this._identityMatrix,this._smaaPasses,gH(i.focus)||0,i.gray);this.gl.stencilFunc(this.gl.EQUAL,0,255);iB.light(this,this._smaaBuffer,this._identityMatrix,this._smaaPasses,gH(i.other)||0,i.gray);this.disableStencilMask()}else{if(i.focus===-1){iB.light(this,this._smaaBuffer,this._identityMatrix,this._smaaPasses,gH(i.other)||0,i.gray)}else{iB.light(this,this._smaaBuffer,this._identityMatrix,this._smaaPasses,0)}}},_drawOverlay:function(e,i){this._state.blendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA,this.gl.ONE,this.gl.ONE_MINUS_SRC_ALPHA);if(e.overlay){if(i[0].length>0){this._state.disableCap("depthTest");this.mvMatrixPoly=this._camera.getModelViewMatrixPoly();this.drawPolygon(i[0]);this._state.enableCap("depthTest")}if(i[5].length>0){this._state.blendFunc(this.gl.ONE,this.gl.ONE_MINUS_SRC_ALPHA);this._state.disableCap("depthTest");this.mvMatrixPoly=this._camera.getModelViewMatrixPoly();this.drawGroundOverlay(i[5],false);this._state.enableCap("depthTest");this._state.blendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA,this.gl.ONE,this.gl.ONE_MINUS_SRC_ALPHA)}if(i[1].length>0){this._state.disableCap("depthTest");this.mvMatrixPoly=this._camera.getModelViewMatrixPoly();this.drawPolyline(i[1]);this._state.enableCap("depthTest")}if(i[6].length>0){this._state.disableCap("depthTest");this.mvMatrixPoly=this._camera.getModelViewMatrixPoly();this.drawPrism(i[6]);this._state.enableCap("depthTest")}}this._map.drawOverlay&&this._map.drawOverlay(gl)},_drawNormalLayer:function(i){if(!(i instanceof ee)){this.programMgr.currentProgram=null}this._state.blendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA,this.gl.ONE,this.gl.ONE_MINUS_SRC_ALPHA);this.setLayerDepth(gk);this._state.disableCap("depthTest");this._camera._updatePolyLayerMatrix(i.center);var e=mat4.create(Float64Array);mat4.multiply(e,this.projMatrix,this._camera._modelViewMatrixLayer);i.preRender(this.gl,e);i.render(this.gl,e);i.afterRender(this.gl,e);this._state.enableCap("depthTest")},_drawRasterLayer:function(kF){var kG=this.gl;this._state.disableCap("depthTest");if(kF.boundary){this.enableTileLayerClippingMask(kF.boundary,kF.showRegion)}else{if(this._map.stencil&&this._map.stencil.isMapMask){this.switchStencilMask("on")}}this._state.blendFunc(kG.ONE,kG.ONE_MINUS_SRC_ALPHA);var e=kF.ontology||{};e.opacity=kF.opacity||1;var kC=null;if(kF.png8){e.renderPNG8=true}if(e&&e.isPixelMap&&e.pHashcode){var kE=e.src;kC=this._textureCache.getData(kE);if(!kC||(e.pHashcode!==e.pHashcodeOld)){var kG=this.gl;e.pHashcodeOld=e.pHashcode;kC=d5.utils.createTexture(kG,e.pixelColorMap.canvas);this._textureCache.setData(kE,kC)}if(e.maskPng&&e.hasMaskPng){var kH=this._textureCache.getData(e.maskPng);if(!kH){var kG=this.gl;kH=d5.utils.createTexture(kG,e.maskTextureSource);this._textureCache.setData(e.maskPng,kH)}e.textureMask=kH}}var T=this.getZoomState()===1?0:1;for(var kD=0;kD<kF[T].length;kD++){if(!kF[T][kD]){continue}this.drawRasterTile(kF[T][kD],kC,e)}for(var kD=0;kD<kF[2].length;kD++){if(!kF[2][kD]){continue}this.drawRasterTile(kF[2][kD],kC,e)}this._state.enableCap("depthTest");if(kF.boundary){this.disableTileLayerClippingMask()}else{if(this._map.stencil&&this._map.stencil.isMapMask){this.switchStencilMask("off")}}this._state.blendFunc(kG.SRC_ALPHA,kG.ONE_MINUS_SRC_ALPHA,kG.ONE,kG.ONE_MINUS_SRC_ALPHA)},drawMVT:function(kC){if(!kC.ontology){return}this.setLayerDepth(gk);this._state.disableCap("depthTest");if(!this._grid3857BufferCache){this.createGrid3857BufferCache(256)}for(var e=0;e<3;e++){for(var i=0;i<kC[e].length;i++){var T=kC[e][i];if(!T.tileData||!T.tileData.layers){continue}this.tileGrid3857Scale=Math.pow(2,T.tileInfo.zoom-this.mapZoom);this._processMvtData(T,kC)}}this._state.enableCap("depthTest")},_processMvtData:function(kF,kE){var kG=kF.tileData.layers;if(kE.tileTypeName==="web"){kF.mvMatrix=this._camera.getModelViewMatrix3D(kF.tileInfo)}else{if(kE.tileTypeName==="xyz"){kF.mvMatrix=this._camera.getXYZCustomModelViewMatrix3D(kF.tileInfo,dL.gridScaleFrom3857ToBDMC)}else{return}}for(var kC in kG){var i=kE.ontology.getLayerVisible(kC);if(!i){continue}var kD=kG[kC];this.renderTileClippingMask(kF,true);this.enableTileClippingMask(kF);if(kD.layerType==="Polygon"||kD.layerType==="MultiPolygon"){var e=kD.getRender();for(var T in e){if(T==="fill"){this.drawPolygon(e[T],kF.mvMatrix,kF.clippingTileRefer)}else{if(T==="line"){this.enableTileLineClippingMask(kF);this.drawPolyline(e[T],kF.mvMatrix)}}}}if(kD.layerType==="LineString"||kD.layerType==="MultiLineString"){var e=kD.getRender();for(var T in e){if(T==="line"){this.drawPolyline(e[T],kF.mvMatrix)}}}this.disableTileClippingMask()}},switchStencilMask:function(e,kC,i){var T=this._stencilMask;if(T.length>0&&T[0].isStencilMask){if(e==="on"){if(this._map.stencil.showRegion==="inside"){this.enableStencilMask(T,kC,i)}else{if(this._map.stencil.showRegion==="outside"){this.enableStencilMaskOut(T,i,i)}}}else{if(e==="off"){this.disableStencilMask()}}}},enableStencilMask:function(kD,T,i,e){var kC=this.gl;if(!T){kC.disable(kC.DEPTH_TEST)}if(!i){kC.clear(kC.STENCIL_BUFFER_BIT)}kC.stencilFunc(kC.ALWAYS,1,255);if(e){this._state.stencilOp(kC.KEEP,kC.REPLACE,kC.REPLACE)}else{this._state.stencilOp(kC.KEEP,kC.KEEP,kC.REPLACE)}kC.stencilMask(255);this._state.colorMask(0,0,0,0);this.mvMatrixPoly=this._camera.getModelViewMatrixPoly();this.drawPolygon(kD);this._state.colorMask(1,1,1,1);kC.stencilFunc(kC.EQUAL,1,255);kC.stencilMask(0)},enableStencilMaskOut:function(kC,i,e){var T=this.gl;if(!e){T.clear(T.STENCIL_BUFFER_BIT)}if(!i){T.disable(T.DEPTH_TEST)}T.stencilFunc(T.ALWAYS,1,255);this._state.stencilOp(T.KEEP,T.KEEP,T.REPLACE);T.stencilMask(255);this._state.colorMask(0,0,0,0);this.mvMatrixPoly=this._camera.getModelViewMatrixPoly();this.drawPolygon(kC);this._state.colorMask(1,1,1,1);T.stencilFunc(T.NOTEQUAL,1,255);T.stencilMask(0)},disableStencilMask:function(e){var i=this.gl;i.clear(i.STENCIL_BUFFER_BIT);i.stencilMask(255);i.stencilFunc(i.ALWAYS,1,255);if(e){i.disable(i.DEPTH_TEST)}else{i.enable(i.DEPTH_TEST)}},enableTileLayerClippingMask:function(T,e){var i=this.gl;i.stencilFunc(i.ALWAYS,1,255);this._state.stencilOp(i.KEEP,i.KEEP,i.REPLACE);i.stencilMask(255);i.clear(i.STENCIL_BUFFER_BIT);this._state.colorMask(0,0,0,0);this.mvMatrixPoly=this._camera.getModelViewMatrixPoly();this.overlayToPolygonGl(T);if(e!=="outside"){i.stencilFunc(i.EQUAL,1,255)}else{i.stencilFunc(i.NOTEQUAL,1,255)}i.stencilMask(0);this._state.colorMask(1,1,1,1)},disableTileLayerClippingMask:function(){var e=this.gl;e.clear(e.STENCIL_BUFFER_BIT);e.stencilMask(255);e.stencilFunc(e.ALWAYS,1,255)},overlayToPolygonGl:function(kG){var e=[];for(var kE=0;kE<kG.length;kE++){var kD=kG[kE];var T=kD.getFillStyleForGL();var kF=kD.buildFillVertex(hX);var kC=[T,kF[0],kF[1]];kC.hashCode=kD.hashCode;kC.hasMultipleParts=kD.hasMultipleParts;e.push(kC)}this.drawPolygon(e)},getZoomState:function(){var T=this._map;var i=T.getZoom();var e=i-this.lastZoom;if(e>0){this.zoomState=1}else{if(e<0){this.zoomState=-1}}this.lastZoom=i;return this.zoomState},calShadowPos:function(){this.isDrawShadow=false;var i=this._map;var e=!(typeof i.config.style==="string");if(e||this.mapZoom<18){return}var T=i.getSolarInfo();if(fl(T.solarAltitude)>1){this.isDrawShadow=true;this._shadowPosVec3[0]=Math.sin(T.solarAzimuth);this._shadowPosVec3[1]=Math.cos(T.solarAzimuth);if(T.centerPosition==="south"){this._shadowPosVec3[1]=-this._shadowPosVec3[1]}this._shadowPosVec3[2]=Math.tan(T.solarAltitude)*0.5+1.5;this._sideLightDirVec3[0]=this._shadowPosVec3[0];this._sideLightDirVec3[1]=this._shadowPosVec3[1];this._sideLightDirVec3[2]=-this._shadowPosVec3[2]}},clearPreviousSMAAFramebuffer:function(){var kC=this.gl;for(var e=0;e<this._smaaPasses.length;e++){kC.deleteFramebuffer(this._smaaPasses[e].framebuffer);kC.deleteTexture(this._smaaPasses[e].texture);kC.deleteRenderbuffer(this._smaaPasses[e].renderbuffer)}this._smaaPasses=[];if(this._smaaBuffer){var T=this._smaaBuffer;T.vao1&&T.vao1.destroy(kC);T.vao2&&T.vao2.destroy(kC);T.vao3&&T.vao3.destroy(kC);T.vertex&&T.vertex.destroy(kC);this._smaaBuffer=null}},initSMAAFrameBuffers:function(T){this._smaaPasses=[];var kC=T?1:3;for(var e=0;e<kC;e++){var kD=this.createFramebuffer();this._smaaPasses.push({framebuffer:kD[0],texture:kD[1],renderbuffer:kD[2]})}},createFramebuffer:function(){var kC=this.gl;var T=kC.createFramebuffer();kC.bindFramebuffer(kC.FRAMEBUFFER,T);T.width=kC.drawingBufferWidth;T.height=kC.drawingBufferHeight;var i=kC.createTexture();kC.bindTexture(kC.TEXTURE_2D,i);kC.texParameteri(kC.TEXTURE_2D,kC.TEXTURE_MAG_FILTER,kC.LINEAR);kC.texParameteri(kC.TEXTURE_2D,kC.TEXTURE_MIN_FILTER,kC.LINEAR);kC.texParameteri(kC.TEXTURE_2D,kC.TEXTURE_WRAP_S,kC.CLAMP_TO_EDGE);kC.texParameteri(kC.TEXTURE_2D,kC.TEXTURE_WRAP_T,kC.CLAMP_TO_EDGE);kC.texImage2D(kC.TEXTURE_2D,0,kC.RGBA,T.width,T.height,0,kC.RGBA,kC.UNSIGNED_BYTE,null);kC.framebufferTexture2D(kC.FRAMEBUFFER,kC.COLOR_ATTACHMENT0,kC.TEXTURE_2D,i,0);var e=kC.createRenderbuffer();kC.bindRenderbuffer(kC.RENDERBUFFER,e);kC.renderbufferStorage(kC.RENDERBUFFER,kC.DEPTH_STENCIL,T.width,T.height);kC.framebufferRenderbuffer(kC.FRAMEBUFFER,kC.DEPTH_STENCIL_ATTACHMENT,kC.RENDERBUFFER,e);kC.bindTexture(kC.TEXTURE_2D,null);kC.bindRenderbuffer(kC.RENDERBUFFER,null);kC.bindFramebuffer(kC.FRAMEBUFFER,null);return[T,i,e]},drawSMAA:function(kC){if(!this._smaaBuffer){var i=this._width;var T=this._height;var e=new Float32Array([0,0,-900,0,0,i,0,-900,1,0,i,T,-900,1,1,0,0,-900,0,0,i,T,-900,1,1,0,T,-900,0,1]);this._smaaBuffer={vertex:new B(e,{components:5,members:[{name:"position",components:3,offset:0,type:"Float32"},{name:"uv",components:2,offset:12,type:"Float32"}]},B.BufferType.VERTEX),vao1:new dY(),vao2:new dY(),vao3:new dY()}}!kC&&bt.draw(this,this._smaaBuffer,this._identityMatrix,this._smaaPasses,this._width,this._height)},createBlockData:function(i){var e=new B(i.vertex,{components:7,members:[{name:"a_pos",components:3,offset:0,type:"Float32"},{name:"a_normal",components:3,offset:12,type:"Float32"},{name:"a_color",components:4,offset:24,type:"Uint8",normalize:true}]},B.BufferType.VERTEX);return{vao1:new dY(),vertex:e,element1:new B(i.index,{components:1},B.BufferType.ELEMENT)}},createOverlayBlockData:function(T,i){var e=new B(T.vertex,{components:7,members:[{name:"a_pos",components:3,offset:0,type:"Float32"},{name:"a_normal",components:3,offset:12,type:"Float32"},{name:"a_color",components:4,offset:24,type:"Uint8",normalize:true}]},B.BufferType.VERTEX);return{vao1:new dY(),vertex:e,element1:new B(T.index,{components:1},B.BufferType.ELEMENT)}},createArrowData:function(e){return{vao1:new dY(),element1:new B(e[1],{components:1},B.BufferType.ELEMENT),vertex:new B(e[0],{components:e1.arrowComponentsCount,members:e1.arrow},B.BufferType.VERTEX)}},createGuideData:function(e){},createGroundOverlayData:function(kG,kH){if(!kG){return null}var kI=[0,0,1,0,1,1,0,1];var kF=kG.vertex;var e=[];var T={};var kC=kG.overlay;if(kC.isPixelMap&&kC.pHashcode){if(!kC.maskUV){kC.maskUV=kC.buildFillMaskVertex()}var kJ=kC.maskUV;for(var kD=0;kD<kF.length;kD+=2){e.push(kF[kD]);e.push(kF[kD+1]);e.push(kI[kD]);e.push(kI[kD+1]);e.push(kJ[kD]);e.push(kJ[kD+1])}kG.finnalVertex=new Float32Array(e);T={components:6,members:[{name:"a_pos",components:2,offset:0,type:"Float32"},{name:"a_texture_coord",components:2,offset:8,type:"Float32"},{name:"a_mask_coord",components:2,offset:16,type:"Float32"}]}}else{for(var kD=0;kD<kF.length;kD+=2){e.push(kF[kD]);e.push(kF[kD+1]);e.push(kI[kD]);e.push(kI[kD+1])}kG.finnalVertex=new Float32Array(e);T={components:4,members:[{name:"a_pos",components:2,offset:0,type:"Float32"},{name:"a_texture_coord",components:2,offset:8,type:"Float32"}]}}var kE=this._groundoverlayBuffer;this._groundoverlayBuffer=kE.vertex=new B(kG.finnalVertex,T,B.BufferType.VERTEX);kE.vao1=new dY();kE.textureType=kG.textureSource;kE.element1=new B(kG.index,{components:1},B.BufferType.ELEMENT);return kE},createOverlayFillData:function(T,e,i){var kC=this._polygonBuffer[i];if(!kC){kC={};kC.vertex=new B(T[1],{components:2,members:[{name:"a_pos",components:2,offset:0,type:e}]},B.BufferType.VERTEX);kC.vao1=new dY();kC.element1=new B(T[2],{components:1},B.BufferType.ELEMENT)}else{kC.vao1.update(this.gl,kC.vertex,T[1],T[1].length,kC.element1,T[2],T[2].length)}return kC},createFillData:function(kD){if(!kD[0]){return null}var T=new B(kD[0],{components:e1.fillComponentsCount,members:e1.fill},B.BufferType.VERTEX);var e={vao1:new dY(),vertex:T,element1:new B(kD[1],{components:1},B.BufferType.ELEMENT)};if(kD[2]){e.border=[];for(var kC=0;kC<kD[2].length;kC++){e.border.push({element1:new B(kD[2][kC].styleData[1],{components:1},B.BufferType.ELEMENT),vao1:new dY(),vertex:this.createLineBuffer(null,kD[2][kC].styleData[0],false)})}}return e},createLineBuffer:function(e,T,i){if(T){if(e){if(e.length>T.length){T=new Float32Array(e.length)}T.set(e)}}if(i){return new B(T,{components:e1.overlayLineComponentsCount,members:e1.overlayLine},B.BufferType.VERTEX)}else{return new B(T,{components:e1.lineComponentsCount,members:e1.line},B.BufferType.VERTEX)}},createLineData:function(i){var e={};e.vertex=this.createLineBuffer(null,i[0],false);e.element1=new B(i[1],{components:1},B.BufferType.ELEMENT);e.vao1=new dY();return e},createPolylineData:function(kC){var kG=[];for(var T=0;T<kC.length;T++){var kD=kC[T].styleData[0];var e=kC[T].styleData[1];if(kD.length===0){continue}var kF={};if(!this._polylineBufferArray[T]){this._polylineBufferArray[T]={vertex:null,element1:null,vao1:null}}var kE=this._polylineBufferArray[T];kE.hasMultipleParts=kC[T].hasMultipleParts;kE.__index=T;if(!kE.vertex){kE.vertex=this.createLineBuffer(kD,this._float32ArrayForPolyline,true)}if(e.length>this._uint16ArrayForPolyline.length){this._uint16ArrayForPolyline=new Uint16Array(e.length)}this._uint16ArrayForPolyline.set(e);if(!kE.element1){kE.element1=new B(this._uint16ArrayForPolyline,{components:1},B.BufferType.ELEMENT,e.length)}if(!kE.vao1){kE.vao1=new dY()}else{if(kD.length>this._float32ArrayForPolyline.length){this._float32ArrayForPolyline=new Float32Array(kD)}else{this._float32ArrayForPolyline.set(kD)}kE.vao1.update(this.gl,kE.vertex,this._float32ArrayForPolyline,kD.length,kE.element1,this._uint16ArrayForPolyline,e.length)}kG.push(kE)}if(kG.length===0){return null}return kG},createLabelData:function(kF,kT,kS,kE){if(kF.length===0){return}var k3=this._labelTextTextureSize;var kM=0;var kC=0;var kY=kF.length;var kW=this.gl;var k1=this[kS];var kN=0;var k4=eI;var kZ=bV;if(kE){k4=jO;kZ=g}for(var kX=0;kX<kY;kX++){var kO=kF[kX];if(!kO||!kO.renderData){continue}var kD=kO.textureSource;if(!kD){continue}var T=kO.renderData.vertex;kN+=T.length/k4}var kL=kN*k4;if(kL>this._labelVertexBuffer.length){this._labelVertexBuffer=new Float32Array(kL);if(k1){k1.vao.destroy(kW);k1.destroy(kW);k1=this[kS]=null}}var kI=this._iconLabelBuffer;if(kL>this._labelIconVertexBuffer.length){this._labelIconVertexBuffer=new Float32Array(kL);if(kI){kI.vao.destroy(kW);kI.destroy(kW);kI=this._iconLabelBuffer=null}}for(var kX=0;kX<kY;kX++){var kO=kF[kX];if(!kO){continue}if(!kO.renderData&&kO.iconRenderData){if(kC+k4<this._labelIconVertexBuffer.length){this._labelIconVertexBuffer.set(kO.iconRenderData.vertex,kC);kC+=k4}continue}var T=kO.renderData.vertex;var kP=kO.renderData.textureCoord;var kD=kO.textureSource;if(!kD){continue}var e=kD.width;var kR=kO.textureHeight||kD.height;var kK=this._labelTextureAtlasOffset[kD.id];if(!kK&&!this._textureAddToJob[kD.id]&&this._currentTextureIsFull===false){if(!this._labelTextTextureAtlas){this._labelTextTextureAtlas=this._textTextureManager.getEmptyTexture()}kK=this._labelTextTextureAtlas.addTexture(kD,kR);if(kK===false){this._map.fire(new fW("onlayer_clear"));return}this._labelTextureAtlasOffset[kD.id]=kK}if(kK){var kQ=kZ/2;var kH=9;if(kE){kH=8}for(var kV=0,kU=T.length;kV<kU;kV+=kZ){T[kV+kH]=kP[kV/kQ]*e/k3[0]+kK.width;T[kV+kH+1]=kP[kV/kQ+1]*kR/k3[1]+kK.height}this._labelVertexBuffer.set(T,kM);kM+=T.length;if(kO.iconRenderData){if(kC+k4<this._labelIconVertexBuffer.length){this._labelIconVertexBuffer.set(kO.iconRenderData.vertex,kC);kC+=k4}}}}if(kM===0&&kC===0){return}var k0=null;if(kM>0){if(!k1){var kG=e1.symbol;if(kE){kG=e1.symbolline}k1=this[kS]=new B(this._labelVertexBuffer,{components:kZ,members:kG},B.BufferType.VERTEX,kM/kZ);this[kS].vao=new dY()}else{this[kS].vao.update(this.gl,k1,this._labelVertexBuffer,kM/kZ)}}var kJ=null;if(kC>0){kJ=new dY();if(!kI){kI=this._iconLabelBuffer=new B(this._labelIconVertexBuffer,{components:bV,members:e1.symbol},B.BufferType.VERTEX,kC/bV);kI.vao=new dY()}else{kI.vao.update(this.gl,kI,this._labelIconVertexBuffer,kC/bV)}}var k2=null;if(this._labelTextTextureAtlas){k2=this._labelTextTextureAtlas.getTexture()}return{vao:this[kS]?this[kS].vao:null,vaoIcon:this._iconLabelBuffer?this._iconLabelBuffer.vao:null,vertex:kM>0?k1:null,texture:k2,iconVertex:kC>0?kI:null,iconTexture:this._iconTextureAtlas.getTexture()}},_addToAsyncJob:function(e){if(this._textureAddToJob[e.id]){return}var T=this;var i=(function(kC){return function(){delete T._textureAddToJob[kC.id];if(T._currentTextureIsFull){return}if(!T._labelTextTextureAtlas&&T._textTextureManager){T._labelTextTextureAtlas=T._textTextureManager.getEmptyTexture()}if(!T._labelTextTextureAtlas){return}var kD=kC.height;var kE=T._labelTextTextureAtlas.addTexture(kC,kD);if(kE===false){T._map.fire(new fW("onlayer_clear"));return}T._labelTextureAtlasOffset[kC.id]=kE;T._map.dispatchEvent(new fW("onrefresh"))}})(e);this._textureJobScheduler.addJob(i);this._textureAddToJob[e.id]=true},createMarker3dData:function(e){if(e.length===0){return null}var kD=e.length*he;if(kD>this._labelVertexBuffer3D.length){this._labelVertexBuffer3D=new Float32Array(kD);if(this._marker3dVertexBuffer){this._marker3dVertexBuffer.vao.destroy(this.gl);this._marker3dVertexBuffer.destroy(this.gl);this._marker3dVertexBuffer=null}}var kS=0;for(var kO=0,kK=e.length;kO<kK;kO++){var kJ=e[kO].renderData;var kC=e[kO].textureSource;var kF=[0,0,0,0];var kI=e[kO].overlay;var kQ=kI._config.icon;if(kJ.finalVertexData&&!kQ.isReDraw){this._labelVertexBuffer3D.set(kJ.finalVertexData,kS);kS+=he;continue}kJ.finalVertexData=[];var kE=kJ.vertex;if(!kE){continue}if(kC){var kP=kQ.imageUrl;if(kQ.ratio>1&&kQ.srcSetObject["2x"]){kP=kQ.srcSetObject["2x"]}if(!kP&&kQ.imageDom){kP=kQ.imageDom.id}if(!kP&&kQ.id){kP=kQ.id}var T=kI.textureCoordGLMap;if(!T){var kM=this._imageMergedOffset[kP];if(!kM){kC.id=kP;kM=this.textureAtlasMarker.addTexture(kC);if(kM===false){this._map.fire(new fW("onlayer_clear"));return}this._imageMergedOffset[kP]=kM}var kH=new jo(kC.width,kC.height);if(kQ.imageSize){kQ.ratio=kC.width/kQ.imageSize.width}T=this._calcTextureCoords(kH,kQ.size,kQ.imageOffset,kM,kQ.ratio);kI.textureCoordGLMap=T}kF=[T[0],T[1],T[4],T[5]]}if(T&&kQ.isReDraw&&kQ.render){var kG=kQ.render(this._map);if(kG){kQ.update();var kT=kQ.data;kT.id=kC.id;if(kT.width===kC.width&&kT.height===kC.height){this.textureAtlasMarker.updateTexture(kT)}}}for(var kN=0;kN<kE.length;kN++){for(var kL=0;kL<he-4;kL++){kJ.finalVertexData.push(kE[kN][kL])}kJ.finalVertexData.push(kF[0],kF[1],kF[2],kF[3])}this._labelVertexBuffer3D.set(kJ.finalVertexData,kS);kS+=he}var kR=this._marker3dVertexBuffer;if(!kR){this._marker3dVertexBuffer=kR=new B(this._labelVertexBuffer3D,{components:15,members:[{name:"a_pos",components:4,offset:0,type:"Float32"},{name:"a_height",components:1,offset:16,type:"Float32"},{name:"a_color",components:4,offset:20,type:"Float32"},{name:"a_size",components:1,offset:36,type:"Float32"},{name:"a_shape",components:1,offset:40,type:"Float32"},{name:"a_texture_coord",components:4,offset:44,type:"Float32"}]},B.BufferType.VERTEX,kS/he);this._marker3dVertexBuffer.vao=new dY()}else{this._marker3dVertexBuffer.vao.update(this.gl,kR,this._labelVertexBuffer3D,kS/he)}return{vao:this._marker3dVertexBuffer.vao,vertex:kR,texture:kC?this.textureAtlasMarker.getTexture():null}},createMarkerData:function(kR){if(kR.length===0){return null}var kC=kR.length*eI;if(kC>this._labelVertexBuffer.length){this._labelVertexBuffer=new Float32Array(kC);if(this._markerVertexBuffer){this._markerVertexBuffer.vao.destroy(this.gl);this._markerVertexBuffer.destroy(this.gl);this._markerVertexBuffer=null}}var kP=0;for(var kL=0,kI=kR.length;kL<kI;kL++){var kE=kR[kL].overlay;if(kE._visible===false){continue}var kH=kR[kL].renderData;var kN=kE._config.icon;if(kH.finalVertexData&&!kN.isReDraw){this._labelVertexBuffer.set(kH.finalVertexData,kP);kP+=eI;continue}kH.finalVertexData=[];var kD=kH.vertex;if(!kD){continue}var T=kR[kL].textureSource;var kM=kN.imageUrl;if(kN.ratio>1&&kN.srcSetObject["2x"]){kM=kN.srcSetObject["2x"]}if(!kM&&kN.imageDom){kM=kN.imageDom.id}if(!kM&&kN.id){kM=kN.id}var e=kE.textureCoordGLMap;if(!e){var kJ=this._imageMergedOffset[kM];if(!kJ){T.id=kM;kJ=this.textureAtlasMarker.addTexture(T);if(kJ===false){this._map.fire(new fW("onlayer_clear"));return}this._imageMergedOffset[kM]=kJ}var kG=new jo(T.width,T.height);if(kN.imageSize){kN.ratio=T.width/kN.imageSize.width}e=this._calcTextureCoords(kG,kN.size,kN.imageOffset,kJ,kN.ratio);kE.textureCoordGLMap=e}if(e&&kN.isReDraw&&kN.render){var kF=kN.render(this._map);if(kF){kN.update();var kQ=kN.data;kQ.id=T.id;if(kQ.width===T.width&&kQ.height===T.height){this.textureAtlasMarker.updateTexture(kQ)}}}for(var kK=0;kK<kD.length;kK++){kH.finalVertexData.push(kD[kK][0],kD[kK][1],kD[kK][2],kD[kK][3],0,kD[kK][4],kD[kK][5],0,0,e[kK*2],e[kK*2+1],0)}this._labelVertexBuffer.set(kH.finalVertexData,kP);kP+=eI}var kO=this._markerVertexBuffer;if(!kO){this._markerVertexBuffer=kO=new B(this._labelVertexBuffer,{components:bV,members:e1.symbol},B.BufferType.VERTEX,kP/bV);this._markerVertexBuffer.vao=new dY()}else{this._markerVertexBuffer.vao.update(this.gl,kO,this._labelVertexBuffer,kP/bV)}return{vao:this._markerVertexBuffer.vao,vertex:kO,texture:this.textureAtlasMarker.getTexture()}},_calcTextureCoords:function(kG,kJ,kO,kI,i){if(!kG||!kJ||!kO||!kI){}i=i||1;var T=this.textureAtlasMarker.getSize();var kH=-kO.width*i;var e=-kO.height*i;var kN=-kH/T.width+kI.width;var kF=(kG.height+e-kJ.height*i)/T.height+kI.height;var kM=(-kH+kJ.width*i)/T.width+kI.width;var kE=kF;var kL=kM;var kD=(kG.height+e)/T.height+kI.height;var kK=kN;var kC=kD;return[kN,kF,kM,kE,kL,kD,kN,kF,kL,kD,kK,kC]},createData:function(kE){var kG={};var kF=kE.renderData;var e=kE.tileInfo;if(kF.base){kG.base=[];for(var T=0;T<kF.base.length;T++){var kD=kF.base[T];var kC=kD.type;if(kC==="fill"){kG.base.push(this.createFillData(kD.data,e));a2.addDrawIntoAreaSpots(e,kD)}else{if(kC==="line"){kG.base.push(this.createLineData(kD.data))}}}}if(kF.base3d){kG.base3d=[];for(var T=0;T<kF.base3d.length;T++){var kD=kF.base3d[T];var kC=kD.type;if(kC==="fill"){a2.addDrawIntoAreaSpots(e,kD);kG.base3d.push(this.createFillData(kD.data))}else{if(kC==="line"){kG.base3d.push(this.createLineData(kD.data))}else{if(kC==="arrow"){kG.base3d.push(this.createArrowData(kD.data))}else{if(kC==="block"){kG.base3d.push(this.createBlockData(kD.data))}}}}}}if(kF.virtual){kG.virtual=[];for(var T=0;T<kF.virtual.length;T++){var kD=kF.virtual[T];var kC=kD.type;if(kC==="fill"){kG.virtual.push(this.createFillData(kD.data))}else{if(kC==="line"){kG.virtual.push(this.createLineData(kD.data))}}}}if(kF.building3d){a2.addDrawIntoAreaSpots(e,kF.building3d);kG.building3d=this.createBlockData(kF.building3d)}if(kF.building3dMesh){kG.building3dMesh=this.createBlockData(kF.building3dMesh)}if(kF.indoorBase){kG.indoorBase=[];for(var T=0;T<kF.indoorBase.length;T++){var kD=kF.indoorBase[T];var kC=kD.type;if(kC==="fill"){kG.indoorBase.push(this.createFillData(kD.data))}else{if(kC==="line"){kG.indoorBase.push(this.createLineData(kD.data))}else{if(kC==="guide"){}}}}}if(kF.indoorBaseContour){kG.indoorBaseContour=[];for(var T=0;T<kF.indoorBaseContour.length;T++){var kD=kF.indoorBaseContour[T];kG.indoorBaseContour.push(this.createLineData(kD.data))}}if(kF.indoorArea3D){kG.indoorArea3D=[];for(var T=0;T<kF.indoorArea3D.length;T++){kG.indoorArea3D.push(this.createBlockData(kF.indoorArea3D[T]))}}if(kF.indoorBorder3D){kG.indoorBorder3D=[];for(var T=0;T<kF.indoorBorder3D.length;T++){kG.indoorBorder3D.push(this.createLineData(kF.indoorBorder3D[T].data))}}return kG},destroyData:function(e){if(!e){return}var i=this.gl;e.vao1&&e.vao1.destroy(i);e.vertex&&e.vertex.destroy(i);e.element1&&e.element1.destroy(i)},destroyCache:function(kD){if(!kD){return}for(var T in kD){if(T!=="_key_"&&kD.hasOwnProperty(T)){if(T==="building3d"){this.destroyData(kD[T])}else{var kC=kD[T].length;for(var e=0;e<kC;e++){this.destroyData(kD[T][e])}}}}},createDataFromCache:function(i){var e=this.calcBufferKey(i);if(!this._cache.getData(e)){this._cache.setData(e,this.createData(i))}return this._cache.getData(e)},calcBufferKey:function(kD){var e=kD.tileInfo;var kC=kD.mapType+"_"+e.style+"_"+e.col+"_"+e.row+"_"+e.useZoom;if(kD.renderData&&kD.renderData.indoorData){var kE=kD.renderData.indoorData;var i=[];for(var T in kE){i.push(kE[T].currentFloor)}kC=kC+"_"+i.join("_")}return kC},draw3D:function(e){this.setLayerDepth(gk+1);var i=this._map._displayOptions;if(this._map.getTilt()>0&&i.indoor){this.drawArea3D(e);this.drawArea3DBorder(e)}this.drawBuildings(e)},drawBuildings:function(T){var kG=this._map;if(kG._displayOptions.building===false){return}if(!T[0]){return}var e=false;var kE=T[0].length;for(var kD=0;kD<kE;kD++){for(var kC=0;kC<T[0][kD].length;kC++){if(T[0][kD][kC]&&T[0][kD][kC].renderData&&(T[0][kD][kC].renderData.building3d||T[0][kD][kC].renderData.building3dMesh)){e=true;break}}}if(!e){return}var kF=this._stencilMask;if(this._map.stencil&&this._map.stencil.isBuildingMask){if(kF.length>0&&kF[0].isStencilMask&&this._map.stencil.showRegion==="inside"){this.enableStencilMask(kF,true);this._state.colorMask(false,false,false,false);kg(this,this._sideLightDirVec3,true);for(var kD=0;kD<T[0].length;kD++){this.drawBuildingsTile(T[0][kD],"building3d",false);this.drawBuildingsTile(T[0][kD],"building3dMesh",false)}this._state.colorMask(true,true,true,true);for(var kD=0;kD<T[0].length;kD++){this.drawBuildingsTile(T[0][kD],"building3d",true)}kg(this,this._sideLightDirVec3,false);for(var kD=0;kD<T[0].length;kD++){this.drawBuildingsTile(T[0][kD],"building3dMesh",true)}this.disableStencilMask();if(this.isDrawShadow===true){this.gl.clear(this.gl.STENCIL_BUFFER_BIT);this.gl.stencilFunc(this.gl.ALWAYS,1,255);this._state.stencilOp(this.gl.KEEP,this.gl.KEEP,this.gl.REPLACE);this._state.colorMask(false,false,false,false);this.mvMatrixPoly=this._camera.getModelViewMatrixPoly();this.drawPolygon(kF);this._state.stencilOp(this.gl.KEEP,this.gl.KEEP,this.gl.DECR);for(var kD=0;kD<T[0].length;kD++){this.drawBuildingsTile(T[0][kD],"building3d",true)}kg(this,this._sideLightDirVec3,false);for(var kD=0;kD<T[0].length;kD++){this.drawBuildingsTile(T[0][kD],"building3dMesh",true)}this._state.colorMask(true,true,true,true);this.gl.stencilFunc(this.gl.NOTEQUAL,0,255);this.setLayerDepth(gk);this._state.disableCap("depthTest");ff(this,this._shadowPosVec3);for(var kD=0;kD<T[0].length;kD++){this.drawShadow(T[0][kD])}this._state.enableCap("depthTest")}}else{if(kF.length>0&&kF[0].isStencilMask&&this._map.stencil.showRegion==="outside"){this.enableStencilMaskOut(kF,true);this._state.colorMask(false,false,false,false);kg(this,this._sideLightDirVec3,true);for(var kD=0;kD<T[0].length;kD++){this.drawBuildingsTile(T[0][kD],"building3d",false);this.drawBuildingsTile(T[0][kD],"building3dMesh",false)}this._state.colorMask(true,true,true,true);for(var kD=0;kD<T[0].length;kD++){this.drawBuildingsTile(T[0][kD],"building3d",true)}kg(this,this._sideLightDirVec3,false);for(var kD=0;kD<T[0].length;kD++){this.drawBuildingsTile(T[0][kD],"building3dMesh",true)}this.disableStencilMask();if(this.isDrawShadow===true){this.gl.clear(this.gl.STENCIL_BUFFER_BIT);this.gl.stencilFunc(this.gl.ALWAYS,1,255);this._state.stencilOp(this.gl.KEEP,this.gl.KEEP,this.gl.REPLACE);this._state.colorMask(false,false,false,false);this.mvMatrixPoly=this._camera.getModelViewMatrixPoly();this.drawPolygon(kF);for(var kD=0;kD<T[0].length;kD++){this.drawBuildingsTile(T[0][kD],"building3d",true)}kg(this,this._sideLightDirVec3,false);for(var kD=0;kD<T[0].length;kD++){this.drawBuildingsTile(T[0][kD],"building3dMesh",true)}this._state.colorMask(true,true,true,true);this.gl.stencilFunc(this.gl.NOTEQUAL,1,255);this.setLayerDepth(gk);this._state.disableCap("depthTest");ff(this,this._shadowPosVec3);for(var kD=0;kD<T[0].length;kD++){this.drawShadow(T[0][kD])}this._state.enableCap("depthTest")}}}}else{this._state.colorMask(false,false,false,false);kg(this,this._sideLightDirVec3,true);for(var kD=0;kD<T[0].length;kD++){this.drawBuildingsTile(T[0][kD],"building3d",false);this.drawBuildingsTile(T[0][kD],"building3dMesh",false)}this._state.colorMask(true,true,true,true);this.gl.stencilFunc(this.gl.ALWAYS,1<<7,bY);this._state.stencilOp(this.gl.KEEP,this.gl.KEEP,this.gl.REPLACE);for(var kD=0;kD<T[0].length;kD++){this.drawBuildingsTile(T[0][kD],"building3d",true)}kg(this,this._sideLightDirVec3,false);for(var kD=0;kD<T[0].length;kD++){this.drawBuildingsTile(T[0][kD],"building3dMesh",true)}if(this.isDrawShadow===true){this.gl.stencilFunc(this.gl.NOTEQUAL,1<<7,bY);this.setLayerDepth(gk);this._state.disableCap("depthTest");ff(this,this._shadowPosVec3);for(var kD=0;kD<T[0].length;kD++){this.drawShadow(T[0][kD])}this._state.enableCap("depthTest")}}this._state.stencilOp(this.gl.KEEP,this.gl.KEEP,this.gl.KEEP);this.gl.stencilFunc(this.gl.ALWAYS,0,255)},drawBuildingsTile:function(kF,kC,T){for(var kE=0;kE<kF.length;kE++){var kD=kF[kE];if(kD.status!=="ready"){continue}var e=this.createDataFromCache(kD);if(e[kC]){kD.mvMatrix=this._camera.getModelViewMatrix3D(kD.tileInfo);iB.block(this,kD,e[kC],T)}}},drawArea3D:function(T){var kF=this._map;if(!T[0]){return}var e=false;var kE=T[0].length;for(var kD=0;kD<kE;kD++){for(var kC=0;kC<T[0][kD].length;kC++){if(T[0][kD][kC]&&T[0][kD][kC].renderData&&T[0][kD][kC].renderData.indoorArea3D){e=true;break}}}if(!e){return}kg(this,this._sideLightDirVec3,true);if(this._map.stencil&&this._map.stencil.isBuildingMask){this.switchStencilMask("on")}for(var kD=0;kD<T[0].length;kD++){this.drawArea3DTile(T[0][kD],true)}if(this._map.stencil&&this._map.stencil.isBuildingMask){this.switchStencilMask("off")}},drawArea3DTile:function(kF,kC){for(var kE=0;kE<kF.length;kE++){var kD=kF[kE];if(kD.status!=="ready"){continue}var e=this.createDataFromCache(kD);if(!e.indoorArea3D){continue}kD.mvMatrix=this._camera.getModelViewMatrix3D(kD.tileInfo);for(var T=0;T<e.indoorArea3D.length;T++){iB.block(this,kD,e.indoorArea3D[T],kC)}}},drawArea3DBorder:function(kH,kJ){var e=this._map;if(!kH[0]){return}var T=false;var kK=kH[0].length;for(var kF=0;kF<kK;kF++){for(var kE=0;kE<kH[0][kF].length;kE++){if(kH[0][kF][kE]&&kH[0][kF][kE].renderData&&kH[0][kF][kE].renderData.indoorBorder3D){T=true;break}}}if(!T){return}if(this._map.stencil&&this._map.stencil.isBuildingMask){this.switchStencilMask("on")}for(var kC=0;kC<kH[0].length;kC++){var kI=kH[0][kC];for(var kF=0;kF<kI.length;kF++){var kG=kI[kF];if(kG.status!=="ready"){continue}var kD=this.createDataFromCache(kG);if(!kD.indoorBorder3D){continue}kG.mvMatrix=this._camera.getModelViewMatrix3D(kG.tileInfo);this.tileScale=Math.pow(2,kG.tileInfo.zoom-this.mapZoom);for(var kE=0;kE<kG.renderData.indoorBorder3D.length;kE++){if(kD.indoorBorder3D[kE]&&kD.indoorBorder3D[kE]){this.drawTileLayer(kG,kG.renderData.indoorBorder3D[kE],kD.indoorBorder3D[kE],"line",{force3D:true})}}}}if(this._map.stencil&&this._map.stencil.isBuildingMask){this.switchStencilMask("off")}},drawShadow:function(kD){for(var kC=0;kC<kD.length;kC++){var T=kD[kC];if(T.status!=="ready"){continue}var e=this.createDataFromCache(T);var kE=T.renderData;if(kE&&(kE.base3d||kE.building3d||kE.building3dMesh)){T.mvMatrix=this._camera.getModelViewMatrix3D(T.tileInfo);if(kE.building3d){iB.shadow(this,T,e.building3d)}if(kE.building3dMesh){iB.shadow(this,T,e.building3dMesh)}if(!this.isFlat&&kE.base3d){iB.shadow(this,T,e.base3d,kE.base3d)}}}},drawHighlightFixedLabelSymbol:function(i){var e=this.createLabelData(i,true,"_highlightLabelBuffer");if(e&&e.vertex&&e.texture){iB.symbol(this,e.vertex,e.vao,this.mvMatrixMarker,e.texture,this._renderPng8Text,this.projMatrix,true,this._map._labelProcessor._useRound,this.mapHalfSize,0,this.cameraPosHigh,this.cameraPosLow,this.projMatrix2D,1)}},drawFixedLabelSymbol:function(kC,T){var i=this.createLabelData(kC,true,"_fixedLabelBuffer");var e=this._map._displayOptions;if(e.poiText||T>0){if(i&&i.vertex&&i.texture&&i.vao){iB.symbol(this,i.vertex,i.vao,this.mvMatrixMarker,i.texture,this._renderPng8Text,this.projMatrix,false,this._map._labelProcessor._useRound,this.mapHalfSize,0,this.cameraPosHigh,this.cameraPosLow,this.projMatrix2D,1)}}if(e.poiIcon||T>0){if(i&&i.iconVertex&&i.iconTexture&&i.vaoIcon){iB.symbol(this,i.iconVertex,i.vaoIcon,this.mvMatrixMarker,i.iconTexture,false,this.projMatrix,false,this._map._labelProcessor._useRound,this.mapHalfSize,0,this.cameraPosHigh,this.cameraPosLow,this.projMatrix2D,2)}}},drawLineLabelSymbol:function(kC,T){if(this._map.stencil&&this._map.stencil.isMapMask){this.switchStencilMask("on")}var e=false;var i=this.createLabelData(kC,e,"_lineLabelBuffer",true);if(i&&i.vertex&&i.texture&&i.vao){iB.symbolline(this,i.vertex,i.vao,T,i.texture,this._renderPng8Text,this.projMatrix,this._map._labelProcessor._useRound,this.mapHalfSize,this.mapZoom,this.cameraPosition,1)}if(this._map.stencil&&this._map.stencil.isMapMask){this.switchStencilMask("off")}},drawSymbol:function(kD,kC){var T=this.createMarkerData(kD);if(!T){return}kC=kC||{};var i=kC.fixPosition||false;var e=this._map._overlayMgrGL._useRound?this._map.config.markerUseRound:false;iB.symbol(this,T.vertex,T.vao,this.mvMatrixMarker,T.texture,false,this.projMatrix,false,e,this.mapHalfSize,0,this.cameraPosHigh,this.cameraPosLow,this.projMatrix2D,null,i)},drawMarker3D:function(T){var e=this.createMarker3dData(T);if(!e){return}var i=T[0].overlay._config;iB.marker3d(this,{mvMatrix:this.mvMatrixMarker},this.cameraPosHigh,this.cameraPosLow,e,i)},drawPolyline:function(i,kC){var e=this.createPolylineData(i);if(!e){return}var kD=this.mvMatrixPoly;var T=false;if(kC){kD=kC;T=true}iB.line(this,{mvMatrix:kD,tileOverlay:T},i,e,true)},drawPolygon:function(T,kE,kC){var e;var kF=this.mvMatrixPoly;if(kE){kF=kE}for(var kD=0;kD<T.length;kD++){e=this.createOverlayFillData(T[kD],"Float32",kD);if(T[kD].hasMultipleParts){iB.fill(this,{mvMatrix:kF},T[kD],e,true,{usePolygonStencil:true,drawPolygonPass:1,clipRefer:kC});iB.fill(this,{mvMatrix:kF},T[kD],e,true,{usePolygonStencil:true,drawPolygonPass:2,clipRefer:kC})}else{iB.fill(this,{mvMatrix:kF},T[kD],e,true)}}},drawGroundOverlay:function(kJ,T){var kD;for(var kF=0;kF<kJ.length;kF++){kD=this.createGroundOverlayData(kJ[kF],kF);var kC=kJ[kF].overlay;var kE=this.mvMatrixPoly;if(!T&&(kC._config&&kC._config.top)){continue}if(T&&!(kC._config&&kC._config.top)){continue}if(kC._config&&kC._config.sysType==="fixed"){kE=this._camera.getFixedViewMatrix(kC.points)}var kH=null;var kI=this._textureCache.getData(kJ[kF].src);if(!kI){var kG=this.gl;if(kC.isReDraw&&kC.drawHook){kC.drawHook.call()}kI=d5.utils.createTexture(kG,kJ[kF].textureSource,{unpackAlpha:true});if(kD.textureType.localName!=="video"&&!kC.drawHook){this._textureCache.setData(kJ[kF].src,kI)}}if(kC.isPixelMap&&kC.pHashcode){var kK=kC.src+"_pixelmap";kH=this._textureCache.getData(kK);if(!kH||(kC.pHashcode!==kC.pHashcodeOld)){var kG=this.gl;kC.pHashcodeOld=kC.pHashcode;kH=d5.utils.createTexture(kG,kC.pixelColorMap.canvas);this._textureCache.setData(kK,kH);kC.setImageObject(kJ[kF].textureSource)}var e=null;if(kJ[kF].maskTextureSource){e=this._textureCache.getData(kJ[kF].masksrc);if(!e){var kG=this.gl;e=d5.utils.createTexture(kG,kJ[kF].maskTextureSource);this._textureCache.setData(kJ[kF].masksrc,e);kC.setMaskImageObject(kJ[kF].maskTextureSource)}}}iB.groundoverlay(this,{mvMatrix:kE},kJ[kF],kD,kI,kH,e)}},drawPrism:function(e){var T;for(var kC=0;kC<e.length;kC++){T=this.createOverlayBlockData(e[kC],kC);iB.overlayBlock(this,{mvMatrix:this.mvMatrixPoly},T)}},drawBase:function(kM,kD,kF,kI,kG){var kL=undefined;var T=0;if(this._map.stencil&&this._map.stencil.isMapMask){this.switchStencilMask("on")}for(var kC=0;kC<kM.length;kC++){var kH=kM[kC];if(kH.dataType===2||!kH.dataType){var kP=kH.tileInfo.useZoom;if(kP!==kL){kD++;kL=kP}kH.baseLayerHeight=kD;if(kG&&kI===0&&kH.status!=="ready"){kH.mvMatrix=this._camera.getModelViewMatrix3D(kH.tileInfo);if(!this._map.stencil){this.renderGrid(kH)}}if(kH.status==="ready"){T=Math.max(T,kH.renderData.base.length)}}}for(var e=0;e<T;e++){for(var kC=0;kC<kM.length;kC++){var kH=kM[kC];if(kH.dataType===2||!kH.dataType){if(kH.status!=="ready"){continue}if(!kH.renderData.base[e]){continue}kH.mvMatrix=this._camera.getModelViewMatrix3D(kH.tileInfo);var kE=Math.floor(kF);var i=this.createDataFromCache(kH);this.tileScale=Math.pow(2,kH.tileInfo.zoom-kF);this.tileScaleFromStart=Math.pow(2,kH.tileInfo.useZoom-fu[kH.tileInfo.zoom].start);this.setLayerDepth(kH.baseLayerHeight);var kO=kH.renderData.base[e];var kJ=kO.type;var kK=i.base[e];var kN=false;if(this._map.stencil&&this._map.stencil.isMapMask){kN=true}this.drawTileLayer(kH,kO,kK,kJ,{withStencil:kJ==="line"&&kH.tileInfo.zoom<10&&kG&&!kN})}}}if(this._map.stencil&&this._map.stencil.isMapMask){this.switchStencilMask("off")}return ++kD},drawTileBase3D:function(kF,kJ,kC,kI,kE){kF.mvMatrix=this._camera.getModelViewMatrix3D(kF.tileInfo);if(kF.status!=="ready"){return}var kD=Math.floor(kJ);var e=this.createDataFromCache(kF);this.tileScale=Math.pow(2,kF.tileInfo.zoom-kJ);this.tileScaleFromStart=Math.pow(2,kF.tileInfo.useZoom-fu[kF.tileInfo.zoom].start);if(!this.isFlat){var kK=this._stencilMask;if(kK.length>0&&kK[0].isStencilMask){this.setLayerDepth(40)}else{this.setLayerDepth(gk)}}else{this.setLayerDepth(kC)}if(this._map.stencil&&this._map.stencil.isMapMask){this.switchStencilMask("on",true,false)}var kM=jg.getRender(jg.HIGH);if(kM&&this._map._polyOverlayBasePoint&&(kE||this.isFlat)){this.enableStencilMask(kM,true,false,true)}for(var T=0;T<kF.renderData.base3d.length;T++){var kL=kF.renderData.base3d[T];var kG=kL.type;var kH=e.base3d[T];if(kG!=="block"){if(!this.isFlat){if(kI===eL&&!kL.has3D){continue}else{if(kI===eL&&kL.has3D){if(kE&&kG!=="line"){continue}if(kE&&kG==="line"){if(kL.border){this.setLayerDepth(gk)}else{this.setLayerDepth(gk+1)}}if(!kE&&kG==="line"){continue}if(!kE&&kG==="fill"){if(kL.up){this.setLayerDepth(gk+1)}else{this.setLayerDepth(gk)}}}else{if(kI===e2&&!kL.has2D){continue}}}}else{if(kL.has3D&&kE&&kG!=="line"){continue}if(!kE&&kL.has3D&&kG==="line"){continue}}if(kG==="fill"&&kI===eL){this._state.stencilOp(this.gl.KEEP,this.gl.KEEP,this.gl.REPLACE)}this.drawTileLayer(kF,kL,kH,kG,{drawPart:kI});if(kG==="fill"&&kI===eL){this._state.stencilOp(this.gl.KEEP,this.gl.KEEP,this.gl.KEEP)}}else{if(!this.isFlat&&!kE&&kI===eL){this._state.stencilOp(this.gl.KEEP,this.gl.KEEP,this.gl.REPLACE);iB.block(this,kF,kH,true);this._state.stencilOp(this.gl.KEEP,this.gl.KEEP,this.gl.KEEP)}}}if(this._map.stencil&&this._map.stencil.isMapMask){this.switchStencilMask("off")}if(kM&&(kE||this.isFlat)){this.disableStencilMask()}},drawTileBase3DIndoor:function(kG,kK,kC,kJ,kL){if(kG.status!=="ready"){return}kG.mvMatrix=this._camera.getModelViewMatrix3D(kG.tileInfo);var kD=Math.floor(kK);var kE=kL.floor;var kF=kL.uid;this.tileScale=Math.pow(2,kG.tileInfo.zoom-kK);this.tileScaleFromStart=Math.pow(2,kG.tileInfo.useZoom-fu[kG.tileInfo.zoom].start);if(!this.isFlat){var kM=this._stencilMask;if(kM.length>0&&kM[0].isStencilMask){this.setLayerDepth(40)}else{this.setLayerDepth(gk)}}else{this.setLayerDepth(kC)}if(kG.renderData.indoorData[kF].floors[kE]){var T=kG.renderData.indoorData[kF].floors[kE].base3d?kG.renderData.indoorData[kF].floors[kE].base3d:[]}if(!T){return}for(var e=0;e<T.length;e++){var kN=T[e];var kH=kN.type;var kI=this.createFillData(kN.data);if(kH==="fill"){this.drawTileLayer(kG,kN,kI,kH,{drawPart:kJ})}}},drawIndoorBase:function(kH,kE){if(kH.status!=="ready"){return}if(this._map.stencil&&this._map.stencil.isMapMask){this.switchStencilMask("on")}kH.mvMatrix=this._camera.getModelViewMatrix3D(kH.tileInfo);var kC=Math.floor(kE);var T=this.createDataFromCache(kH);this.tileScale=Math.pow(2,kH.tileInfo.zoom-kE);this.tileScaleFromStart=Math.pow(2,kH.tileInfo.useZoom-fu[kH.tileInfo.zoom].start);if(kH.renderData.indoorBaseContour&&this.showIndoorContour){for(var kD=0;kD<kH.renderData.indoorBaseContour.length;kD++){var kG=kH.renderData.indoorBaseContour[kD];if(kG.uid!==this.currentIndoorUid){continue}var kF=kG.type;var e=T.indoorBaseContour[kD];this.drawTileLayer(kH,kG,e,kF)}}if(kH.renderData.indoorBase){for(var kD=0;kD<kH.renderData.indoorBase.length;kD++){var kG=kH.renderData.indoorBase[kD];var kF=kG.type;var e=T.indoorBase[kD];if(kF==="guide"){}else{this.drawTileLayer(kH,kG,e,kF,{})}}}if(this._map.stencil&&this._map.stencil.isMapMask){this.switchStencilMask("off")}},drawTileVirtual:function(kH,kE){if(this._map.stencil&&this._map.stencil.isMapMask){this.switchStencilMask("on")}kH.mvMatrix=this._camera.getModelViewMatrix3D(kH.tileInfo);if(kH.status!=="ready"){return}var kC=Math.floor(kE);var T=this.createDataFromCache(kH);this.tileScale=Math.pow(2,kH.tileInfo.zoom-kE);this.tileScaleFromStart=Math.pow(2,kH.tileInfo.useZoom-fu[kH.tileInfo.zoom].start);this.setLayerDepth(0);this._state.disableCap("depthTest");for(var kD=0;kD<kH.renderData.virtual.length;kD++){var kG=kH.renderData.virtual[kD];var kF=kG.type;var e=T.virtual[kD];this.drawTileLayer(kH,kG,e,kF,{})}if(this._map.stencil&&this._map.stencil.isMapMask){this.switchStencilMask("off")}this._state.enableCap("depthTest")},drawRasterTile:function(kL,kJ,kK){var kN={};if(!kL.renderData||!kL.renderData.vertexAll){return}if(kK&&kK.isPixelMap){var kO=kL.tileInfo;var T=kK.buildFillMaskVertex(kO.col,kO.row,kO.zoom);var kI=kL.renderData.vertexAll.slice(0);var e=[];for(var kG=0;kG<kI.length;kG+=5){var kF=(kG/5)*2;var kC=(kG/5)*7;e[kC]=kI[kG];e[kC+1]=kI[kG+1];e[kC+2]=kI[kG+2];e[kC+3]=kI[kG+3];e[kC+4]=kI[kG+4];e[kC+5]=T[kF];e[kC+6]=T[kF+1]}kN=new B(new Float32Array(e),{components:7,members:[{name:"aVertexPosition",components:3,offset:0,type:"Float32"},{name:"aVertexTextureCoord",components:2,offset:12,type:"Float32"},{name:"aVertexMaskCoord",components:2,offset:20,type:"Float32"}]},B.BufferType.VERTEX)}else{kN=new B(new Float32Array(kL.renderData.vertexAll),{components:5,members:[{name:"aVertexPosition",components:3,offset:0,type:"Float32"},{name:"aVertexTextureCoord",components:2,offset:12,type:"Float32"}]},B.BufferType.VERTEX)}var kE={vao:new dY(),vertex:kN};var kM=this._textureCache.getData(kL.textureSource.src);if(!kM){var kH=this.gl;kM=d5.utils.createTexture(kH,kL.textureSource,{unpackAlpha:true});this._textureCache.setData(kL.textureSource.src,kM)}if(kL.tileInfo.tileTypeName==="xyz"){kL.mvMatrix=this._camera.getXYZCustomModelViewMatrix3D(kL.tileInfo)}else{kL.mvMatrix=this._camera.getModelViewMatrix3D(kL.tileInfo)}var kD={texture:kM,_texture:kJ,attach:kK};iB.raster(this,kE.vertex,kE.vao,kL.mvMatrix,this.projMatrix,kD)},drawTileLayer:function(kC,kD,e,T,i){if(i&&i.withStencil){this.renderTileClippingMask(kC);this.enableTileClippingMask(kC)}iB[T](this,kC,kD,e,false,i);if(i&&i.withStencil){this.disableTileClippingMask()}},enableTileClippingMask:function(i,e){var T=this.gl;T.stencilFunc(T.EQUAL,i.clippingTileRefer,b3)},enableTileLineClippingMask:function(e){var i=this.gl;i.stencilFunc(i.EQUAL,e.clippingTileRefer,b3);this._state.stencilOp(i.KEEP,i.INCR,i.INCR);this._state.colorMask(true,true,true,true)},disableTileClippingMask:function(){var e=this.gl;e.stencilFunc(e.ALWAYS,0,255)},renderTileClippingMask:function(kC,kD,T,e){var kE=this.gl;this.clearGLStatus({stencil:true});kC.clippingTileRefer=this.tileClippintRefer+1;this._state.stencilOp(kE.KEEP,kE.REPLACE,kE.REPLACE);kE.stencilFunc(kE.ALWAYS,kC.clippingTileRefer,b3);this._state.colorMask(false,false,false,false);var i=false;if(kD){i=true}iB.grid(this,kC.mvMatrix,this.gridTextureScale,i);this._state.colorMask(true,true,true,true);this._state.stencilOp(kE.KEEP,kE.KEEP,kE.KEEP)},clearGLStatus:function(e){var T=this.gl;var i=0;if(e.color){i|=T.COLOR_BUFFER_BIT}if(e.stencil){i|=T.STENCIL_BUFFER_BIT}if(e.depth){i|=T.DEPTH_BUFFER_BIT}T.clear(i)},renderGrid:function(e){this.setLayerDepth(a4);iB.grid(this,e.mvMatrix,this.gridTextureScale)},renderWatermark:function(){this.setLayerDepth(fp-1);var i=this._map.width;var e=[i/256,this._map.height/256];if(b5()){e=[i/128,this._map.height/128]}iB.watermark(this,e)},setLayerDepth:function(e){if(this._preCurrentLayer===e){return}var i=1-e*this._depthEpsilon;var T=i-this._depthRange;this._preCurrentLayer=e;this.gl.depthRange(T,i)},_initCanvas:function(){var kF=this._map;var kD=kF.getSize();var kC=kD.width;var e=kD.height;var i=kF.container;var kG=b6("canvas");var kE=kG.style;var T=kF.config.ratio;this._width=kC;this._height=e;kE.cssText="position: absolute;left:0;top:0;width:"+kC+"px;height:"+e+"px;z-index:0;";kG.width=Math.round(kC*T);kG.height=Math.round(e*T);i.appendChild(kG);return kG},_getWebGLContext:function(){var i={alpha:true,premultipliedAlpha:false,antialias:this._useAntialias&&!this._useSMAA,failIfMajorPerformanceCaveat:false,preserveDrawingBuffer:this._map.config.preserveDrawingBuffer,stencil:true};if(e9.Browser.safari){i.alpha=true}var kC=this._map;var e=kC.config.webgl2;var T=this._canvas.getContext(e?"webgl2":"webgl",i)||this._canvas.getContext("experimental-webgl",i);if("drawingBufferColorSpace" in T){T.drawingBufferColorSpace="display-p3"}else{}return T},_checkTextureAtlasUsage:function(){if(this._labelTextTextureAtlas){var e=this._labelTextTextureAtlas.getUsage();if(e>0.85){this._currentTextureIsFull=true;this._map.fire(new fW("onmapglidle_inner"))}if(this._iconTextureAtlas){var e=this._iconTextureAtlas.getUsage();if(e>0.85){this._map.fire(new fW("onlayer_clear"))}}}},_initialize:function(){var kF=this.gl;var kH=this;this._map.addEventListener("update",function(i){if(i.changedStatus&&i.changedStatus.onsize_changed){kH._resizeHandler()}});var T=this._map;T.addEventListener("layer_clear",function(kM){kH._cache&&kH._cache.clear();kH._currentTextureIsFull=true;kI&&kI();kH._iconTextureAtlasOffset={};kH._iconTextureAtlasCoords={};if(kH._iconTextureManager){kH._iconTextureAtlas&&kH._iconTextureManager.free(kH._iconTextureAtlas);kH._iconTextureAtlas=kH._iconTextureManager.getEmptyTexture()}var i=new fW("onupdate");T.fire(i);var kL=new fW("oniconupdate");T.fire(kL)});this.tileScale=1;this.stepZoom=T.getZoom();this.polyZoomRatio=1;this.normalMatrix=mat4.create();this.background=T.config.backgroundColor||dT;var kH=this;kH.updateBackground=function(){var i=T.config.mapStyleId;if(typeof T.config.style==="string"){kH.background=T.config.backgroundColor||dT}else{if(bG["customStyleInfo_"+i]){var kL=bG["customStyleInfo_"+i]["bmapLandColor"];if(T.config.backgroundColor){kH.background=T.config.backgroundColor}else{if(kL){kH.background=hW.parseHexToRgbaArray(kL)}else{kH.background=dT}}}}kH._state.clearColor(kH.background);iB.watermark(kH)};T.addEventListener("style_loaded",function(){kH.updateBackground()});T._webGLStateId=bG.getGUID("glmap_");this._state=d5.WebGLState.get(kF,T._webGLStateId);this._state.clearColor(this.background);this._state.enableCap("stencilTest");this._state.enableCap("depthTest");this._state.enableCap("cullFace");this._state.depthFunc(kF.LEQUAL);this._state.enableCap("blend");this._state.blendFunc(kF.SRC_ALPHA,kF.ONE_MINUS_SRC_ALPHA,kF.ONE,kF.ONE_MINUS_SRC_ALPHA);this._state.depthMask(true);this._needToDestroy=[];bt.init(this);if(this._useSMAA){this.initSMAAFrameBuffers()}this._cache=new aC(e9.Browser.ie?64:128,{clearCallback:function(i){kH._needToDestroy.push(i)}});this._map.on("zoom_changed",function(kL){var i=kL.target.getZoom();kH.stepZoom=Math.floor(i/0.25)*0.25});function kI(){if(!kH._textTextureManager){return}for(var kM=0,kL=kH._needToDestroy.length;kM<kL;kM++){kH.destroyCache(kH._needToDestroy[kM])}kH._needToDestroy.length=0;if(kH._currentTextureIsFull===true){kH._labelTextTextureAtlas&&kH._textTextureManager.free(kH._labelTextTextureAtlas);kH._labelTextureAtlasOffset={};kH._currentTextureIsFull=false;kH._textureAddToJob={};kH._labelTextTextureAtlas=kH._textTextureManager.getEmptyTexture();kH._map.fire(new fW("onrefresh"))}}this._map.on("mapglidle",kI);this._map.on("destroy",function(){kH._canvas.removeEventListener("webglcontextlost",c4,false);var i=kH.gl.getExtension("WEBGL_lose_context");if(i){i.loseContext()}kH._textureCache.clear();kH._textureCache=null;kH._float32ArrayForPolyline=null;kH._uint16ArrayForPolyline=null;kH._textTextureManager=null;kH._iconTextureManager=null;kH._iconTextureAtlas=null;kH._cache.clear();kH._cache=null;kH._labelTextTextureAtlas=null;kH.programMgr=null;kH.skyBuffer=null;kH.textureAtlasMarker=null;kH._labelGroundVertexBuffer=null;kH._labelVertexBuffer=null;kH._labelVertexBuffer3D=null;kH._labelIconVertexBuffer=null;kH._smaaPasses=null;if(kH._dashLineTextures){kH._dashLineTextures=null}if(kH._smaaInfo){kH._smaaInfo={areaTexture:null,searchTexture:null,textureBeginToLoad:false,glDrawSMAAReady:false}}kH._polylineBufferArray=[{vertex:null,element1:null,vao1:null}];kH._polygonBuffer=null;kH._groundBuffer=null;kH._groundoverlayBuffer=null});this._textureJobScheduler=this._map.jobScheduler;this._depthEpsilon=8/Math.pow(2,16);this._depthRange=1-this._depthEpsilon*fp;this.programMgr=new aN(kF,this._map);this._skyColor=this._getSkyColor();T.addEventListener("displayoptions_changed",function(){kH._skyColor=kH._getSkyColor()});var kD=this._map.height/2;var kG=T.config.skyColorStop||[0,0.1,0.7,1];for(var kE=0;kE<kG.length;kE++){kG[kE]*=kD}var kK=new Float32Array([0,kG[0],0,10000,kG[0],0,10000,kG[1],0,0,kG[0],0,10000,kG[1],0,0,kG[1],0,0,kG[1],0,10000,kG[1],0,10000,kG[2],1,0,kG[1],0,10000,kG[2],1,0,kG[2],1,0,kG[2],1,10000,kG[2],1,10000,kG[3],1,0,kG[2],1,10000,kG[3],1,0,kG[3],1]);this.skyVAO=new dY();this.skyBuffer=new B(kK,{components:3,members:[{name:"aPos",components:3,offset:0,type:"Float32"}]},B.BufferType.VERTEX);this.textureAtlasMarker=new d5.TextureAtlas(this.gl,{width:2048,height:2048,unpackAlpha:true});this._imageMergedOffset={};this._labelGroundVertexBuffer=new Float32Array(10000);this._labelVertexBuffer=new Float32Array(65000);this._labelVertexBuffer3D=new Float32Array(65000);this._labelIconVertexBuffer=new Float32Array(65000);this._map.on("style_willchange",function(){kH._textRenderType=this.config.textRenderType;if(kH._textRenderType==="canvas"){kH._renderPng8Text=false}else{kH._renderPng8Text=true}kH._iconTextureManager=new d5.TextTextureManager(kF,{width:1024,height:1024,unpackAlpha:true});kH._iconTextureAtlas=kH._iconTextureManager.getEmptyTexture()});if(window._BMapSecurityConfig&&window._BMapSecurityConfig["serviceHost"]){var e=window._BMapSecurityConfig["serviceHost"]+"?qt=business"}else{var kJ=bb().protocol||"https:";var e=kJ+"//api.map.baidu.com?qt=business&ak="+eZ}dq.request(e,function(kL){var i=bb().origin||"";if(["https://lbs.baidu.com","https://lbsyun.baidu.com"].indexOf(i)>=0){return}if(kL&&kL.error===0&&kL.content&&kL.content["business"]===0){kH._fillTexture=false;gh=0;if(kL.content["unauth"]===1){kH._watermark=true}}});if(window._BMapSecurityConfig&&window._BMapSecurityConfig["serviceHost"]){var kC=window._BMapSecurityConfig["serviceHost"]+"?qt=custom_hd"}else{var kC=E.apiHost+"?qt=custom_hd&ak="+eZ}dq.request(kC,function(i){if(i&&i.status===0&&i.data){jg.dataProcessFromHigh(i.data)}})},_getSkyColor:function(){var e=this._map._displayOptions.skyColors;var kC=[];for(var T=0;T<e.length;T++){var kE=hW.parseCSSColor(e[T]);kC.push([kE[0]/255,kE[1]/255,kE[2]/255,kE[3]/255])}var kD=this._map.config.skyColor;if(kD){kC=kD}return kC},_resizeHandler:function(kG){var kI=this;var i=kI._map;var kF=i.getSize();var T=kF.width;var kJ=kF.height;var kH=i.config.ratio;var kC=this._canvas;var kD=kC.style;kD.width=T+"px";kD.height=kJ+"px";kC.width=Math.round(T*kH);kC.height=Math.round(kJ*kH);kI._width=T;kI._height=kJ;var kE=this.gl;kE.viewport(0,0,kE.drawingBufferWidth,kE.drawingBufferHeight);this._frameBufferSizeInvalid=true},createDebugBuffer:function(T){var i=h7[T];if(!this._debugBufferCache[i]){var e=[0,0,i,0,i,i,0,i];this._debugBufferCache[i]={vao:new dY(),buffer:new B(new Uint16Array(e),{components:2,members:[{name:"a_pos",components:2,offset:0,type:"Uint16"}]},B.BufferType.VERTEX)}}this.debugVAO=this._debugBufferCache[i].vao;this.debugBuffer=this._debugBufferCache[i].buffer},createGrid3857BufferCache:function(i){var e=new Float32Array([0,0,0,0,i,0,1,0,0,i,0,1,i,i,1,1]);this._grid3857BufferCache={vao:new dY(),buffer:new B(e,{components:4,members:[{name:"a_pos",components:2,offset:0,type:"Float32"},{name:"a_tex",components:2,offset:8,type:"Float32"}]},B.BufferType.VERTEX)};this.grid3857VAO=this._grid3857BufferCache.vao;this.grid3857Buffer=this._grid3857BufferCache.buffer},createGridBuffer:function(T){var i=h7[T];if(!this._gridBufferCache[i]){var e=new Float32Array([0,0,0,0,i,0,1,0,0,i,0,1,i,i,1,1]);this._gridBufferCache[i]={vao:new dY(),buffer:new B(e,{components:4,members:[{name:"a_pos",components:2,offset:0,type:"Float32"},{name:"a_tex",components:2,offset:8,type:"Float32"}]},B.BufferType.VERTEX)}}this.gridVAO=this._gridBufferCache[i].vao;this.gridBuffer=this._gridBufferCache[i].buffer},_handleContextStatus:function(){var e=this._canvas;e.addEventListener("webglcontextlost",c4.bind(this),false)}});function bv(e){this._map=e;this._overlays=[[],[],[],[],[],[],[]];this._overlayToBoundary=false;this._renderData=[[],[],[],[],[],[{styleData:[[],[]],texture:null,textureSize:null,zoomWithMap:null,overlay:null}],[]];this._polylineRenderData={};this._iconImage={};this._needRAF=0;this._customOverlays=[];this._useRound=true;this._ratio=1;if(gu()>1){this._ratio=2}e._overlayMgrGL=this;this._init()}e9.extend(bv.prototype,{_init:function(){this._bind()},_bind:function(){var i=this;var kC=this._map;function kE(kI){var kG=kI.overlay||this;var kH=kI.action||"";var kF=true;i._updateGraph(kG,kH,false,kF);if(kH==="remove"){i._removeOverlay(kG,kE)}}function T(kI){var kF=kI.overlay||this;var kH=kI.action||"";var kG=kI.imageUrlChanged||false;i._updateMarker(kF,kH,kG);if(kH==="remove"){i._removeOverlay(kF,T)}}kC.on("destroy",function(){var kF=[];for(var kI=0;kI<i._overlays.length;kI++){for(var kH=0;kH<i._overlays[kI].length;kH++){var kG=i._overlays[kI][kH];if(kG._config.enableEditing){kF.push(kG)}else{i._map.removeOverlay(kG);if(kG.destroy){kG.destroy()}kG=undefined}}}for(var kI=0;kI<kF.length;kI++){kF[kI].clearVertexs();i._map.removeOverlay(kF[kI]);if(kF[kI].destroy){kF[kI].destroy()}kF[kI]=undefined}kF=null;i._iconImage=null;i._renderData=[[],[],[],[],[],[],[]]});kC.on("beforeaddoverlay",function(kG){if(!(kG.overlay instanceof iV)){return}var kF=kG.overlay;i._initPolyOverLayBasePoint(kF,kG)});kC.on("removeLayerMask",function(kF){if(!kF.hasLayerBoundary){i._overlayToBoundary=false;i._clearOverlayBasePoint()}});kC.on("addoverlay",function kD(kI){if(!(kI.overlay instanceof iV)&&!(kI.overlay instanceof ke)&&!(kI.overlay instanceof er)){return}var kG=kI.overlay;var kF=5;if(kI.overlay instanceof f8){kF=5}else{if(kI.overlay instanceof ke){kF=2}else{if(kI.overlay instanceof kr){kF=3}else{if(kI.overlay instanceof er){kF=4}else{if(kI.overlay instanceof b7){kF=1}else{if(kI.overlay instanceof cs){kF=6}}}}}}for(var kH=0;kH<i._overlays[kF].length;kH++){if(i._overlays[kF][kH].hashCode===kG.hashCode){return}}if(kF!==2&&kF!==4){if(!(kG._config&&kG._config.sysType==="fixed")){i._initPolyOverLayBasePoint(kG,kI)}}i._overlays[kF].push(kG);if(kF!==2&&kF!==4){kG.on("lineupdate",kE);i._updateGraph(kG,"add",false,true)}else{if(kF===2){kG.on("status_change",T);i._updateMarker(kG,"add")}else{if(kF===4){kG.on("status_change",T);kG.on("lineupdate",T);i._updateMarker(kG,"add")}}}});kC.on("update",function e(kI){var kG=false;for(var kH=0;kH<i._overlays[0].length;kH++){if(i._updateGraph(i._overlays[0][kH],"",true,false)===true){kG=true}}for(kH=0;kH<i._overlays[1].length;kH++){if(i._updateGraph(i._overlays[1][kH],"",true,false)===true){kG=true}}for(kH=0;kH<i._overlays[3].length;kH++){if(i._updateGraph(i._overlays[3][kH],"",true,false)===true){kG=true}}for(kH=0;kH<i._overlays[5].length;kH++){if(i._updateGraph(i._overlays[5][kH],"",true,false)===true){kG=true}}for(kH=0;kH<i._overlays[6].length;kH++){if(i._updateGraph(i._overlays[6][kH],"",true,false)===true){kG=true}}if(kG||kI.target==="line"){i._mergePolylineGraphData();i._map._featureMgr.setOverlayData(i._renderData[5],1)}var kF=new fW("onrefresh");kF.source="webgloverlaymgr";this.fire(kF)});kC.addEventListener("movestart",function(){if(this.getMapType()==="B_EARTH_MAP"){return}i._useRound=false});kC.addEventListener("moveend",function(kH){if(this.getMapType()==="B_EARTH_MAP"){return}if(kH.userData&&kH.userData.readyToMove===true){return}i._useRound=true;var kF=false;for(var kG=0;kG<i._overlays[0].length;kG++){if(i._updateGraph(i._overlays[0][kG],"",true,true)===true){kF=true}}for(kG=0;kG<i._overlays[1].length;kG++){if(i._updateGraph(i._overlays[1][kG],"",true,true)===true){kF=true}}for(kG=0;kG<i._overlays[3].length;kG++){if(i._updateGraph(i._overlays[3][kG],"",true,true)===true){kF=true}}for(var kG=0;kG<i._overlays[5].length;kG++){if(i._updateGraph(i._overlays[5][kG],"",true,true)===true){kF=true}}for(kG=0;kG<i._overlays[6].length;kG++){if(i._updateGraph(i._overlays[6][kG],"",true,false)===true){kF=true}}if(kF){i._mergePolylineGraphData();i._map._featureMgr.setOverlayData(i._renderData[5],1)}});kC.addEventListener("zoomstart",function(){if(this.getMapType()==="B_EARTH_MAP"){return}i._useRound=false});kC.addEventListener("zoomend",function(){if(this.getMapType()==="B_EARTH_MAP"){return}i._useRound=true;var kF=false;for(var kG=0;kG<i._overlays[0].length;kG++){if(i._updateGraph(i._overlays[0][kG],"",true,true)===true){kF=true}}for(kG=0;kG<i._overlays[1].length;kG++){if(i._updateGraph(i._overlays[1][kG],"",true,true)===true){kF=true}}for(kG=0;kG<i._overlays[3].length;kG++){if(i._updateGraph(i._overlays[3][kG],"",true,true)===true){kF=true}}for(kG=0;kG<i._overlays[5].length;kG++){if(i._updateGraph(i._overlays[5][kG],"",true,true)===true){kF=true}}for(kG=0;kG<i._overlays[6].length;kG++){if(i._updateGraph(i._overlays[6][kG],"",true,false)===true){kF=true}}if(kF){i._mergePolylineGraphData();i._map._featureMgr.setOverlayData(i._renderData[5],1)}});if(kC.temp.originMapType===BMAP_EARTH_MAP){return}this._syncOverlayFromMap(kE,T)},_initPolyOverLayBasePoint:function(i,kC){var T=this;if(T._map._polyOverlayBasePoint&&kC&&kC.isLayerMask){T._overlayToBoundary=true}if(!T._map._polyOverlayBasePoint){if(kC&&kC.isLayerMask){T._overlayToBoundary=true}T._map._polyOverlayBasePoint=i.getBoundsIn().getCenter();T._map.fire(new fW("onupdateoverlaymatrix"))}},_clearOverlayBasePoint:function(){if(this._map._polyOverlayBasePoint&&this._overlays[0].length===0&&this._overlays[1].length===0&&this._overlays[3].length===0&&this._overlays[5].length===0&&!this._overlayToBoundary){this._map._polyOverlayBasePoint=null}},_removeOverlay:function(T,kD){if(!(T instanceof iV)&&!(T instanceof ke)){return}var e=5;if(T instanceof f8){e=5}else{if(T instanceof ke){e=2;if(T._config.icon instanceof ft){T._config.icon.remove()}}else{if(T instanceof kr){e=3}else{if(T instanceof er){e=4}else{if(T instanceof b7){e=1}else{if(T instanceof cs){e=6}}}}}}for(var kC=0;kC<this._overlays[e].length;kC++){if(this._overlays[e][kC].hashCode===T.hashCode){this._overlays[e].splice(kC,1);break}}this._clearOverlayBasePoint();T.off("lineupdate",kD)},_syncOverlayFromMap:function(kG,kF){var e=this._map._overlayArray;var kD=false;for(var kE=0;kE<e.length;kE++){var kC=e[kE];if(kC instanceof f8===true||kC instanceof ex===true){this._initPolyOverLayBasePoint(kC,null);this._overlays[5].push(kC);kC.on("lineupdate",kG);if(this._updateGraph(kC,"add",true)===true){kD=true}}else{if(kC instanceof hB===true){this._initPolyOverLayBasePoint(kC,null);this._overlays[5].push(kC);kC.on("lineupdate",kG);if(this._updateGraph(kC,"add",true)===true){kD=true}}else{if(kC instanceof b7){this._initPolyOverLayBasePoint(kC,null);this._overlays[1].push(kC);kC.on("lineupdate",kG);if(this._updateGraph(kC,"add",true)===true){kD=true}}else{if(kC instanceof kr===true){this._initPolyOverLayBasePoint(kC,null);this._overlays[3].push(kC);kC.on("lineupdate",kG);if(this._updateGraph(kC,"add",true)===true){kD=true}}else{if(kC instanceof ke){this._overlays[2].push(kC);kC.on("status_change",kF);this._updateMarker(kC,"add")}else{if(kC instanceof er){this._overlays[4].push(kC);kC.on("status_change",kF);kC.on("lineupdate",kF);this._updateMarker(kC,"add")}else{if(kC instanceof cs){this._initPolyOverLayBasePoint(kC,null);this._overlays[6].push(kC);kC.on("lineupdate",kG);if(this._updateGraph(kC,"add",true)===true){kD=true}}}}}}}}}if(kD){this._mergePolylineGraphData();this._map._featureMgr.setOverlayData(this._renderData[5],1)}var T=new fW("onrefresh");T.source="webgloverlaymgr";this._map.fire(T)},_updateMarkerRenderData:function(kG,kF,kK){if(!this._renderData[kG.hashCode]){return false}var kL=false;var T=kG instanceof er;var kJ=T?4:2;var e=T?7:8;if(kF==="zIndex"){this._renderData[kJ].sort(function(kP,i){return kP.overlay._zIndex-i.overlay._zIndex});this._map._featureMgr.setOverlayData(this._renderData[kJ],e);return true}for(var kI=0;kI<this._renderData[kJ].length;kI++){var kD=this._renderData[kJ][kI];if(kD.hashCode===kG.hashCode){kL=true;kD.renderData=kG.getVertexInfoForGL(this._useRound);var kM=kD.overlay._config.icon;var kN=kM.imageUrl;var kC=kM.imageDom;var kE=kM.id;if(this._ratio>1&&kM&&kM.hasOwnProperty("srcSetObject")&&kM.srcSetObject["2x"]){kN=kM.srcSetObject["2x"];kM.ratio=2}var kH;var kO;if(kN){kO=this._iconImage[kN]}else{if(kC){kO=this._iconImage[kC.id]}else{if(kE){kO=this._iconImage[kE]}}}if(kO){kH=kO.img}if(kH){kD.textureSource=kH;this._map._featureMgr.setOverlayData(this._renderData[kJ],e);return true}kD.textureSource=null;this._removeMarkerFromRenderData(kG);this._addMarkerToRenderData(kG);break}}if(!kL&&kF==="setIcon"&&kK){this._renderData[kG.hashCode]=null;this._addMarkerToRenderData(kG)}return false},_addMarkerToRenderData:function(kD){if(this._renderData[kD.hashCode]){return false}this._renderData[kD.hashCode]=true;var kG=this;function kC(kS,kP,kO,kU){var kN=kP instanceof er;var kR=kN?4:2;var kT=kN?7:8;if(kP.map&&kP._visible===true&&((kP instanceof ke&&kP.domElement!==null)||kP instanceof er)){if(kO!==null){if(((kG._ratio===1||!kH.srcSetObject["2x"])&&kP._config.icon.imageUrl!==kO)||(kG._ratio>1&&kH.srcSetObject["2x"]&&kH.srcSetObject["2x"]!==kO)){return}}else{if(kU!==null){if(kS!==kU){return}}}var kQ=kP.getVertexInfoForGL(kG._useRound);kG._renderData[kR].push({overlay:kP,hashCode:kP.hashCode,textureSource:kS,renderData:kQ});kG._renderData[kP.hashCode]=true}else{kG._renderData[kP.hashCode]=null}kG._renderData[kR].sort(function(kW,kV){return kW.overlay._zIndex-kV.overlay._zIndex});kG._map._featureMgr.setOverlayData(kG._renderData[kR],kT)}function kF(kP){var kO=kP instanceof er;var kQ=kO?4:2;var kR=kO?7:8;kG._map._featureMgr.setOverlayData(kG._renderData[kQ],kR);var kN=new fW("onrefresh");kN.source="webgloverlaymgr";kG._map.fire(kN)}var kH=kD._config.icon;if(kD instanceof er&&!kH){var kJ=kD.getVertexInfoForGL(kG._useRound);kG._renderData[4].push({overlay:kD,hashCode:kD.hashCode,textureSource:null,renderData:kJ});kG._renderData[kD.hashCode]=true;kG._map._featureMgr.setOverlayData(kG._renderData[4],7);var kK=new fW("onrefresh");kK.source="webgloverlaymgr";kG._map.fire(kK);return true}var kI=kH.imageUrl;var i=kH.imageDom;var T=(kH instanceof ft?kH.id:null);var kE;var kL;if(this._ratio>1&&kH&&kH.hasOwnProperty("srcSetObject")&&kH.srcSetObject["2x"]){kI=kH.srcSetObject["2x"];kH.ratio=2}if(kI){kL=this._iconImage[kI]}else{if(i){kL=this._iconImage[i.id]}else{if(T){kL=this._iconImage[T]}}}if(kL){kE=kL.img}if(kE){if(kH instanceof ft&&!kH.overlay){kH.overlay=kD;kH.add()}kC(kE,kD,kI,i);return true}if(kL){kL.pendings.push(kD)}else{if(kI){kE=new Image();kE.crossOrigin="anonymous";kE.onload=function(){if(!kG._iconImage||!kG._iconImage[kI]){return}kG._iconImage[kI].loaded=true;kG._iconImage[kI].img=this;for(var kN=0;kN<kG._iconImage[kI].pendings.length;kN++){kC(this,kG._iconImage[kI].pendings[kN],kI)}kG._iconImage[kI].pendings=[];kF()};this._iconImage[kI]={pendings:[kD]};kE.src=kI}else{if(i){var e=i.id;kG._iconImage[e]={pendings:[],loaded:true,img:i};kC(i,kD,kI,i);kF()}else{if(T){if(!kH.overlay){kH.overlay=kD;if(kH.isReDraw){kD.hasRAF=true;kG._needRAF+=1}kH.add()}var kM=kH.render(kG._map);if(kM){kG._iconImage[T]={pendings:[],loaded:true,img:kH.data};kC(kH.data,kD,null,null);kF()}}}}}this._updateOverlayLoopRender()},_removeMarkerFromRenderData:function(T){if(!this._renderData[T.hashCode]){return false}if(T instanceof er){for(var kC=0;kC<this._renderData[4].length;kC++){if(this._renderData[4][kC].hashCode===T.hashCode){this._renderData[4].splice(kC,1);break}}}else{if(T instanceof ke){var kE=T._config.icon;if(kE){var e=T._config.icon.imageUrl;if(this._ratio>1&&kE.srcSetObject["2x"]){e=kE.srcSetObject["2x"]}if(this._iconImage[e]&&this._iconImage[e].pendings){var kD=this._iconImage[e].pendings;for(var kC=kD.length-1;kC>=0;kC--){if(kD[kC]===T){kD.splice(kC,1)}}}}for(var kC=0;kC<this._renderData[2].length;kC++){if(this._renderData[2][kC].hashCode===T.hashCode){this._renderData[2].splice(kC,1);if(T.hasRAF){this._needRAF-=1}break}}}}this._renderData[T.hashCode]=null;this._updateOverlayLoopRender();return true},_updateGraph:function(kD,kE,kF,i){var kC=false;var kG="";if(kD){kE=kE||"";if(!kD.ifInMapView()&&kD.toString()!=="MapMask"&&!(kD instanceof ge&&kD._config.sysType==="fixed")){if(this._removeGraphFromRenderData(kD)===true){kC=true}kD._notInView=true}else{if(kE==="add"||kE==="show"||(kD._notInView===true&&kE!=="remove")){kD._notInView=false;if(kD._visible===true){if(this._addGraphToRenderData(kD)===true){kC=true;if(kD instanceof cs){var e=new fW("onlayer_update");this._map.fire(e)}}kG="add"}}else{if(kE==="remove"||kE==="hide"){if(this._removeGraphFromRenderData(kD)===true){kC=true;if(kD instanceof cs){var e=new fW("onlayer_update");this._map.fire(e)}}}else{if(this._updateGraphRenderData(kD,i)===true){kC=true}else{kC=this._updateGraphRenderData(kD,kE)}}}}}if(!kF&&kC){this._mergePolylineGraphData(kG);this._map._featureMgr.setOverlayData(this._renderData[5],1)}var T=new fW("onrefresh");T.source="webgloverlaymgr";this._map.fire(T);return kC},_mergePolylineGraphData:function(e){this._renderData[5].length=0;this._renderData[5][0]={style:[],styleData:[[],[]]};this._mergeGraphArrayData(this._overlays[0]);this._mergeGraphArrayData(this._overlays[5])},_mergeGraphArrayData:function(kC){kC.sort(function(kD,i){return kD.zIndex-i.zIndex});for(var T=0;T<kC.length;T++){var e=kC[T].hashCode;if(!this._polylineRenderData[e]){continue}this._mergeOnePolylineData(this._polylineRenderData[e]);if(this._polylineRenderData[e+"_fill_line"]){this._mergeOnePolylineData(this._polylineRenderData[e+"_fill_line"])}}},_mergeOnePolylineData:function(kH){var i=this._renderData[5].length-1;var kT=this._renderData[5][i];var kE=this._renderData[5][i].styleData[0];var kD=this._renderData[5][i].styleData[1];var kU=9;var kC=65534;for(var kP=0;kP<kH.styleData.length;kP++){var kM=kH.styleData[kP];var kK=kM[0];var kI=kM[1];if(!kK.length||!kI.length){continue}var kV=kK.length/kU;var kL=kH.hasMultipleParts?false:kH.overlay.canRenderDataBeMerged();var kG=true;if(kT.overlay&&!(kT.hasMultipleParts?false:kT.overlay.canRenderDataBeMerged())){kG=false}var T=Math.ceil(kV/kC);for(var kO=0;kO<T;kO++){var kF=kE.length/kU;var kS=(kO===T-1)?(kV-kC*kO):kC;if(kF+kS>kC||(kT.styleData[0].length>0&&kL===false)||kG===false){i++;kT=this._renderData[5][i]={style:[],styleData:[[],[]],texture:null,textureSize:null,zoomWithMap:null,overlay:null,hasMultipleParts:null};kE=kT.styleData[0];kD=kT.styleData[1];kF=0}if(kT.styleData[0].length===0){kT.texture=kH.texture;kT.textureSize=kH.textureSize;kT.zoomWithMap=kH.zoomWithMap;kT.overlay=kH.overlay;kT.hasMultipleParts=kH.hasMultipleParts}var kR=kO>0?-2:0;for(;kR<kS;kR++){kE[kE.length]=kK[(kO*kC+kR)*kU];kE[kE.length]=kK[(kO*kC+kR)*kU+1];kE[kE.length]=kK[(kO*kC+kR)*kU+2];kE[kE.length]=kK[(kO*kC+kR)*kU+3];kE[kE.length]=kK[(kO*kC+kR)*kU+4];kE[kE.length]=kK[(kO*kC+kR)*kU+5];kE[kE.length]=kK[(kO*kC+kR)*kU+6];kE[kE.length]=kK[(kO*kC+kR)*kU+7];kE[kE.length]=kK[(kO*kC+kR)*kU+8]}var kJ=kO>0?((kC*(kO+1)-2)*3):(kS-2)*3;var kN=kO>0?(kC*kO-2)*3:0;var e=kO>0?kC*kO-2:0;for(var kQ=kN;kQ<kJ&&kQ<kI.length;kQ++){kD[kD.length]=kI[kQ]-e+kF}}}},_addGraphToRenderData:function(kC){if(this._renderData[kC.hashCode]){return false}var kH;var kG;if(kC instanceof kr){this._lastAddGraphIndex=3;var i=kC.buildFillVertex(hX);var T={vertex:i.vertex,index:i.index,overlay:kC};T.hashCode=kC.hashCode;T.hasMultipleParts=kC.hasMultipleParts;this._renderData[3].push(T);this._map._featureMgr.setOverlayData(this._renderData[3],6)}else{if(kC instanceof b7){this._lastAddGraphIndex=1;kG=kC.getFillStyleForGL();var i=kC.buildFillVertex(hX);var kF=kG.type;var kD=this;if(kF==="image"){function kE(kL,kI){if(!kI){return}var kJ={opacity:kG.opacity,vertex:i[0],index:i[1],textureSource:kL,src:kL.src,maskTextureSource:null,masksrc:null,overlay:kC};kJ.hashCode=kC.hashCode;kJ.hasMultipleParts=kC.hasMultipleParts;function kK(){if(kD._renderData[kC.hashCode]&&!kD._exitOverlayRenderData(kC)){kD._renderData[1].push(kJ);kD._map._featureMgr.setOverlayData(kD._renderData[1],5);var kN=new fW("onlineupdate");kN.overlay=kC;kC.dispatchEvent(kN)}}if(kC._config.maskPng){function kM(kO,kN){if(kN){kC.hasMaskPng=true}else{kC.hasMaskPng=false}kJ.maskTextureSource=kN?kO:null;kJ.masksrc=kN?kO.src:null;kK()}kD._imageLoad(kC._config.maskPng,kM)}else{kK()}}this._imageLoad(kG.texture,kE)}else{if(kF==="canvas"){var T={textureSource:kG.texture,src:"canavs_"+new Date().valueOf(),opacity:kG.opacity,vertex:i[0],index:i[1],overlay:kC};T.hashCode=kC.hashCode;T.hasMultipleParts=kC.hasMultipleParts;kD._renderData[1].push(T);kD._map._featureMgr.setOverlayData(kD._renderData[1],5);if(kC.drawHook){kC.hasRAF=true;this._needRAF+=1}}else{if(kF==="video"){var e=document.createElement("video");e.controls=false;e.autoplay=true;e.crossOrigin="anonymous";if(this._map.config.videoMuted){e.muted=true}e.loop=true;e.style.width="256px;";e.style.height="256px;";e.oncanplay=function(){if(this._videoloaded){return}var kI={opacity:kG.opacity,vertex:i[0],index:i[1],textureSource:this,src:this.src,overlay:kC};kI.hashCode=kC.hashCode;kI.hasMultipleParts=kC.hasMultipleParts;kD._renderData[1].push(kI);kD._map._featureMgr.setOverlayData(kD._renderData[1],5);this._videoloaded=true;if(kD._map.config.videoMuted){e.play()}};if("".substr){e.src=bp(kG.texture,"update_resource="+dc()+(Math.random()+"").substr(2,4))}else{e.src=kG.texture}this._needRAF+=1}}}}else{if(kC instanceof hB){this._lastAddGraphIndex=0;kH=kC.buildFillforLineVertex(hX);this._polylineRenderData[kC.hashCode]={cacheIndex:kH.cacheIndex,hashCode:kC.hashCode,styleData:kH,texture:null,textureSize:null,zoomWithMap:null,overlay:kC,hasMultipleParts:kC.hasMultipleParts};if(kC._config.strokeOpacity>0&&kC._config.strokeWeight>0){kH=kC.buildVertex(gE,true);this._polylineRenderData[kC.hashCode+"_fill_line"]={cacheIndex:kH.cacheIndex,hashCode:kC.hashCode,styleData:kH,texture:kC._config.texture,textureSize:kC._config.textureSize,zoomWithMap:kC._config.textureZoomWithMap,overlay:kC}}}else{if(kC instanceof cs){this._lastAddGraphIndex=6;kG=kC.getFillStyleForGL();var i=kC.buildFillVertex(hX);var T=[kG,i[0],i[1]];T.overlay=kC;T.isStencilMask=true;T.hashCode=kC.hashCode;T.hasMultipleParts=kC.hasMultipleParts;this._renderData[6].push(T);this._map._featureMgr.setOverlayData(this._renderData[6],9)}else{this._lastAddGraphIndex=5;kH=kC.buildVertex(gE,true);this._polylineRenderData[kC.hashCode]={cacheIndex:kH.cacheIndex,hashCode:kC.hashCode,styleData:kH,texture:kC._config.texture,textureSize:kC._config.textureSize,zoomWithMap:kC._config.textureZoomWithMap,overlay:kC}}}}}this._renderData[kC.hashCode]=true;this._updateOverlayLoopRender();return true},_imageLoad:function(i,kD){var e=new Image();e.crossOrigin="anonymous";e.onload=function kC(){kD&&kD(this,true)};e.onerror=function T(){kD&&kD(null,false)};e.src=i},_removeGraphFromRenderData:function(T){if(!this._renderData[T.hashCode]){return false}if(T instanceof kr){for(var kC=0;kC<this._renderData[3].length;kC++){if(this._renderData[3][kC].hashCode===T.hashCode){this._renderData[3].splice(kC,1);break}}this._map._featureMgr.setOverlayData(this._renderData[3],6)}if(T instanceof hB){if(this._polylineRenderData[T.hashCode+"_fill_line"]){this._polylineRenderData[T.hashCode+"_fill_line"]=null}}if(T instanceof b7){for(var kC=0;kC<this._renderData[1].length;kC++){if(this._renderData[1][kC].hashCode===T.hashCode){var e=this._renderData[1].splice(kC,1);if(e[0].overlay._config.type==="video"||e[0].overlay.hasRAF){this._needRAF-=1}break}}this._map._featureMgr.setOverlayData(this._renderData[1],5)}if(T instanceof cs){for(var kC=0;kC<this._renderData[6].length;kC++){if(this._renderData[6][kC].hashCode===T.hashCode){this._renderData[6].splice(kC,1);break}}this._map._featureMgr.setOverlayData(this._renderData[6],9)}this._polylineRenderData[T.hashCode]=null;this._renderData[T.hashCode]=null;this._updateOverlayLoopRender();return true},_updateOverlayLoopRender:function(){var e=this;if(this._needRAF>0){if(this._rafTimer){return}this._rafTimer=requestAnimationFrame(e._loopRender.bind(e))}else{cancelAnimationFrame(this._rafTimer);this._rafTimer=undefined}},_loopRender:function(){this._map._webglMapScene.startRenderThread();this._rafTimer=requestAnimationFrame(this._loopRender.bind(this))},_updateGraphRenderData:function(T,kI){var kH;var kE=false;var kF;if(T instanceof kr){var e=T.buildFillVertex(hX,kI);for(var kD=0;kD<this._renderData[3].length;kD++){var kJ=this._renderData[3][kD];if(kJ.hashCode===T.hashCode){this._renderData[3][kD].vertex=e.vertex;this._renderData[3][kD].index=e.index;this._map._featureMgr.setOverlayData(this._renderData[3],6);this._removeGraphFromRenderData(T);this._addGraphToRenderData(T);break}}}if(T instanceof hB){kH=T.buildFillforLineVertex(hX,kI);var kG=T.hashCode;if(this._polylineRenderData[kG]){if(!kH.inCache||kH.cacheIndex!==this._polylineRenderData[kG].cacheIndex){kE=true;var kC=this._polylineRenderData[kG];kC.cacheIndex=kH.cacheIndex;kC.styleData=kH;kC.texture=null;kC.textureSize=null;kC.zoomWithMap=null;kC.overlay=T;kC.hasMultipleParts=T.hasMultipleParts}}}if(T instanceof b7){kF=T.getFillStyleForGL();var e=T.buildFillVertex(hX);for(var kD=0;kD<this._renderData[1].length;kD++){if(this._renderData[1][kD].hashCode===T.hashCode){this._renderData[1][kD][0]=kF;if(this._renderData[1][kD].opacity!==kF.opacity){this._renderData[1][kD].opacity=kF.opacity}if(T._texture){this._renderData[1][kD].textureSource=T._texture;this._renderData[1][kD].src=T._texture.src;T._texture=null}this._renderData[1][kD].vertex=e[0];this._renderData[1][kD].index=e[1];break}}this._map._featureMgr.setOverlayData(this._renderData[1],5)}if(T instanceof hB){if(T._config.strokeOpacity===0||T._config.strokeWeight===0){if(this._polylineRenderData[T.hashCode+"_fill_line"]){this._polylineRenderData[T.hashCode+"_fill_line"]=null}return true}}kH=T.buildVertex(gE,kI);var kG=T instanceof hB?T.hashCode+"_fill_line":T.hashCode;if(T instanceof hB&&!this._polylineRenderData[kG]){kE=true;this._polylineRenderData[kG]={cacheIndex:kH.cacheIndex,hashCode:kG,styleData:kH,texture:T._config.texture,textureSize:T._config.textureSize,zoomWithMap:T._config.textureZoomWithMap,overlay:T}}else{if(this._polylineRenderData[kG]&&(!kH.inCache||kH.cacheIndex!==this._polylineRenderData[kG].cacheIndex)){kE=true;var kC=this._polylineRenderData[kG];kC.cacheIndex=kH.cacheIndex;kC.styleData=kH;kC.texture=T._config.texture;kC.textureSize=T._config.textureSize;kC.zoomWithMap=T._config.textureZoomWithMap;kC.overlay=T}}return kE},_clearOverlayRenderData:function(i,e){if(this._renderData[i.hashCode]){if(e===2||e===4){this._removeMarkerFromRenderData(i)}else{this._removeGraphFromRenderData(i)}}},_exitOverlay:function(T){var e=5;if(T instanceof f8){e=5}else{if(T instanceof ke){e=2}else{if(T instanceof kr){e=3}else{if(T instanceof er){e=4}else{if(T instanceof b7){e=1}else{if(T instanceof cs){e=6}}}}}}if(!this._overlays[e]){return false}for(var kC=0;kC<this._overlays[e].length;kC++){if(this._overlays[e][kC].hashCode===T.hashCode){return true}}this._clearOverlayRenderData(T,e);return false},_exitOverlayRenderData:function(T){var e=5;if(T instanceof f8){e=5}else{if(T instanceof ke){e=2}else{if(T instanceof kr){e=3}else{if(T instanceof er){e=4}else{if(T instanceof b7){e=1}else{if(T instanceof cs){e=6}}}}}}if(!this._renderData[e]){return false}for(var kC=0;kC<this._renderData[e].length;kC++){if(this._renderData[e][kC].hashCode===T.hashCode){return true}}return false},_updateMarker:function(i,kD,kC){var T=false;if(i){kD=kD||"";if(kD==="add"||kD==="show"){if(i._visible===true&&i.getPositionIn()!==null){T=this._addMarkerToRenderData(i)}}else{if(kD==="remove"||kD==="hide"){T=this._removeMarkerFromRenderData(i)}else{T=this._updateMarkerRenderData(i,kD,kC)}}}if(T){var e=new fW("onrefresh");e.source="webgloverlaymgr";this._map.fire(e)}}});');
