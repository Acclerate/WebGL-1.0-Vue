/**/﻿_jsload&&_jsload('mvtParse', 'function c(i){var e=i?i:{};this._opt=e;this._layerName=e.layerName?e.layerName:"layer";this._idProperty=e.idProperty;this._layers=e.layers?e.layers:null;return this}c.prototype._createFeature=function(kK,kD,kL){const kG=kL.x||0;const kF=kL.y||0;const kE=kL.z||1;var kI=kK.properties||[];var e;if(!this._idProperty){e=kK.id}else{e=kI[this._idProperty]}kI[this._layerName]=kD;var kC=new gO(this._opt);if(hu.types[kK.type]===f3.POINT){var i=kK.toGeoJSON(kG,kF,kE,kL.g,kL.mc);var T=kC.readFeatureFromObject(i,{onlyGeometry:true})}else{var i=kK.toTileJSON(kG,kF,kE);var T=kC.readFeatureFromObject(i,{onlyGeometry:true,reference:null})}function kH(kN){var kM=new eA();kM.setGeometry(kN);kM.setType(T.type);kM.setId(e);kM.setProperties(kI);kM.setBox(T.bBox);kM.geojson=i;kM.layerName=kD;kM.grid=kL.g;return kM}if(T){var kC=T.geometry;var kJ=kH(kC);return kJ}return null};c.prototype.readFeatures=function(kE,e,kG,kD){var kF=this._layers;const i=kD||{};var kC=new fK(new i8(kE));var T=kC.layers;if(!kF||kF.length===0){return this._featuresByDefaultLayers(T,e,i)}else{return this._featuresByCustomLayers(T,kF,e,i)}};c.prototype._featuresByDefaultLayers=function(kJ,kD,kN){var T=new cx(this._opt,kN);var e=Object.assign(this._opt,kN);var kF=new hc(cx.layerTypes.POINT,kD,e);var kE=new hc(cx.layerTypes.LINE,kD,e);var kC=new hc(cx.layerTypes.FILL,kD,e);for(var kI in kJ){var kH=kJ[kI];for(var kG=0,kK=kH.length;kG<kK;++kG){var kM=kH.feature(kG);switch(hu.types[kM.type]){case f3.POINT:var kL=this._createFeature(kM,"point",kN);kF.add(kL.getId(),kL);break;case f3.LINE_STRING:var kL=this._createFeature(kM,"line",kN);kE.add(kL.getId(),kL);break;case f3.POLYGON:var kL=this._createFeature(kM,"fill",kN);kC.add(kL.getId(),kL);break}}}if(T.getLayerVisible(cx.layerTypes.POINT)){kF.updateGlCache();T.add(cx.layerTypes.POINT,kF)}if(T.getLayerVisible(cx.layerTypes.LINE)){kE.updateGlCache();T.add(cx.layerTypes.LINE,kE)}if(T.getLayerVisible(cx.layerTypes.FILL)){kC.updateGlCache();T.add(cx.layerTypes.FILL,kC)}return T};c.prototype._featuresByCustomLayers=function(kJ,kF,kD,kN){var kC=new cx(this._opt,kN);for(var kI in kJ){if(kF&&kF.indexOf(kI)==-1){continue}if(!kC.getLayerVisible(kI)){continue}var kH=kJ[kI];var kG=kH.name;var e=Object.assign(this._opt,kN);var T=new hc(kG,kD,e);for(var kE=0,kK=kH.length;kE<kK;++kE){var kM=kH.feature(kE);var kL=this._createFeature(kM,kG,kN);T.add(kL.getId(),kL)}T.updateGlCache();kC.add(kG,T)}return kC};c.prototype.setLayers=function(e){this._layers=e};ek.MVTParse=function(e){c.call(this,e)};e9.inherit(ek.MVTParse,c,"MVT");(function(kR){function kT(k8){return !isNaN(k8)&&k8!==null&&!Array.isArray(k8)}function kU(la,k9,k8){if(k8===void 0){k8={}}var lb={type:"Feature"};if(k8.id===0||k8.id){lb.id=k8.id}if(k8.bbox){lb.bbox=k8.bbox}lb.properties=k9||{};lb.geometry=la;return lb}function kI(k9,la){if(k9.type==="Feature"){la(k9)}else{if(k9.type==="FeatureCollection"){for(var k8=0;k8<k9.features.length;k8++){la(k9.features[k8])}}}}function kG(k9,ln){var le,lb,li,lk,lm,lf,lh,la,ll,ld,k8=0,lc=k9.type==="FeatureCollection",lg=k9.type==="Feature",lj=lc?k9.features.length:1;for(le=0;le<lj;le++){lf=lc?k9.features[le].geometry:lg?k9.geometry:k9;la=lc?k9.features[le].properties:lg?k9.properties:{};ll=lc?k9.features[le].bbox:lg?k9.bbox:undefined;ld=lc?k9.features[le].id:lg?k9.id:undefined;lh=lf?lf.type==="GeometryCollection":false;lm=lh?lf.geometries.length:1;for(li=0;li<lm;li++){lk=lh?lf.geometries[li]:lf;if(lk===null){if(ln(null,k8,la,ll,ld)===false){return false}continue}switch(lk.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(ln(lk,k8,la,ll,ld)===false){return false}break;case"GeometryCollection":for(lb=0;lb<lk.geometries.length;lb++){if(ln(lk.geometries[lb],k8,la,ll,ld)===false){return false}}break;default:throw new Error("Unknown Geometry Type")}}k8++}}function kW(k8,k9){kG(k8,function(lg,la,ld,lj,lb){var le=lg===null?null:lg.type;switch(le){case null:case"Point":case"LineString":case"Polygon":if(k9(kU(lg,ld,{bbox:lj,id:lb}),la,0)===false){return false}return}var lh;switch(le){case"MultiPoint":lh="Point";break;case"MultiLineString":lh="LineString";break;case"MultiPolygon":lh="Polygon";break}for(var lc=0;lc<lg.coordinates.length;lc++){var li=lg.coordinates[lc];var lf={type:lh,coordinates:li,};if(k9(kU(lf,ld),la,lc)===false){return false}}})}function kP(lj,lo,le){var lf,lb,la,li,k9,ll,ln,lm,ld,k8=0,lh,lc=lj.type==="FeatureCollection",lg=lj.type==="Feature",lk=lc?lj.features.length:1;for(lf=0;lf<lk;lf++){ld=(lc?lj.features[lf].geometry:(lg?lj.geometry:lj));lh=ld.type==="GeometryCollection";ln=lh?ld.geometries.length:1;for(li=0;li<ln;li++){ll=lh?ld.geometries[li]:ld;lm=ll.coordinates;k8=(le&&(ll.type==="Polygon"||ll.type==="MultiPolygon"))?1:0;if(ll.type==="Point"){lo(lm)}else{if(ll.type==="LineString"||ll.type==="MultiPoint"){for(lb=0;lb<lm.length;lb++){lo(lm[lb])}}else{if(ll.type==="Polygon"||ll.type==="MultiLineString"){for(lb=0;lb<lm.length;lb++){for(la=0;la<lm[lb].length-k8;la++){lo(lm[lb][la])}}}else{if(ll.type==="MultiPolygon"){for(lb=0;lb<lm.length;lb++){for(la=0;la<lm[lb].length;la++){for(k9=0;k9<lm[lb][la].length-k8;k9++){lo(lm[lb][la][k9])}}}}else{throw new Error("Unknown Geometry Type")}}}}}}}function kN(la,k9){for(var k8=0;k8<la.coordinates.length-1;k8++){if(kM(la.coordinates[k8],la.coordinates[k8+1],k9.coordinates)){return true}}return false}function kF(la,k9){var k8=T(la,k9);if(k8.features.length>0){return true}return false}function kH(k9,lc){for(var lb=0,k8=lc.coordinates;lb<k8.length;lb++){var ld=k8[lb];if(e(ld,k9)){return true}}var la=T(lc,k6(k9));if(la.features.length>0){return true}return false}function kO(k8,lg){for(var la=0,lf=k8.coordinates[0];la<lf.length;la++){var lc=lf[la];if(e(lc,lg)){return true}}for(var le=0,ld=lg.coordinates[0];le<ld.length;le++){var lb=ld[le];if(e(lb,k8)){return true}}var k9=T(k6(k8),k6(lg));if(k9.features.length>0){return true}return false}function T(lb,la){var ld={};var lc=[];if(lb.type==="LineString"){lb=kU(lb)}if(la.type==="LineString"){la=kU(la)}if(lb.type==="Feature"&&la.type==="Feature"&&lb.geometry!==null&&la.geometry!==null&&lb.geometry.type==="LineString"&&la.geometry.type==="LineString"&&lb.geometry.coordinates.length===2&&la.geometry.coordinates.length===2){var k9=i(lb,la);if(k9){lc.push(k9)}return k4(lc)}var k8=kY();k8.load(kS(la));kI(kS(lb),function(le){kI(k8.search(le),function(lg){var lf=i(le,lg);if(lf){var lh=kZ(lf).join(",");if(!ld[lh]){ld[lh]=true;lc.push(lf)}}})});return k4(lc)}function i(li,lg){var lm=kZ(li);var lk=kZ(lg);if(lm.length!==2){throw new Error("<intersects> line1 must only contain 2 coordinates")}if(lk.length!==2){throw new Error("<intersects> line2 must only contain 2 coordinates")}var lq=lm[0][0];var lc=lm[0][1];var lp=lm[1][0];var lb=lm[1][1];var lo=lk[0][0];var la=lk[0][1];var ln=lk[1][0];var k9=lk[1][1];var k8=(k9-la)*(lp-lq)-(ln-lo)*(lb-lc);var ll=(ln-lo)*(lc-la)-(k9-la)*(lq-lo);var lj=(lp-lq)*(lc-la)-(lb-lc)*(lq-lo);if(k8===0){if(ll===0&&lj===0){return null}return null}var lh=ll/k8;var le=lj/k8;if(lh>=0&&lh<=1&&le>=0&&le<=1){var lf=lq+lh*(lp-lq);var ld=lc+lh*(lb-lc);return k0([lf,ld])}return null}function e(lg,lf,lj){if(lj===void 0){lj={}}if(!lg){throw new Error("point is required")}if(!lf){throw new Error("polygon is required")}var li=kD(lg);var le=kE(lf);var lc=le.type;var lh=lf.bbox;var ld=le.coordinates;if(lh&&kL(li,lh)===false){return false}if(lc==="Polygon"){ld=[ld]}var k9=false;for(var lb=0;lb<ld.length&&!k9;lb++){if(kK(li,ld[lb][0],lj.ignoreBoundary)){var k8=false;var la=1;while(la<ld[lb].length&&!k8){if(kK(li,ld[lb][la],!lj.ignoreBoundary)){k8=true}la++}if(!k8){k9=true}}}return k9}function kK(lj,lc,li){var lh=false;if(lc[0][0]===lc[lc.length-1][0]&&lc[0][1]===lc[lc.length-1][1]){lc=lc.slice(0,lc.length-1)}for(var le=0,ld=lc.length-1;le<lc.length;ld=le++){var lg=lc[le][0];var lb=lc[le][1];var lf=lc[ld][0];var la=lc[ld][1];var k8=lj[1]*(lg-lf)+lb*(lf-lj[0])+la*(lj[0]-lg)===0&&(lg-lj[0])*(lf-lj[0])<=0&&(lb-lj[1])*(la-lj[1])<=0;if(k8){return !li}var k9=lb>lj[1]!==la>lj[1]&&lj[0]<((lf-lg)*(lj[1]-lb))/(la-lb)+lg;if(k9){lh=!lh}}return lh}function kM(lb,le,ld){var k8=ld[0]-lb[0];var la=ld[1]-lb[1];var k9=le[0]-lb[0];var lc=le[1]-lb[1];var lf=k8*lc-la*k9;if(lf!==0){return false}if(Math.abs(k9)>=Math.abs(lc)){if(k9>0){return lb[0]<=ld[0]&&ld[0]<=le[0]}else{return le[0]<=ld[0]&&ld[0]<=lb[0]}}else{if(lc>0){return lb[1]<=ld[1]&&ld[1]<=le[1]}else{return le[1]<=ld[1]&&ld[1]<=lb[1]}}}function k6(lc,k8){if(k8===void 0){k8={}}var la=kE(lc);var lb=la.coordinates;var k9=k8.properties?k8.properties:lc.type==="Feature"?lc.properties:{};return k7(lb,k9)}function k7(k9,k8){if(k9.length>1){return k2(k9,k8)}return kV(k9[0],k8)}function kX(k9,k8){return k9[0]===k8[0]&&k9[1]===k8[1]}function kL(k8,k9){return(k9[0]<=k8[0]&&k9[1]<=k8[1]&&k9[2]>=k8[0]&&k9[3]>=k8[1])}function kE(k8){if(k8.type==="Feature"){return k8.geometry}return k8}function kD(k8){if(!k8){throw new Error("coord is required")}if(!Array.isArray(k8)){if(k8.type==="Feature"&&k8.geometry!==null&&k8.geometry.type==="Point"){return k8.geometry.coordinates}if(k8.type==="Point"){return k8.coordinates}}if(Array.isArray(k8)&&k8.length>=2&&!Array.isArray(k8[0])&&!Array.isArray(k8[1])){return k8}throw new Error("coord must be GeoJSON Point or an Array of numbers")}function kZ(k8){if(Array.isArray(k8)){return k8}if(k8.type==="Feature"){if(k8.geometry!==null){return k8.geometry.coordinates}}else{if(k8.coordinates){return k8.coordinates}}throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function k4(la,k8){if(k8===void 0){k8={}}var k9={type:"FeatureCollection"};if(k8.id){k9.id=k8.id}if(k8.bbox){k9.bbox=k8.bbox}k9.features=la;return k9}function k2(lb,la,k8){if(k8===void 0){k8={}}var k9={type:"MultiLineString",coordinates:lb,};return kU(k9,la,k8)}function kV(lb,la,k8){if(k8===void 0){k8={}}if(lb.length<2){throw new Error("coordinates must be an array of two or more positions")}var k9={type:"LineString",coordinates:lb,};return kU(k9,la,k8)}function k0(lb,la,k8){if(k8===void 0){k8={}}if(!lb){throw new Error("coordinates is required")}if(!Array.isArray(lb)){throw new Error("coordinates must be an Array")}if(lb.length<2){throw new Error("coordinates must be at least 2 numbers long")}if(!kT(lb[0])||!kT(lb[1])){throw new Error("coordinates must contain numbers")}var k9={type:"Point",coordinates:lb,};return kU(k9,la,k8)}function k5(k9){var k8=[Infinity,Infinity,-Infinity,-Infinity];kP(k9,function(la){if(k8[0]>la[0]){k8[0]=la[0]}if(k8[1]>la[1]){k8[1]=la[1]}if(k8[2]<la[0]){k8[2]=la[0]}if(k8[3]<la[1]){k8[3]=la[1]}});return k8}var kS=(function(){function k9(lc){if(!lc){throw new Error("geojson is required")}var ld=[];kW(lc,function(le){lb(le,ld)});return k4(ld)}function lb(lc,ld){var le=[];var lf=lc.geometry;if(lf!==null){switch(lf.type){case"Polygon":le=kZ(lf);break;case"LineString":le=[kZ(lf)]}le.forEach(function(lh){var lg=k8(lh,lc.properties);lg.forEach(function(li){li.id=ld.length;ld.push(li)})})}}function k8(le,ld){var lc=[];le.reduce(function(lf,lg){var lh=kV([lf,lg],ld);lh.bbox=la(lf,lg);lc.push(lh);return lg});return lc}function la(ll,lk){var ld=ll[0];var li=ll[1];var lc=lk[0];var lh=lk[1];var lj=ld<lc?ld:lc;var lf=li<lh?li:lh;var lg=ld>lc?ld:lc;var le=li>lh?li:lh;return[lj,lf,lg,le]}return k9})();function kY(k9){var k8=new gI(k9);k8.insert=function(la){if(la.type!=="Feature"){throw new Error("invalid feature")}la.bbox=la.bbox?la.bbox:k5(la);return gI.prototype.insert.call(this,la)};k8.load=function(la){var lb=[];if(Array.isArray(la)){la.forEach(function(lc){if(lc.type!=="Feature"){throw new Error("invalid features")}lc.bbox=lc.bbox?lc.bbox:k5(lc);lb.push(lc)})}else{kI(la,function(lc){if(lc.type!=="Feature"){throw new Error("invalid features")}lc.bbox=lc.bbox?lc.bbox:k5(lc);lb.push(lc)})}return gI.prototype.load.call(this,lb)};k8.remove=function(la,lb){if(la.type!=="Feature"){throw new Error("invalid feature")}la.bbox=la.bbox?la.bbox:k5(la);return gI.prototype.remove.call(this,la,lb)};k8.clear=function(){return gI.prototype.clear.call(this)};k8.search=function(la){var lb=gI.prototype.search.call(this,this.toBBox(la));return k4(lb)};k8.collides=function(la){return gI.prototype.collides.call(this,this.toBBox(la))};k8.all=function(){var la=gI.prototype.all.call(this);return k4(la)};k8.toJSON=function(){return gI.prototype.toJSON.call(this)};k8.fromJSON=function(la){return gI.prototype.fromJSON.call(this,la)};k8.toBBox=function(la){var lb;if(la.bbox){lb=la.bbox}else{if(Array.isArray(la)&&la.length===4){lb=la}else{if(Array.isArray(la)&&la.length===6){lb=[la[0],la[1],la[3],la[4]]}else{if(la.type==="Feature"){lb=k5(la)}else{if(la.type==="FeatureCollection"){lb=k5(la)}else{throw new Error("invalid geojson")}}}}}return{minX:lb[0],minY:lb[1],maxX:lb[2],maxY:lb[3]}};return k8}function k1(k9,k8){switch(k9.type){case"Point":switch(k8.type){case"Point":return !kX(k9.coordinates,k8.coordinates);case"LineString":return !kN(k8,k9);case"Polygon":return !e(k9,k8)}break;case"LineString":switch(k8.type){case"Point":return !kN(k9,k8);case"LineString":return !kF(k9,k8);case"Polygon":return !kH(k8,k9)}break;case"Polygon":switch(k8.type){case"Point":return !e(k8,k9);case"LineString":return !kH(k9,k8);case"Polygon":return !kO(k8,k9)}}return false}function kQ(la,k9){var k8=true;kW(la,function(lb){kW(k9,function(lc){if(k8===false){return false}k8=k1(lb.geometry,lc.geometry)})});return k8}function kJ(k9,k8){if(k9[0]>k8[0]){return false}if(k9[2]<k8[2]){return false}if(k9[1]>k8[1]){return false}if(k9[3]<k8[3]){return false}return true}function k3(k8,li){if(k8.type==="Feature"&&k8.geometry===null){return false}if(li.type==="Feature"&&li.geometry===null){return false}var lc=k5(k8);var k9=k5(li);if(!kJ(lc,k9)){return false}var lh=kE(li).coordinates;for(var le=0,la=lh;le<la.length;le++){var ld=la[le];for(var lg=0,lb=ld;lg<lb.length;lg++){var lf=lb[lg];if(!e(lf,k8)){return false}}}return true}function kC(lc,la){var ld=kE(lc);var lb=kE(la);var k9=ld.type;var k8=lb.type;switch(k9){case"Polygon":switch(k8){case"Polygon":return k3(ld,lb);default:return false}default:return false}}kR.booleanDisjoint=kQ;kR.booleanContains=kC})(ek);function cx(i,e){this.layer_options=i||{};this.tile_options=e||{};this.layers={};this.labelTile=null}cx.layerTypes={POINT:"point",LINE:"line",FILL:"fill"};cx.prototype.add=function(e,i){this.layers[e]=i};cx.prototype.getLayerVisible=function(i){var T=this.layer_options.style;if(!T||!T[i]||T[i].visible===false){return false}else{var kC=this.layer_options.spanLevel||0;var kE=this.layer_options.style[i].minZoom||3;var e=this.layer_options.style[i].maxZoom||23;var kD=this.tile_options.z||0;if(kD<kE+kC||kD>e+kC){return false}return true}};cx.prototype.hasChangeLabel=function(){var e=false;for(var kC in this.layers){if(this.getLayerVisible(kC)===false){continue}var kD=this.layers[kC];if(kD.layerType==="Point"||kD.layerType==="MultiPoint"){var T=kD.active;var i=kD.getRender();if(i.point&&(T!==kD.active||kD.changeVisible)){e=true;break}}}return e};cx.prototype.getTileLabels=function(){if(this.labelTile&&this.labelTile.status!=="init"){return this.labelTile}this.labelTile={fixedLabel:[],indoorLabel:[],lineLabel:[],textureHeights:[],status:"init"};this.labelTile.tileInfo={col:this.tile_options.x||0,row:this.tile_options.y||0,zoom:this.tile_options.z||0,useZoom:this.tile_options.z||0,loopOffsetX:0};for(var T in this.layers){if(this.getLayerVisible(T)===false){continue}var kC=this.layers[T];if(kC.layerType==="Point"||kC.layerType==="MultiPoint"){var e=kC.getRender();if(e.point){for(var i=0;i<e.point.length;i++){var kD=e.point[i];if(!(kD.pt instanceof cG)){kD.pt=new cG(kD.pt[0],kD.pt[1]);kD.position=kD.pt}this.labelTile.fixedLabel.push(kD)}}}}this.labelTile.status="loaded";return this.labelTile};cx.prototype.getRender=function(){var kC=[];var T=Object.keys(this.layers);for(var e=0;e<T.length;e++){kC.push(this.layers[T[e]].getRender())}return kC};cx.prototype.serialize=function(){var i={};for(var e in this.layers){i[e]=this.layers[e].serialize()}return i};cx.prototype.deserialize=function(kD,T){kD=kD||{};for(var kC in kD){var e=new hc(kC,T,this.tile_options);var i=this.getLayerVisible(kC);if(i){this.layers[kC]=e.deserialize(kD[kC])}}return this};if(e9){ek.TileFamilyParse=function(i,e){cx.call(this,i,e)};e9.inherit(ek.TileFamilyParse,cx,"TileFamily")}function hc(i,e,T){this.layerName=i;this.layerType=undefined;this.mvtLayer=e;this.opt=T;this.features={};this.render=new fP(this.opt);this.defaultKey=3938;this.sourceGlCache=undefined;this.nowGlCache=undefined}hc.prototype.add=function(T,i,e){this.features[T]=i;if(!this.layerType){this.layerType=i.getType()}this.updateRender(i,true,e)};hc.prototype.updateRender=function(i,kC,e){if(kC===true){var kE=this.defaultKey}else{var kE=q(kC||{})}if(i.renderData[kE]){if(!i._visible){delete i.renderData[kE];return true}return false}if(this.mvtLayer.evaluates){var T=this.mvtLayer.evaluates(this.layerName,i,kC);return this.doRender(T,i,kE)}else{var kD=this;this.mvtLayer(this.layerName,i,function(kF){kD.doRender(kF,i,kE,e)});return false}};hc.prototype.doRender=function(kD,T,kF,i){var e=false;var kC=(!kD||kD.visibility===undefined?true:kD.visibility);if(T._visible!==kC){T._visible=kC;if(!kC){delete T.renderData[kF];i&&i(true);return true}e=true}else{if(T._visible===false){i&&i(false);return false}}var kE=this.render.compile(T,kD);if(kE){T.renderData[kF]=kE}i&&i(e);return e};hc.prototype.getRender=function(){var kG=false;var kH=this.mvtLayer.getAllState();var i={};var kE=false;for(var e in this.features){var kD=this.features[e];var kF=this.layerName+"_"+e;if(kH[kF]){kG=true;i[kF]=kH[kF];kD._state=kH[kF];var kI=this.updateRender(kD,kH[kF])}else{kD._state={};var kI=this.updateRender(kD,true)}if(kI&&!kE){kE=kI}}this.changeVisible=kE;if(!kG){this.active=this.defaultKey;if(kE){this.updateGlCache()}return this.sourceGlCache}else{var kC=i;var T=q(kC);this.active=T;this.updateGlCache(T);return this.nowGlCache}};hc.prototype.updateGlCache=function(e){if(e===undefined){e=this.defaultKey;this.sourceGlCache={point:this.componentPoi(true),fill:this.componentFill(true),line:this.componentLine(true)}}else{this.nowGlCache={point:this.componentPoi(),fill:this.componentFill(),line:this.componentLine()}}};hc.prototype.componentPoi=function(kC){var kE=[];if(this.layerType!==f3.POINT&&this.layerType!==f3.MULTI_POINT){return kE}for(var T in this.features){if(this.features.hasOwnProperty(T)){var kD=this.features[T];if(kC===true){var kG=this.defaultKey}else{var kG=q(kD.getState()||{})}if(kD.renderData[kG]&&kD.renderData[kG].poi){kD.renderData.active=kG;for(var e=0;e<kD.renderData[kG].poi.length;e++){var kF=kD.renderData[kG].poi[e];if(kG!==this.defaultKey){kF.cachedIsDel=kD.renderData[this.defaultKey].poi[e]["cachedIsDel"];kF.isDel=kD.renderData[this.defaultKey].poi[e]["isDel"];kF.displayRange=kD.renderData[this.defaultKey].poi[e]["displayRange"];kF.processedInZoom=kD.renderData[this.defaultKey].poi[e]["processedInZoom"]}kE.push(kF)}}}}return kE};hc.prototype.componentFill=function(kD){var e=[];if(this.layerType!==f3.POLYGON&&this.layerType!==f3.MULTI_POLYGON){return e}for(var kC in this.features){if(this.features.hasOwnProperty(kC)){var kE=this.features[kC];if(kD===true){var kG=this.defaultKey}else{var kG=q(kE.getState()||{})}if(kE.renderData[kG]&&kE.renderData[kG].fill){kE.renderData.active=kG;for(var T=0;T<kE.renderData[kG].fill.length;T++){e.push(kE.renderData[kG].fill[T])}}}}var kF=this.render.combineFill(e);return kF};hc.prototype.componentLine=function(kD){var kF=null;switch(this.layerType){case f3.LINE_STRING:case f3.MULTI_LINE_STRING:case f3.MULTI_POLYGON:case f3.POLYGON:var kC=[];for(var T in this.features){if(this.features.hasOwnProperty(T)){var kE=this.features[T];if(kD){var kG=this.defaultKey}else{var kG=q(kE.getState()||{})}if(kE.renderData[kG]&&kE.renderData[kG].line){kE.renderData.active=kG;for(var e=0;e<kE.renderData[kG].line.length;e++){kC.push([kE.renderData[kG].line[e],kE.getState()||{}])}}}}kC.sort(function(kH,i){return(i[1].rank||0)-(kH[1].rank||0)});kF=this.render.combineLine(kC);break;default:}return kF};hc.prototype.serialize=function(){var i={};for(var e in this.features){var T=this.features[e];i[e]=T.serialize()}return{layerType:this.layerType,features:i,}};hc.prototype.deserialize=function(i){this.layerType=i.layerType;for(var e in i.features){this.features[e]=new eA().deserialize(i.features[e])}this.updateGlCache();return this};var fP=(function(){function kQ(kV){this.opt=kV}kQ.prototype.createTexture=function(kV){if(kV.strokeStyle==="dashed"||kV.strokeStyle==="dotted"){if(this.opt.isWorker){var kW=kV.texture}else{var kW=kU(kV)}}return kW};kQ.prototype.combineLine=function(kW){var kX=[];kX.length=0;kX[0]={style:[],styleData:[[],[]]};for(var kV=0;kV<kW.length;kV++){kF(kX,kW[kV][0])}return kX};kQ.prototype.combineFill=function(kX){var kW={};var kV=[];for(var k0=0;k0<kX.length;k0++){var k1=kM(kX[k0]);if(k1.hasMultipleParts){kV.push(k1)}else{if(kW[k1[0]]){kK(kW[k1[0]],k1,kW[k1[0]][1].length/2)}else{kW[k1[0]]=k1}}}var kZ=Object.keys(kW);for(var kY=0;kY<kZ.length;kY++){kV.push(kW[kZ[kY]])}return kV};kQ.prototype.compile=function(k1,kX){var k0=k1.getGeometry();var kZ={};var kW=JSON.parse(JSON.stringify(cB));switch(k1.getType()){case f3.POINT:if(!this.opt.isWorker){var k2=kW.point;var kV=Object.assign(k2,kX)}else{var kV=kX}kZ.poi=kH([k0],kV,k1,this.opt);break;case f3.MULTI_POINT:if(!this.opt.isWorker){var k2=kW.point;var kV=Object.assign(k2,kX)}else{var kV=kX}kZ.poi=kH(k0,kV,k1,this.opt);break;case f3.LINE_STRING:if(!this.opt.isWorker){var k2=kW.polyline;var kV=Object.assign(k2,kX)}else{var kV=kX}kV.spanLevel=this.opt.spanLevel||0;var kY=this.createTexture(kV);kZ.line=i([k0],kV,false,kY);break;case f3.MULTI_LINE_STRING:if(!this.opt.isWorker){var k2=kW.polyline;var kV=Object.assign(k2,kX)}else{var kV=kX}kV.spanLevel=this.opt.spanLevel||0;var kY=this.createTexture(kV);kZ.line=i(k0,kV,false,kY);break;case f3.MULTI_POLYGON:if(!this.opt.isWorker){var k2=kW.polygon;var kV=Object.assign(k2,kX)}else{var kV=kX}kV.spanLevel=this.opt.spanLevel||0;kZ.fill=e(k0,kV);if(kV.strokeOpacity>0&&kV.strokeWeight>0){var kY=this.createTexture(kV);kZ.line=i(k0,kV,false,kY)}break;case f3.POLYGON:if(!this.opt.isWorker){var k2=kW.polygon;var kV=Object.assign(k2,kX)}else{var kV=kX}kV.spanLevel=this.opt.spanLevel||0;kZ.fill=e([k0],kV);if(kV.strokeOpacity>0&&kV.strokeWeight>0){var kY=this.createTexture(kV);kZ.line=i([k0],kV,false,kY)}break;default:throw new Error("geojson类型错误: "+k1.getType())}return kZ};function kG(kV){return !!kV&&"[object Array]"===Object.prototype.toString.call(kV)}function kJ(kV){return !isNaN(Number(kV))&&null!==kV&&!kG(kV)}function kH(kZ,kV,k4,kW){var k0=[];var k1=kW.z||10;for(var kY=0;kY<kZ.length;kY++){if(!kJ(kZ[kY].lng)||!kJ(kZ[kY].lat)){continue}var k3=gcoord.transform([kZ[kY].lng,kZ[kY].lat],"BD09","BD09MC");var k2={guid:k4.getId(),type:"fixed",custom:true,layerName:k4.layerName,pt:k3,position:k3,displayRange:[k1-1,k1+1],textMargin:kV.textMargin,name:kV.name,textOnIcon:kV.textOnIcon,iconSize:kV.textOnIconSize,icon:kV.textOnIconUrl,symbol:{path:kV.symbolPath,fillColor:kV.symbolFillColor,fillOpacity:kV.symbolFillOpacity,scale:kV.symbolScale,rotation:kV.symbolRotation,strokeColor:kV.symbolStrokeColor,strokeOpacity:kV.symbolStrokeOpacity,strokeWeight:kV.symbolStrokeWeight},style:{fontSize:kV.fontSize,color:kV.color,haloSize:kV.haloSize,strokeColor:kV.strokeColor,icon:kV.icon,iconSize:kV.iconSize},uid:kV.uid,direction:kV.direction,rank:kV.rank||50000,processedInZoom:k1};var kX={textMargin:kV.textMargin,textOnIcon:kV.textOnIcon,iconSize:kV.textOnIconSize,style:{color:kV.color,strokeColor:kV.strokeColor,fontSize:kV.fontSize,haloSize:kV.haloSize,}};k2.styleId=q(kX);k2.iconPos=kN(k2.style,1);k0.push(k2)}return k0}function kN(k7,k0){if(!k7||!k7.icon||!k7.iconSize||k7.iconSize.length<2){return null}var k1=2;var kZ=k7.iconSize[0]/k1*k0;var k4=k7.iconSize[1]/k1*k0;var kY=Math.round(-kZ/2);var k6=Math.round(-k4/2);var kX=kY+kZ;var k5=k6;var kW=kX;var k3=k5+k4;var kV=kY;var k2=k3;return{vertex:[kY,k6,kX,k5,kW,k3,kY,k6,kW,k3,kV,k2],texcoord:null,width:kZ,height:k4,iconType:k7.icon}}function i(k2,kV,kY,k3){var kZ=[];for(var k1=0;k1<k2.length;k1++){var k0=k2[k1];var kW=false;if(!(k0[0] instanceof cG)){kW=true}var k4=T(k0,kV,kY,kW);var kX=kV.strokeWeight;kZ[k1]={width:kX,styleData:k4,texture:k3?k3.texture:null,textureSize:k3?k3.textureSize:null,zoomWithMap:true,overlay:{_config:{textureRepeat:true},_totalDashLen:k3?k3.totalDashLen:null,canRenderDataBeMerged:(k3&&k3.texture)?false:true}}}return kZ}function e(k1,kV){var k3=[];for(var k0=0;k0<k1.length;k0++){var kZ=k1[k0];var kW=false;if(!(kZ[0] instanceof cG)){kW=true}var k2=kO(kV.fillColor,kV.fillOpacity,true).join(",");var kY=kE(kZ,kW);var kX=[k2,kY[0],kY[1]];kX.hasMultipleParts=kW;k3.push(kX)}return k3}function kE(kX,kV){var k3=kP(kX,kV);var k4=[];var k0;var k1=[];var kZ=0;for(var kY=0;kY<k3.length;kY++){if(kY>0){kZ+=k3[kY-1].length}k0=hX(k3[kY].pointsArray,null,null,kZ);for(var kW=0,k2=k0.length;kW<k2;kW+=3){k4.push(k0[kW],k0[kW+1],k0[kW+2])}k1=k1.concat(k3[kY].pointsArray)}var k5=[new Float32Array(k1),new Uint16Array(k4)];return k5}function kP(kY,kV){var kX=[];if(!kV){kX[0]=kD(kY)}else{for(var kW=0;kW<kY.length;kW++){kX.push(kD(kY[kW]))}}return kX}function kD(k0){var k1=[];var k2=[];k1.pointsArray=k2;var kW=[k0[0].lng,k0[0].lat];k1.push(kW);k2.push(kW[0],kW[1]);for(var kZ=1,kX=1,kV=k0.length;kZ<kV;kZ++){var kY=[k0[kZ].lng,k0[kZ].lat];if(kY[0]!==k1[kX-1][0]||kY[1]!==k1[kX-1][1]){k1.push(kY);k2.push(kY[0],kY[1]);kX++}}return k1}function kO(kY,kV,kX){var kW=hW.formatColorCssToRgbaArray(kY,kV,kX);return kW}function kU(kZ){var kY=document.createElement("canvas");var kV;var kX;if(kZ.strokeStyle==="dashed"){kV=16;kX=kV*8}else{if(kZ.strokeStyle==="dotted"){kV=32;kX=kV*2}}kY.width=kV;kY.height=kX;var kW=kY.getContext("2d");kW.fillStyle=kZ.strokeColor;kW.globalAlpha=kZ.strokeOpacity;var k0=kZ.strokeWeight*2;if(kZ.strokeStyle==="dashed"){k0=kT(kW,kV,kX,kZ)}else{if(kZ.strokeStyle==="dotted"){k0=kI(kW,kV,kX,kZ.strokeWeight)}}return{totalDashLen:k0,texture:kY,textureSize:[kV,kX]}}function T(k2,k3,kY,kV){var k1=[];var k6=[];var k7=[];var kX=iV.JOININDEX[k3.strokeLineJoin];var k5=iV.CAPINDEX[k3.strokeLineCap];var kZ=kO(k3.strokeColor,k3.strokeOpacity,false);var kW=k3.strokeWeight/2;if(k3.spanLevel){kW=kW*Math.pow(2,k3.spanLevel)}if(kY){var k4=kR(k2)}else{var k4=kP(k2,kV)}for(var k0=0;k0<k4.length;k0++){if(k4[k0].length<2){continue}if(k1.length/6+gE.getVertexCount(k4[k0].length)>65536){k7.push([k1,k6]);k1=[];k6=[]}gE.buildData(k4[k0],kX,k5,k1,k6,kZ,kW)}k7.push([k1,k6]);return k7}function kR(k4){var k1=[];var kX={minX:0,minY:0,maxX:256,maxY:256};var k6=k4;if(k4[0] instanceof cG){k6=[k4]}for(var k2=0;k2<k6.length;k2++){var k5=k6[k2];for(var kY=0,kV=k5.length-1;kY<kV;kY++){var k0=k5[kY];var kZ=k5[kY+1];var k3=bz({x:k0.lng,y:k0.lat},{x:kZ.lng,y:kZ.lat},kX);if(k3){k1.push(k3)}}}var kW=[[]];for(kY=0,kV=k1.length;kY<kV;kY++){if(k1[kY].clip){kW[kW.length-1].push([k1[kY].pixel0.x,k1[kY].pixel0.y]);kW[kW.length-1].push([k1[kY].pixel1.x,k1[kY].pixel1.y]);if(k1[kY+1]&&k1[kY+1].clip){kW.push([])}}else{kW[kW.length-1].push([k1[kY].pixel0.x,k1[kY].pixel0.y]);if(kY===k1.length-1){kW[kW.length-1].push([k1[kY].pixel1.x,k1[kY].pixel1.y])}}}return kW}function kT(k3,kX,kZ,kW){var k1=kW.dashArray;if(!k1){k3.fillRect(0,0,kX,kZ/2);return kW.strokeWeight*4}else{var k2=0;if(k1.length%2!==0){k1=k1.concat(k1)}for(var kY=0;kY<k1.length;kY++){k2+=k1[kY]}var kV=0;for(var kY=0;kY<k1.length;kY++){var k0=k1[kY]/k2*kZ;if(kY%2===0){k3.fillRect(0,kV,kX,k0)}kV+=k0}return k2}}function kI(kW,kV,kX,kY){kW.beginPath();kW.arc(kV/2,kV/2,kV/2,0,2*Math.PI);kW.fill();kW.closePath();return kY*2}function kF(kW,lb){var k9=kW.length-1;var k0=kW[k9];var kX=kW[k9]["styleData"][0];var k5=kW[k9]["styleData"][1];var k6=9;for(var kZ=0;kZ<lb.styleData.length;kZ++){var kY=lb.styleData[kZ];var la=kY[0];var k2=kY[1];var k4=kX.length/k6;var k8=la.length/k6;var kV=lb.overlay["canRenderDataBeMerged"];var k7=true;if(k0.overlay&&!k0.overlay["canRenderDataBeMerged"]){k7=false}if(k4+k8>65536||(k0.styleData[0].length>0&&kV===false)||k7===false){k9++;k0=kW[k9]={style:[],styleData:[[],[]],texture:null,textureSize:null,zoomWithMap:null,overlay:null};kX=k0.styleData[0];k5=k0.styleData[1];k4=0}if(k0.styleData[0].length===0&&kV===false){k0.texture=lb.texture;k0.textureSize=lb.textureSize;k0.zoomWithMap=lb.zoomWithMap;k0.overlay=lb.overlay}for(var k3=0;k3<k8;k3++){kX[kX.length]=la[k3*k6];kX[kX.length]=la[k3*k6+1];kX[kX.length]=la[k3*k6+2];kX[kX.length]=la[k3*k6+3];kX[kX.length]=la[k3*k6+4];kX[kX.length]=la[k3*k6+5];kX[kX.length]=la[k3*k6+6];kX[kX.length]=la[k3*k6+7];kX[kX.length]=la[k3*k6+8]}for(var k1=0;k1<k2.length;k1++){k5[k5.length]=k2[k1]+k4}}}function kS(kY){var kV=new ArrayBuffer(kY.length/8*20);var k2=new Float32Array(kV);var k1=new Uint8Array(kV);var kX=0;var k0=12;var kW=4;for(var kZ=0;kZ<kY.length;kZ+=8){k2[kX]=kY[kZ];k2[kX+1]=kY[kZ+1];k2[kX+2]=kY[kZ+2]/100;k1[k0]=kY[kZ+3];k1[k0+1]=kY[kZ+4];k1[k0+2]=kY[kZ+5];k1[k0+3]=kY[kZ+6];k2[kW]=kY[kZ+7];kX+=5;k0+=20;kW+=5}return k2}function kC(kY,kW,kX){for(var kV=0;kV<kW.length;kV++){kY[kY.length]=kW[kV]+kX}}function kM(kZ){var kY=kZ[1].constructor;var kW=new kY(kZ[1].length);kW.set(kZ[1],0);var k0=kZ[2].constructor;var kX=new k0(kZ[2].length);kX.set(kZ[2],0);var kV=[kZ[0],kW,kX];if(kZ.hasMultipleParts){kV.hasMultipleParts=kZ.hasMultipleParts}return kV}function kK(kV,k0,kX){var kW=kV[1];var kZ=k0[1];var kY=kV[2];var k1=k0[2];kV[1]=kL(kW,kZ);kV[2]=kL(kY,k1,kX);return kV}function kL(kV,k0,kZ){if(kV.constructor===ArrayBuffer){var kX=new Uint8Array(kV.byteLength+k0.byteLength);kX.set(new Uint8Array(kV),0);kX.set(new Uint8Array(k0),kV.byteLength);return kX.buffer}else{var kY=kV.constructor;var kX=new kY(kV.length+k0.length);kX.set(kV,0);if(kZ){for(var kW=0;kW<k0.length;kW++){k0[kW]+=kZ}}kX.set(k0,kV.length);return kX}}return kQ})();var gI=(function(){function kC(lf,lg,lj,lh,li){k1(lf,lg,lj||0,lh||(lf.length-1),li||kU)}function k1(ln,lk,li,lr,lf){while(lr>li){if(lr-li>600){var lh=lr-li+1;var lj=lk-li+1;var lp=Math.log(lh);var lt=0.5*Math.exp(2*lp/3);var lo=0.5*Math.sqrt(lp*lt*(lh-lt)/lh)*(lj-lh/2<0?-1:1);var lq=Math.max(li,Math.floor(lk-lj*lt/lh+lo));var lg=Math.min(lr,Math.floor(lk+(lh-lj)*lt/lh+lo));k1(ln,lk,lq,lg,lf)}var ls=ln[lk];var lm=li;var ll=lr;k2(ln,li,lk);if(lf(ln[lr],ls)>0){k2(ln,li,lr)}while(lm<ll){k2(ln,lm,ll);lm++;ll--;while(lf(ln[lm],ls)<0){lm++}while(lf(ln[ll],ls)>0){ll--}}if(lf(ln[li],ls)===0){k2(ln,li,ll)}else{ll++;k2(ln,ll,lr)}if(ll<=lk){li=ll+1}if(lk<=ll){lr=ll-1}}}function k2(lf,li,lg){var lh=lf[li];lf[li]=lf[lg];lf[lg]=lh}function kU(lg,lf){return lg<lf?-1:lg>lf?1:0}var kQ=function kQ(lf){if(lf===void 0){lf=9}this._maxEntries=Math.max(4,lf);this._minEntries=Math.max(2,Math.ceil(this._maxEntries*0.4));this.clear()};kQ.prototype.all=function kL(){return this._all(this.data,[])};kQ.prototype.search=function ld(ll){var lk=this.data;var lf=[];if(!kF(ll,lk)){return lf}var lj=this.toBBox;var li=[];while(lk){for(var lh=0;lh<lk.children.length;lh++){var lm=lk.children[lh];var lg=lk.leaf?lj(lm):lm;if(kF(ll,lg)){if(lk.leaf){lf.push(lm)}else{if(k0(ll,lg)){this._all(lm,lf)}else{li.push(lm)}}}}lk=li.pop()}return lf};kQ.prototype.collides=function kX(lj){var li=this.data;if(!kF(lj,li)){return false}var lh=[];while(li){for(var lg=0;lg<li.children.length;lg++){var lk=li.children[lg];var lf=li.leaf?this.toBBox(lk):lk;if(kF(lj,lf)){if(li.leaf||k0(lj,lf)){return true}lh.push(lk)}}li=lh.pop()}return false};kQ.prototype.load=function k9(li){if(!(li&&li.length)){return this}if(li.length<this._minEntries){for(var lf=0;lf<li.length;lf++){this.insert(li[lf])}return this}var lh=this._build(li.slice(),0,li.length-1,0);if(!this.data.children.length){this.data=lh}else{if(this.data.height===lh.height){this._splitRoot(this.data,lh)}else{if(this.data.height<lh.height){var lg=this.data;this.data=lh;lh=lg}this._insert(lh,this.data.height-lh.height-1,true)}}return this};kQ.prototype.insert=function T(lf){if(lf){this._insert(lf,this.data.height-1)}return this};kQ.prototype.clear=function k7(){this.data=le([]);return this};kQ.prototype.remove=function kR(ln,lh){if(!ln){return this}var lg=this.data;var lm=this.toBBox(ln);var lo=[];var lj=[];var li,ll,lf;while(lg||lo.length){if(!lg){lg=lo.pop();ll=lo[lo.length-1];li=lj.pop();lf=true}if(lg.leaf){var lk=i(ln,lg.children,lh);if(lk!==-1){lg.children.splice(lk,1);lo.push(lg);this._condense(lo);return this}}if(!lf&&!lg.leaf&&k0(lg,lm)){lo.push(lg);lj.push(li);li=0;ll=lg;lg=lg.children[0]}else{if(ll){li++;lg=ll.children[li];lf=false}else{lg=null}}}return this};kQ.prototype.toBBox=function kP(lf){return lf};kQ.prototype.compareMinX=function kW(lg,lf){return lg.minX-lf.minX};kQ.prototype.compareMinY=function kS(lg,lf){return lg.minY-lf.minY};kQ.prototype.toJSON=function k4(){return this.data};kQ.prototype.fromJSON=function lc(lf){this.data=lf;return this};kQ.prototype._all=function kK(lh,lf){var lg=[];while(lh){if(lh.leaf){lf.push.apply(lf,lh.children)}else{lg.push.apply(lg,lh.children)}lh=lg.pop()}return lf};kQ.prototype._build=function la(lm,lg,lp,lq){var lk=lp-lg+1;var ll=this._maxEntries;var lh;if(lk<=ll){lh=le(lm.slice(lg,lp+1));kZ(lh,this.toBBox);return lh}if(!lq){lq=Math.ceil(Math.log(lk)/Math.log(ll));ll=Math.ceil(lk/Math.pow(ll,lq-1))}lh=le([]);lh.leaf=false;lh.height=lq;var ln=Math.ceil(lk/ll);var lo=ln*Math.ceil(Math.sqrt(ll));kT(lm,lg,lp,lo,this.compareMinX);for(var lj=lg;lj<=lp;lj+=lo){var lf=Math.min(lj+lo-1,lp);kT(lm,lj,lf,ln,this.compareMinY);for(var li=lj;li<=lf;li+=ln){var lr=Math.min(li+ln-1,lf);lh.children.push(this._build(lm,li,lr,lq-1))}}kZ(lh,this.toBBox);return lh};kQ.prototype._chooseSubtree=function kI(lo,lj,lf,lp){while(true){lp.push(lj);if(lj.leaf||lp.length-1===lf){break}var li=Infinity;var ln=Infinity;var ll=(void 0);for(var lk=0;lk<lj.children.length;lk++){var lh=lj.children[lk];var lg=lb(lh);var lm=k3(lo,lh)-lg;if(lm<ln){ln=lm;li=lg<li?lg:li;ll=lh}else{if(lm===ln){if(lg<li){li=lg;ll=lh}}}}lj=ll||lj.children[0]}return lj};kQ.prototype._insert=function kN(lh,lk,li){var lj=li?lh:this.toBBox(lh);var lg=[];var lf=this._chooseSubtree(lj,this.data,lk,lg);lf.children.push(lh);kD(lf,lj);while(lk>=0){if(lg[lk].children.length>this._maxEntries){this._split(lg,lk);lk--}else{break}}this._adjustParentBBoxes(lj,lg,lk)};kQ.prototype._split=function kV(lj,ll){var li=lj[ll];var lk=li.children.length;var lf=this._minEntries;this._chooseSplitAxis(li,lf,lk);var lg=this._chooseSplitIndex(li,lf,lk);var lh=le(li.children.splice(lg,li.children.length-lg));lh.height=li.height;lh.leaf=li.leaf;kZ(li,this.toBBox);kZ(lh,this.toBBox);if(ll){lj[ll-1].children.push(lh)}else{this._splitRoot(li,lh)}};kQ.prototype._splitRoot=function kY(lg,lf){this.data=le([lg,lf]);this.data.height=lg.height+1;this.data.leaf=false;kZ(this.data,this.toBBox)};kQ.prototype._chooseSplitIndex=function kJ(lj,lk,ln){var lm;var lp=Infinity;var li=Infinity;for(var ll=lk;ll<=ln-lk;ll++){var lh=k6(lj,0,ll,this.toBBox);var lg=k6(lj,ll,ln,this.toBBox);var lo=kM(lh,lg);var lf=lb(lh)+lb(lg);if(lo<lp){lp=lo;lm=ll;li=lf<li?lf:li}else{if(lo===lp){if(lf<li){li=lf;lm=ll}}}}return lm||ln-lk};kQ.prototype._chooseSplitAxis=function k5(lj,lg,ll){var lh=lj.leaf?this.compareMinX:kH;var lf=lj.leaf?this.compareMinY:kG;var li=this._allDistMargin(lj,lg,ll,lh);var lk=this._allDistMargin(lj,lg,ll,lf);if(li<lk){lj.children.sort(lh)}};kQ.prototype._allDistMargin=function kO(lj,lk,lp,lf){lj.children.sort(lf);var li=this.toBBox;var lq=k6(lj,0,lk,li);var lo=k6(lj,lp-lk,lp,li);var ll=k8(lq)+k8(lo);for(var ln=lk;ln<lp-lk;ln++){var lh=lj.children[ln];kD(lq,lj.leaf?li(lh):lh);ll+=k8(lq)}for(var lg=lp-lk-1;lg>=lk;lg--){var lm=lj.children[lg];kD(lo,lj.leaf?li(lm):lm);ll+=k8(lo)}return ll};kQ.prototype._adjustParentBBoxes=function kE(lh,lg,li){for(var lf=li;lf>=0;lf--){kD(lg[lf],lh)}};kQ.prototype._condense=function e(lg){for(var lf=lg.length-1,lh=(void 0);lf>=0;lf--){if(lg[lf].children.length===0){if(lf>0){lh=lg[lf-1].children;lh.splice(lh.indexOf(lg[lf]),1)}else{this.clear()}}else{kZ(lg[lf],this.toBBox)}}};function i(li,lf,lh){if(!lh){return lf.indexOf(li)}for(var lg=0;lg<lf.length;lg++){if(lh(li,lf[lg])){return lg}}return -1}function kZ(lg,lf){k6(lg,0,lg.children.length,lf,lg)}function k6(li,lf,lj,lh,lk){if(!lk){lk=le(null)}lk.minX=Infinity;lk.minY=Infinity;lk.maxX=-Infinity;lk.maxY=-Infinity;for(var lg=lf;lg<lj;lg++){var ll=li.children[lg];kD(lk,li.leaf?lh(ll):ll)}return lk}function kD(lg,lf){lg.minX=Math.min(lg.minX,lf.minX);lg.minY=Math.min(lg.minY,lf.minY);lg.maxX=Math.max(lg.maxX,lf.maxX);lg.maxY=Math.max(lg.maxY,lf.maxY);return lg}function kH(lg,lf){return lg.minX-lf.minX}function kG(lg,lf){return lg.minY-lf.minY}function lb(lf){return(lf.maxX-lf.minX)*(lf.maxY-lf.minY)}function k8(lf){return(lf.maxX-lf.minX)+(lf.maxY-lf.minY)}function k3(lg,lf){return(Math.max(lf.maxX,lg.maxX)-Math.min(lf.minX,lg.minX))*(Math.max(lf.maxY,lg.maxY)-Math.min(lf.minY,lg.minY))}function kM(lh,lg){var lf=Math.max(lh.minX,lg.minX);var lk=Math.max(lh.minY,lg.minY);var lj=Math.min(lh.maxX,lg.maxX);var li=Math.min(lh.maxY,lg.maxY);return Math.max(0,lj-lf)*Math.max(0,li-lk)}function k0(lg,lf){return lg.minX<=lf.minX&&lg.minY<=lf.minY&&lf.maxX<=lg.maxX&&lf.maxY<=lg.maxY}function kF(lg,lf){return lf.minX<=lg.maxX&&lf.minY<=lg.maxY&&lf.maxX>=lg.minX&&lf.maxY>=lg.minY}function le(lf){return{children:lf,height:1,leaf:true,minX:Infinity,minY:Infinity,maxX:-Infinity,maxY:-Infinity}}function kT(lg,lk,li,ll,lj){var lf=[lk,li];while(lf.length){li=lf.pop();lk=lf.pop();if(li-lk<=ll){continue}var lh=lk+Math.ceil((li-lk)/ll/2)*ll;kC(lg,lh,lk,li,lj);lf.push(lk,lh,lh,li)}}return kQ})();function jw(){}jw.read=function(kH,kG,kD,kC,kK){var kL;var kF;var kE=(kK*8)-kC-1;var kJ=(1<<kE)-1;var T=kJ>>1;var kN=-7;var kI=kD?(kK-1):0;var kM=kD?-1:1;var kO=kH[kG+kI];kI+=kM;kL=kO&((1<<(-kN))-1);kO>>=(-kN);kN+=kE;for(;kN>0;kL=(kL*256)+kH[kG+kI],kI+=kM,kN-=8){}kF=kL&((1<<(-kN))-1);kL>>=(-kN);kN+=kC;for(;kN>0;kF=(kF*256)+kH[kG+kI],kI+=kM,kN-=8){}if(kL===0){kL=1-T}else{if(kL===kJ){return kF?NaN:((kO?-1:1)*Infinity)}else{kF=kF+Math.pow(2,kC);kL=kL-T}}return(kO?-1:1)*kF*Math.pow(2,kL-kC)};jw.write=function(kI,kP,kH,kD,kC,kL){var kM;var kF;var kO;var kE=(kL*8)-kC-1;var kK=(1<<kE)-1;var T=kK>>1;var kG=(kC===23?Math.pow(2,-24)-Math.pow(2,-77):0);var kJ=kD?0:(kL-1);var kN=kD?1:-1;var kQ=kP<0||(kP===0&&1/kP<0)?1:0;kP=Math.abs(kP);if(isNaN(kP)||kP===Infinity){kF=isNaN(kP)?1:0;kM=kK}else{kM=Math.floor(Math.log(kP)/Math.LN2);if(kP*(kO=Math.pow(2,-kM))<1){kM--;kO*=2}if(kM+T>=1){kP+=kG/kO}else{kP+=kG*Math.pow(2,1-T)}if(kP*kO>=2){kM++;kO/=2}if(kM+T>=kK){kF=0;kM=kK}else{if(kM+T>=1){kF=((kP*kO)-1)*Math.pow(2,kC);kM=kM+T}else{kF=kP*Math.pow(2,T-1)*Math.pow(2,kC);kM=0}}}for(;kC>=8;kI[kH+kJ]=kF&255,kJ+=kN,kF/=256,kC-=8){}kM=(kM<<kC)|kF;kE+=kC;for(;kE>0;kI[kH+kJ]=kM&255,kJ+=kN,kM/=256,kE-=8){}kI[kH+kJ-kN]|=kQ*128};function i8(e){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(e)?e:new Uint8Array(e||0);this.pos=0;this.type=0;this.length=this.buf.length}i8.Varint=0;i8.Fixed64=1;i8.Bytes=2;i8.Fixed32=5;var ah=(1<<16)*(1<<16);var iO=1/ah;var fn=12;var ao=typeof TextDecoder==="undefined"?null:new TextDecoder("utf8");i8.prototype={destroy:function(){this.buf=null},readFields:function(kD,i,T){T=T||this.length;while(this.pos<T){var kE=this.readVarint();var e=kE>>3;var kC=this.pos;this.type=kE&7;kD(e,i,this);if(this.pos===kC){this["skip"](kE)}}return i},readMessage:function(i,e){return this["readFields"](i,e,this.readVarint()+this.pos)},readFixed32:function(){var e=bW(this.buf,this.pos);this.pos+=4;return e},readSFixed32:function(){var e=n(this.buf,this.pos);this.pos+=4;return e},readFixed64:function(){var e=bW(this.buf,this.pos)+bW(this.buf,this.pos+4)*ah;this.pos+=8;return e},readSFixed64:function(){var e=bW(this.buf,this.pos)+n(this.buf,this.pos+4)*ah;this.pos+=8;return e},readFloat:function(){var e=jw.read(this.buf,this.pos,true,23,4);this.pos+=4;return e},readDouble:function(){var e=jw.read(this.buf,this.pos,true,52,8);this.pos+=8;return e},readVarint:function(kC){var i=this.buf||[],T,e;e=i[this.pos++];T=e&127;if(e<128){return T}e=i[this.pos++];T|=(e&127)<<7;if(e<128){return T}e=i[this.pos++];T|=(e&127)<<14;if(e<128){return T}e=i[this.pos++];T|=(e&127)<<21;if(e<128){return T}e=i[this.pos];T|=(e&15)<<28;return fk(T,kC,this)},readVarint64:function(){return this.readVarint(true)},readSVarint:function(){var e=this.readVarint();return e%2===1?(e+1)/-2:e/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var e=this.readVarint()+this.pos;var i=this.pos;this.pos=e;if(e-i>=fn&&ao){return jU(this.buf,i,e)}return aE(this.buf,i,e)},readBytes:function(){var i=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,i);this.pos=i;return e},readPackedVarint:function(e,T){if(this.type!==i8.Bytes){return e.push(this.readVarint(T))}var i=fN(this);e=e||[];while(this.pos<i){e.push(this.readVarint(T))}return e},readPackedSVarint:function(e){if(this.type!==i8.Bytes){return e.push(this.readSVarint())}var i=fN(this);e=e||[];while(this.pos<i){e.push(this.readSVarint())}return e},readPackedBoolean:function(e){if(this.type!==i8.Bytes){return e.push(this.readBoolean())}var i=fN(this);e=e||[];while(this.pos<i){e.push(this.readBoolean())}return e},readPackedFloat:function(e){if(this.type!==i8.Bytes){return e.push(this.readFloat())}var i=fN(this);e=e||[];while(this.pos<i){e.push(this.readFloat())}return e},readPackedDouble:function(e){if(this.type!==i8.Bytes){return e.push(this.readDouble())}var i=fN(this);e=e||[];while(this.pos<i){e.push(this.readDouble())}return e},readPackedFixed32:function(e){if(this.type!==i8.Bytes){return e.push(this.readFixed32())}var i=fN(this);e=e||[];while(this.pos<i){e.push(this.readFixed32())}return e},readPackedSFixed32:function(e){if(this.type!==i8.Bytes){return e.push(this.readSFixed32())}var i=fN(this);e=e||[];while(this.pos<i){e.push(this.readSFixed32())}return e},readPackedFixed64:function(e){if(this.type!==i8.Bytes){return e.push(this.readFixed64())}var i=fN(this);e=e||[];while(this.pos<i){e.push(this.readFixed64())}return e},readPackedSFixed64:function(e){if(this.type!==i8.Bytes){return e.push(this.readSFixed64())}var i=fN(this);e=e||[];while(this.pos<i){e.push(this.readSFixed64())}return e},skip:function(i){var e=i&7;if(e===i8.Varint){while(this.buf[this.pos++]>127){}}else{if(e===i8.Bytes){this.pos=this.readVarint()+this.pos}else{if(e===i8.Fixed32){this.pos+=4}else{if(e===i8.Fixed64){this.pos+=8}else{throw new Error("Unimplemented type: "+e)}}}}},writeTag:function(e,i){this.writeVarint((e<<3)|i)},realloc:function(i){var T=this.length||16;while(T<this.pos+i){T*=2}if(T!==this.length){var e=new Uint8Array(T);e.set(this.buf);this.buf=e;this.length=T}},finish:function(){this.length=this.pos;this.pos=0;return this.buf.subarray(0,this.length)},writeFixed32:function(e){this.realloc(4);g6(this.buf,e,this.pos);this.pos+=4},writeSFixed32:function(e){this.realloc(4);g6(this.buf,e,this.pos);this.pos+=4},writeFixed64:function(e){this.realloc(8);g6(this.buf,e&-1,this.pos);g6(this.buf,Math.floor(e*iO),this.pos+4);this.pos+=8},writeSFixed64:function(e){this.realloc(8);g6(this.buf,e&-1,this.pos);g6(this.buf,Math.floor(e*iO),this.pos+4);this.pos+=8},writeVarint:function(e){e=+e||0;if(e>268435455||e<0){iJ(e,this);return}this.realloc(4);this.buf[this.pos++]=e&127|(e>127?128:0);if(e<=127){return}this.buf[this.pos++]=((e>>>=7)&127)|(e>127?128:0);if(e<=127){return}this.buf[this.pos++]=((e>>>=7)&127)|(e>127?128:0);if(e<=127){return}this.buf[this.pos++]=(e>>>7)&127},writeSVarint:function(e){this.writeVarint(e<0?-e*2-1:e*2)},writeBoolean:function(e){this.writeVarint(Boolean(e))},writeString:function(T){T=String(T);this.realloc(T.length*4);this.pos++;var i=this.pos;this.pos=cH(this.buf,T,this.pos);var e=this.pos-i;if(e>=128){cp(i,e,this)}this.pos=i-1;this.writeVarint(e);this.pos+=e},writeFloat:function(e){this.realloc(4);jw.write(this.buf,e,this.pos,true,23,4);this.pos+=4},writeDouble:function(e){this.realloc(8);jw.write(this.buf,e,this.pos,true,52,8);this.pos+=8},writeBytes:function(T){var e=T.length;this.writeVarint(e);this.realloc(e);for(var kC=0;kC<e;kC++){this.buf[this.pos++]=T[kC]}},writeRawMessage:function(T,kC){this.pos++;var i=this.pos;T(kC,this);var e=this.pos-i;if(e>=128){cp(i,e,this)}this.pos=i-1;this.writeVarint(e);this.pos+=e},writeMessage:function(e,i,T){this.writeTag(e,i8.Bytes);this.writeRawMessage(i,T)},writePackedVarint:function(i,e){if(e.length){this.writeMessage(i,eW,e)}},writePackedSVarint:function(i,e){if(e.length){this.writeMessage(i,by,e)}},writePackedBoolean:function(i,e){if(e.length){this.writeMessage(i,fi,e)}},writePackedFloat:function(i,e){if(e.length){this.writeMessage(i,hT,e)}},writePackedDouble:function(i,e){if(e.length){this.writeMessage(i,bi,e)}},writePackedFixed32:function(i,e){if(e.length){this.writeMessage(i,iz,e)}},writePackedSFixed32:function(i,e){if(e.length){this.writeMessage(i,aM,e)}},writePackedFixed64:function(i,e){if(e.length){this.writeMessage(i,hS,e)}},writePackedSFixed64:function(i,e){if(e.length){this.writeMessage(i,C,e)}},writeBytesField:function(e,i){this.writeTag(e,i8.Bytes);this.writeBytes(i)},writeFixed32Field:function(e,i){this.writeTag(e,i8.Fixed32);this.writeFixed32(i)},writeSFixed32Field:function(e,i){this.writeTag(e,i8.Fixed32);this.writeSFixed32(i)},writeFixed64Field:function(e,i){this.writeTag(e,i8.Fixed64);this.writeFixed64(i)},writeSFixed64Field:function(e,i){this.writeTag(e,i8.Fixed64);this.writeSFixed64(i)},writeVarintField:function(e,i){this.writeTag(e,i8.Varint);this.writeVarint(i)},writeSVarintField:function(e,i){this.writeTag(e,i8.Varint);this.writeSVarint(i)},writeStringField:function(e,i){this.writeTag(e,i8.Bytes);this.writeString(i)},writeFloatField:function(e,i){this.writeTag(e,i8.Fixed32);this.writeFloat(i)},writeDoubleField:function(e,i){this.writeTag(e,i8.Fixed64);this.writeDouble(i)},writeBooleanField:function(e,i){this.writeVarintField(e,Boolean(i))}};function fk(i,kD,kE){var T=kE.buf;var kC;var e;e=T[kE.pos++];kC=(e&112)>>4;if(e<128){return j1(i,kC,kD)}e=T[kE.pos++];kC|=(e&127)<<3;if(e<128){return j1(i,kC,kD)}e=T[kE.pos++];kC|=(e&127)<<10;if(e<128){return j1(i,kC,kD)}e=T[kE.pos++];kC|=(e&127)<<17;if(e<128){return j1(i,kC,kD)}e=T[kE.pos++];kC|=(e&127)<<24;if(e<128){return j1(i,kC,kD)}e=T[kE.pos++];kC|=(e&1)<<31;if(e<128){return j1(i,kC,kD)}throw new Error("Expected varint not more than 10 bytes")}function fN(e){return e.type===i8.Bytes?e.readVarint()+e.pos:e.pos+1}function j1(e,i,T){if(T){return i*4294967296+(e>>>0)}return((i>>>0)*4294967296)+(e>>>0)}function iJ(kC,T){var e;var i;if(kC>=0){e=(kC%4294967296)|0;i=(kC/4294967296)|0}else{e=~(-kC%4294967296);i=~(-kC/4294967296);if(e^4294967295){e=(e+1)|0}else{e=0;i=(i+1)|0}}if(kC>=18446744073709552000||kC<-18446744073709552000){throw new Error("Given varint doesn\'t fit into 10 bytes")}T.realloc(10);kw(e,i,T);i1(i,T)}function kw(e,i,T){T.buf[T.pos++]=e&127|128;e>>>=7;T.buf[T.pos++]=e&127|128;e>>>=7;T.buf[T.pos++]=e&127|128;e>>>=7;T.buf[T.pos++]=e&127|128;e>>>=7;T.buf[T.pos]=e&127}function i1(i,T){var e=(i&7)<<4;T.buf[T.pos++]|=e|((i>>>=3)?128:0);if(!i){return}T.buf[T.pos++]=i&127|((i>>>=7)?128:0);if(!i){return}T.buf[T.pos++]=i&127|((i>>>=7)?128:0);if(!i){return}T.buf[T.pos++]=i&127|((i>>>=7)?128:0);if(!i){return}T.buf[T.pos++]=i&127|((i>>>=7)?128:0);if(!i){return}T.buf[T.pos++]=i&127}function cp(T,e,kE){var kD=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(Math.LN2*7));kE.realloc(kD);for(var kC=kE.pos-1;kC>=T;kC--){kE.buf[kC+kD]=kE.buf[kC]}}function eW(e,kC){for(var T=0;T<e.length;T++){kC.writeVarint(e[T])}}function by(e,kC){for(var T=0;T<e.length;T++){kC.writeSVarint(e[T])}}function hT(e,kC){for(var T=0;T<e.length;T++){kC.writeFloat(e[T])}}function bi(e,kC){for(var T=0;T<e.length;T++){kC.writeDouble(e[T])}}function fi(e,kC){for(var T=0;T<e.length;T++){kC.writeBoolean(e[T])}}function iz(e,kC){for(var T=0;T<e.length;T++){kC.writeFixed32(e[T])}}function aM(e,kC){for(var T=0;T<e.length;T++){kC.writeSFixed32(e[T])}}function hS(e,kC){for(var T=0;T<e.length;T++){kC.writeFixed64(e[T])}}function C(e,kC){for(var T=0;T<e.length;T++){kC.writeSFixed64(e[T])}}function bW(e,i){return((e[i])|(e[i+1]<<8)|(e[i+2]<<16))+(e[i+3]*16777216)}function g6(e,i,T){e[T]=i;e[T+1]=(i>>>8);e[T+2]=(i>>>16);e[T+3]=(i>>>24)}function n(e,i){return((e[i])|(e[i+1]<<8)|(e[i+2]<<16))+(e[i+3]<<24)}function aE(e,kH,T){var kF="";var kC=kH;while(kC<T){var kJ=e[kC];var kE=null;var kK=kJ>239?4:kJ>223?3:kJ>191?2:1;if(kC+kK>T){break}var kI,kG,kD;if(kK===1){if(kJ<128){kE=kJ}}else{if(kK===2){kI=e[kC+1];if((kI&192)===128){kE=(kJ&31)<<6|(kI&63);if(kE<=127){kE=null}}}else{if(kK===3){kI=e[kC+1];kG=e[kC+2];if((kI&192)===128&&(kG&192)===128){kE=(kJ&15)<<12|(kI&63)<<6|(kG&63);if(kE<=2047||(kE>=55296&&kE<=57343)){kE=null}}}else{if(kK===4){kI=e[kC+1];kG=e[kC+2];kD=e[kC+3];if((kI&192)===128&&(kG&192)===128&&(kD&192)===128){kE=(kJ&15)<<18|(kI&63)<<12|(kG&63)<<6|(kD&63);if(kE<=65535||kE>=1114112){kE=null}}}}}}if(kE===null){kE=65533;kK=1}else{if(kE>65535){kE-=65536;kF+=String.fromCharCode(kE>>>10&1023|55296);kE=56320|kE&1023}}kF+=String.fromCharCode(kE);kC+=kK}return kF}function jU(i,T,e){return ao.decode(i.subarray(T,e))}function cH(T,kD,kF){for(var kC=0,kE,e;kC<kD.length;kC++){kE=kD.charCodeAt(kC);if(kE>55295&&kE<57344){if(e){if(kE<56320){T[kF++]=239;T[kF++]=191;T[kF++]=189;e=kE;continue}else{kE=e-55296<<10|kE-56320|65536;e=null}}else{if(kE>56319||(kC+1===kD.length)){T[kF++]=239;T[kF++]=191;T[kF++]=189}else{e=kE}continue}}else{if(e){T[kF++]=239;T[kF++]=191;T[kF++]=189;e=null}}if(kE<128){T[kF++]=kE}else{if(kE<2048){T[kF++]=kE>>6|192}else{if(kE<65536){T[kF++]=kE>>12|224}else{T[kF++]=kE>>18|240;T[kF++]=kE>>12&63|128}T[kF++]=kE>>6&63|128}T[kF++]=kE&63|128}}return kF}function fK(T,e){var i=function(kC,kF,kE){if(kC===3){var kD=new hD(kE,kE.readVarint()+kE.pos);if(kD.length){kF[kD.name]=kD}}};this.layers=T.readFields(i,{},e)}function hD(T,e){this.version=1;this.name=null;this.extent=4096;this.length=0;this._pbf=T;this._keys=[];this._values=[];this._features=[];function kC(kG){var kF=null,kE=kG.readVarint()+kG.pos;while(kG.pos<kE){var kD=kG.readVarint()>>3;kF=kD===1?kG.readString():kD===2?kG.readFloat():kD===3?kG.readDouble():kD===4?kG.readVarint64():kD===5?kG.readVarint():kD===6?kG.readSVarint():kD===7?kG.readBoolean():null}return kF}var i=function(kD,kE,kF){if(kD===15){kE.version=kF.readVarint()}else{if(kD===1){kE.name=kF.readString()}else{if(kD===5){kE.extent=kF.readVarint()}else{if(kD===2){kE._features.push(kF.pos)}else{if(kD===3){kE._keys.push(kF.readString())}else{if(kD===4){kE._values.push(kC(kF))}}}}}}};T.readFields(i,this,e);this.length=this._features.length}hD.prototype.feature=function(T){if(T<0||T>=this._features.length){throw new Error("feature 索引超出界限")}this._pbf.pos=this._features[T];var e=this._pbf.readVarint()+this._pbf.pos;return new hu(this._pbf,e,this.extent,this._keys,this._values)};function hC(kC){var kE=0;for(var kD=0,e=kC.length,T=e-1,kG,kF;kD<e;T=kD++){kG=kC[kD];kF=kC[T];kE+=(kF.lng-kG.lng)*(kG.lat+kF.lat)}return kE}function jM(kG){var e=kG.length;if(e<=1){return[kG]}var kC=[];var kE;var T;for(var kD=0;kD<e;kD++){var kF=hC(kG[kD]);if(kF===0){continue}if(T===undefined){T=kF<0}if(T===kF<0){if(kE){kC.push(kE)}kE=[kG[kD]]}else{kE.push(kG[kD])}}if(kE){kC.push(kE)}return kC}function hu(kF,e,T,kD,i){this.properties={};this.extent=T;this.type=0;this._pbf=kF;this._geometry=-1;this._keys=kD;this._values=i;function kC(kK,kI){var kG=kK.readVarint()+kK.pos;while(kK.pos<kG){var kH=kI._keys[kK.readVarint()];var kJ=kI._values[kK.readVarint()];kI.properties[kH]=kJ}}var kE=function(kG,kH,kI){if(kG==1){kH.id=kI.readVarint()}else{if(kG==2){kC(kI,kH)}else{if(kG==3){kH.type=kI.readVarint()}else{if(kG==4){kH._geometry=kI.pos}}}}};kF.readFields(kE,this,e)}hu.types=["Unknown","Point","LineString","Polygon"];hu.prototype.loadGeometry=function(){var kF=this._pbf;kF.pos=this._geometry;var T=kF.readVarint()+kF.pos;var i=1;var e=0;var kE=0;var kD=0;var kG=[];var kH;while(kF.pos<T){if(!e){var kC=kF.readVarint();i=kC&7;e=kC>>3}e--;if(i===1||i===2){kE+=kF.readSVarint();kD+=kF.readSVarint();if(i===1){if(kH){kG.push(kH)}kH=[]}kH.push(new cG(kE,kD))}else{if(i===7){if(kH){kH.push(kH[0].clone())}}else{throw new Error("未知指令"+i)}}}if(kH){kG.push(kH)}return kG};hu.prototype.bbox=function(){var kJ=this._pbf;kJ.pos=this._geometry;var kD=kJ.readVarint()+kJ.pos;var kC=1;var T=0;var kI=0;var kG=0;var i=Infinity;var e=-Infinity;var kH=Infinity;var kF=-Infinity;while(kJ.pos<kD){if(!T){var kE=kJ.readVarint();kC=kE&7;T=kE>>3}T--;if(kC===1||kC===2){kI+=kJ.readSVarint();kG+=kJ.readSVarint();if(kI<i){i=kI}if(kI>e){e=kI}if(kG<kH){kH=kG}if(kG>kF){kF=kG}}else{if(kC!==7){throw new Error("unknown command "+kC)}}}return[i,kH,e,kF]};hu.prototype.toGeoJSON=function(kH,kG,kF,kQ,kU){var kM=this.extent*Math.pow(2,kF);var kR=this.extent*kH;var T=this.extent*kG;var kK=256;var kC=Math.pow(2,(18-kF));var kP=kH*kK*kC;var kO=kG*kK*kC;var kT=256/this.extent;var kL=this.extent;var kS=[-20037508.342789244,20037508.342789244];var kI=[156543.03392804097,78271.51696402048,39135.75848201024,19567.87924100512,9783.93962050256,4891.96981025128,2445.98490512564,1222.99245256282,611.49622628141,305.748113140705,152.8740565703525,76.43702828517625,38.21851414258813,19.109257071294063,9.554628535647032,4.777314267823516,2.388657133911758,1.194328566955879,0.5971642834779395,0.29858214173896974,0.14929107086948487,0.07464553543474244,0.03732276771737122];function kD(kV){for(var kX=0;kX<kV.length;kX++){var kZ=kV[kX];var kW=kP+kZ.lng*kT*kC;var kY=kO+(kL-kZ.lat)*kT*kC;kV[kX]=[kW,kY]}}function e(kV,k1,k0){var kW=kI[k0];var kZ=[256,256];var kY=kS[0]+kV*kZ[0]*kW;var kX=kS[1]-(k1+1)*kZ[1]*kW;return[kY,kX]}function kN(kW){var k1=e(kH,kG,kF);var kV=kI[kF];for(var kY=0;kY<kW.length;kY++){var k0=kW[kY];var kX=k1[0]+k0.lng*kT*kV;var kZ=k1[1]+(kL-k0.lat)*kT*kV;kW[kY]=[kX,kZ]}}function kE(kV){for(var kW=0;kW<kV.length;kW++){var kY=kV[kW];var kX=180-(kY.lat+T)*360/kM;kV[kW]=[(kY.lng+kR)*360/kM-180,360/Math.PI*Math.atan(Math.exp(kX*Math.PI/180))-90]}}function i(kV){if(kQ===ek.GridModel["BAIDUWEB"]){return kD(kV)}else{if(kU){return kN(kV)}else{return kE(kV)}}}var kJ=this.toParseJSON(i);return kJ};hu.prototype.toTileJSON=function(i,kF,kE){var kC=this.extent;var T=256/kC;function kD(kG){for(var kH=0;kH<kG.length;kH++){var kI=kG[kH];kG[kH]=[kI.lng*T,(kC-kI.lat)*T]}}var e=this.toParseJSON(kD);return e};hu.prototype.toParseJSON=function(kG){var kF=this.loadGeometry();var kE=hu.types[this.type];var kC;var T;switch(this.type){case 1:var kD=[];for(kC=0;kC<kF.length;kC++){kD[kC]=kF[kC][0]}kF=kD;kG(kF);break;case 2:for(kC=0;kC<kF.length;kC++){kG(kF[kC])}break;case 3:kF=jM(kF);for(kC=0;kC<kF.length;kC++){for(T=0;T<kF[kC].length;T++){kG(kF[kC][T])}}break}if(kF.length===1){kF=kF[0]}else{kE="Multi"+kE}var e={type:"Feature",geometry:{type:kE,coordinates:kF},properties:this.properties};if("id" in this){e.id=this["id"]}else{if("id" in this.properties){e.id=this.properties.id}}return e};');
